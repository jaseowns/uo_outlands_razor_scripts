# This is an automated backup - check out https://outlands.uorazorscripts.com/script/3d0fbef7-e87f-4009-8e64-12638e95f31b for latest
# Automation by Jaseowns
## Script: Buff Potion Timers
## Created by: oakman8490#0
#############################################

## Potion Settings ##
@setvar! useStrengthPot 1
@setvar! useStaminaPot 1
@setvar! useResistPot 1
@setvar! useRefreshPotStamDiff 20
@setvar! MixedResultsLevel 2
@setvar! PotionTimerReminderCD 3000

## Potion Timer Cooldown Calc ##
if skill "Alchemy" = 0
    @setvar! BuffPotionTimerCD 12000
if skill "Alchemy" < 5
    @setvar! BuffPotionTimerCD 11500
if skill "Alchemy" < 10
    @setvar! BuffPotionTimerCD 12000
elseif skill "Alchemy" < 20
    @setvar! BuffPotionTimerCD 15800
elseif skill "Alchemy" < 30
    @setvar! BuffPotionTimerCD 20600
elseif skill "Alchemy" < 40
    @setvar! BuffPotionTimerCD 20600
elseif skill "Alchemy" < 50
    @setvar! BuffPotionTimerCD 24900
elseif skill "Alchemy" < 60
    @setvar! BuffPotionTimerCD 34000
elseif skill "Alchemy" < 70
    @setvar! BuffPotionTimerCD 38800
elseif skill "Alchemy" < 80
    @setvar! BuffPotionTimerCD 42600
elseif skill "Alchemy" < 90
    if MixedResultsLevel = 1
        @setvar! BuffPotionTimerCD 97800
    elseif MixedResultsLevel = 2
        @setvar! BuffPotionTimerCD 148200
    elseif MixedResultsLevel = 3
        @setvar! BuffPotionTimerCD 198600
    else
        @setvar! BuffPotionTimerCD 47400
    endif
elseif skill "Alchemy" < 100
    if MixedResultsLevel = 1
        @setvar! BuffPotionTimerCD 107400
    elseif MixedResultsLevel = 2
        @setvar! BuffPotionTimerCD 162600
    elseif MixedResultsLevel = 3
        @setvar! BuffPotionTimerCD 217800
    else
        @setvar! BuffPotionTimerCD 52200
    endif
elseif skill "Alchemy" < 110
    if MixedResultsLevel = 1
        @setvar! BuffPotionTimerCD 117000
    elseif MixedResultsLevel = 2
        @setvar! BuffPotionTimerCD 177000
    elseif MixedResultsLevel = 3
        @setvar! BuffPotionTimerCD 237000
    else
        @setvar! BuffPotionTimerCD 57000
    endif
elseif skill "Alchemy" < 120
    if MixedResultsLevel = 1
        @setvar! BuffPotionTimerCD 126600
    elseif MixedResultsLevel = 2
        @setvar! BuffPotionTimerCD 191400
    elseif MixedResultsLevel = 3
        @setvar! BuffPotionTimerCD 256200
    else
        @setvar! BuffPotionTimerCD 61800
    endif    
elseif skill "Alchemy" = 120
    if MixedResultsLevel = 1
        @setvar! BuffPotionTimerCD 136200
    elseif MixedResultsLevel = 2
        @setvar! BuffPotionTimerCD 205800
    elseif MixedResultsLevel = 3
        @setvar! BuffPotionTimerCD 275400
    else
        @setvar! BuffPotionTimerCD 66600
    endif  
else 
    @setvar! BuffPotionTimerCD 12000
endif
    
if not timerexists "StrengthPotionTimer"
    createtimer "StrengthPotionTimer"
    settimer "StrengthPotionTimer" BuffPotionTimerCD
endif
if not timerexists "StaminaPotionTimer"
    createtimer "StaminaPotionTimer"
    settimer "StaminaPotionTimer" BuffPotionTimerCD
endif 
if not timerexists "ResistPotionTimer"
    createtimer "ResistPotionTimer"
    settimer "ResistPotionTimer" BuffPotionTimerCD
endif 
if not timerexists "StrengthPotionTimerReminder"
    createtimer "StrengthPotionTimerReminder"
    settimer "StrengthPotionTimerReminder" PotionTimerReminderCD
endif
if not timerexists "StaminaPotionTimerReminder"
    createtimer "StaminaPotionTimerReminder"
    settimer "StaminaPotionTimerReminder" PotionTimerReminderCD
endif 
if not timerexists "ResistPotionTimerReminder"
    createtimer "ResistPotionTimerReminder"
    settimer "ResistPotionTimerReminder" PotionTimerReminderCD
endif    

while not dead

        
    if useStrengthPot = 1    
        if not findbuff "Strength"
            @setvar NeedStrengthPotion 1
        elseif timer "StrengthPotionTimer" > BuffPotionTimerCD
            @setvar NeedStrengthPotion 1
        else 
            @setvar NeedStrengthPotion 0
        endif
        if NeedStrengthPotion = 1
            if findtype "White Potion" self as myPot
                dclick myPot
                settimer "StrengthPotionTimer" 0
                wait 200
            elseif timer "StrengthPotionTimerReminder" > PotionTimerReminderCD
                overhead "No White Potions found"
                settimer "StrengthPotionTimerReminder" 0
                endif 
        endif
        if insysmsg "before you may use another strength potion"
            settimer "StrengthPotionTimer" 0
        endif
    endif
    if useStaminaPot = 1    
        if not findbuff "Agility"
            @setvar NeedStaminaPotion 1
        elseif timer "StaminaPotionTimer" > BuffPotionTimerCD
            @setvar NeedStaminaPotion 1
        else 
            @setvar NeedStaminaPotion 0
        endif
        if NeedStaminaPotion = 1
            if findtype "Blue Potion" self as myPot
                dclick myPot
                settimer "StaminaPotionTimer" 0
                wait 200
            elseif timer "StaminaPotionTimerReminder" > PotionTimerReminderCD
                overhead "No Blue Potions found"
                settimer "StaminaPotionTimerReminder" 0
            endif
        endif 
        if insysmsg "before you may use another agility potion"
            settimer "StaminaPotionTimer" 0
        endif         
    endif
    if useResistPot = 1    
        if not findbuff "Magic Resist Potion"
            @setvar NeedResistPotion 1
        elseif timer "StaminaPotionTimer" > BuffPotionTimerCD
            @setvar NeedResistPotion 1
        else 
            @setvar NeedResistPotion 0
        endif
        if NeedResistPotion = 1
            if findtype "Black Potion" self as myPot
                dclick myPot
                settimer "ResistPotionTimer" 0
                wait 200
            elseif timer "ResistPotionTimerReminder" > PotionTimerReminderCD
                overhead "No Black Potions found"
                settimer "ResistPotionTimerReminder" 0
            endif
        endif    
    endif      
                
        
endwhile 