# This is an automated backup - check out https://outlands.uorazorscripts.com/script/eea8f6ea-5996-4836-ab2c-109ac341f9b3 for latest
# Automation by Jaseowns
## Script: MonsterShuffle-Bro
## Created by: nev0r#0
#############################################

//////////////////////////////
//
// Monster Shuffle Bot for UO Outlands, Version 1
// by Alpha && Nevor
// - Automatically plays the casino game monster shuffle (you have to be in a range of 2 tiles towards the game keg to play)
// - This script will work without any change. There is an optional setup section below where you can find and adjust some parameters according to your own preferences
// - By default it is set to autopilot and max runspeed
// - WARNING: server system messages are needed to determine necessary actions, make sure they are not filtered for scripts: 
//      Razor -> Filters -> Text&Messages ->
//      - "Enable text filter" and "Filter system messages" (list entry sub-menu) can be checked, however "Ignore filtered messages in overhead and scripts" (list entry sub-menu) has to be unchecked
//
//////////////////////////////

######## MANUAL SETUP ########

//Let the script or the user decide how to handle results:
    //0 ... You have to manually click which creatures to keep and which ones to reroll
    //1 ... The script decides how to handle results the best way possible
    setvar! msAutoResolve 1

//Wait time between rolls (to see the results), duration in milliseconds (0 - indefinite)
    setvar! msShowResultDuration 0

//What are we going to do if we need more gold to continue playing:
    //0 ... Do not add more gold automatically (rational choice)
    //1 ... MORE GOLD NOW!
    setvar! msAutoAddFunds 0

//Show additional status information for easier debugging
    //0 ... Off
    //1 ... On
    setvar! msDebugMode 0
    
###### END MANUAL SETUP ######

//////////////////////////////
// 
// Changelog
//
//////////////////////////////

setvar! globalWaitForServerResponse 500
setvar! globalWaitForObjectDelay 600
if not timerexists globalObjectDelayTimer
    settimer globalObjectDelayTimer globalWaitForObjectDelay
endif

@clearignore
setvar! msGumpID 1312641219
if insysmsg "You are out of funds."
endif

while findtype 3711 ground -1 -1 2 as localKeg and not insysmsg! "You are out of funds."

    if msDebugMode > 0
        sysmsg "---- NEW GAME ----" 52    
        settimer msDebugTimer 0
    endif

    while find localKeg ground -1 -1 2 and not gumpexists msGumpID
        while timer globalObjectDelayTimer < globalWaitForObjectDelay
        endwhile
        dclick localKeg
        settimer globalObjectDelayTimer 0
        waitforgump msGumpID globalWaitForServerResponse
    endwhile

    if not ingump "Roll!" 1312641219
        //Try to reopen gump once to exclude auto-refresh error due to high runspeed
        while timer globalObjectDelayTimer < globalWaitForObjectDelay
        endwhile
        dclick localKeg
        settimer globalObjectDelayTimer 0
        waitforgump msGumpID globalWaitForServerResponse
        if not ingump "Roll!" 1312641219            
            overhead "¶¶ FINISH GAME ÀÀ" 1680
            sysmsg "¶¶ FINISH GAME ÀÀ" 1680
            stop
        endif
    endif

    //Set Jackpot
    removelist msJackpotList
    createlist msJackpotList
    
    if ingump "3x Otyugh" 1312641219
        pushlist msJackpotList "Otyugh"
    elseif ingump "3x Colossal Poison Dart Frog" 1312641219
        pushlist msJackpotList "Colossal Poison Dart Frog"
    elseif ingump "3x Colossal Black Widow" 1312641219
        pushlist msJackpotList "Colossal Black Widow"
    elseif ingump "3x Wildwood Reaper" 1312641219
        pushlist msJackpotList "Wildwood Reaper"
    elseif ingump "3x Hellhound" 1312641219
        pushlist msJackpotList "Hellhound"
    elseif ingump "3x Carrion Beetle" 1312641219
        pushlist msJackpotList "Carrion Beetle"
    elseif ingump "3x Daemon" 1312641219
        pushlist msJackpotList "Daemon"
    elseif ingump "3x Ratman" 1312641219
        pushlist msJackpotList "Ratman"
    elseif ingump "3x Dragon" 1312641219
        pushlist msJackpotList "Dragon"
    elseif ingump "3x Living Earth" 1312641219
        pushlist msJackpotList "Living Earth"
    elseif ingump "3x Horse" 1312641219
        pushlist msJackpotList "Horse"
    elseif ingump "3x Fey Spirit Matron" 1312641219
        pushlist msJackpotList "Fey Spirit Matron"
    elseif ingump "3x Deathstalk" 1312641219
        pushlist msJackpotList "Deathstalk"
    elseif ingump "3x Shadowguard" 1312641219
        pushlist msJackpotList "Shadowguard"
    elseif ingump "3x Sand Crawler" 1312641219
        pushlist msJackpotList "Sand Crawler"
    elseif ingump "3x Minotaur Runesmith" 1312641219
        pushlist msJackpotList "Minotaur Runesmith"
    elseif ingump "3x Ettin" 1312641219
        pushlist msJackpotList "Ettin"
    elseif ingump "3x Ophidian Matron" 1312641219
        pushlist msJackpotList "Ophidian Matron"
    elseif ingump "3x Opilion Conservator" 1312641219
        pushlist msJackpotList "Opilion Conservator"
    elseif ingump "3x Frenzied Ostard" 1312641219
        pushlist msJackpotList "Frenzied Ostard"
    elseif ingump "3x Abomination" 1312641219
        pushlist msJackpotList "Abomination"
    elseif ingump "3x Wyvern" 1312641219
        pushlist msJackpotList "Wyvern"
    elseif ingump "3x Molten Idol" 1312641219
        pushlist msJackpotList "Molten Idol"
    elseif ingump "3x Malform" 1312641219
        pushlist msJackpotList "Malform"
    elseif ingump "3x Skeletal Fiend" 1312641219
        pushlist msJackpotList "Skeletal Fiend"
    elseif ingump "3x Corpse Purger" 1312641219
        pushlist msJackpotList "Corpse Purger"
    elseif ingump "3x Temple Guardian" 1312641219
        pushlist msJackpotList "Temple Guardian"
    elseif ingump "3x Terathan Matron" 1312641219
        pushlist msJackpotList "Terathan Matron"
    elseif ingump "3x Lich Magus" 1312641219
        pushlist msJackpotList "Lich Magus"
    elseif ingump "3x Vampire" 1312641219
        pushlist msJackpotList "Vampire"
    endif

    //Creatures
    removelist msCreatureList
    createlist msCreatureList

    //  1 "Aberration"
        pushlist msCreatureList "Calamity"
        pushlist msCreatureList "Coagulator"
        pushlist msCreatureList "Otyugh"
    //  2 "Amphibian"
        pushlist msCreatureList "Giant Frog"
        pushlist msCreatureList "Chameleon"
        pushlist msCreatureList "Colossal Poison Dart Frog"
    //  3 "Arachnid"
        pushlist msCreatureList "Swamp Spider"
        pushlist msCreatureList "Giant Spider"
        pushlist msCreatureList "Colossal Black Widow"
    //  4 "Arboreal"
        pushlist msCreatureList "Myconid"
        pushlist msCreatureList "Wildwood Guardian"
        pushlist msCreatureList "Wildwood Reaper"
    //  5 "Canine"
        pushlist msCreatureList "Wolf"
        pushlist msCreatureList "Wolfhound"
        pushlist msCreatureList "Hellhound"
    //  6 "Carrion"
        pushlist msCreatureList "Giant Rat"
        pushlist msCreatureList "Corpse Eater"
        pushlist msCreatureList "Carrion Beetle"
    //  7 "Daemonic"
        pushlist msCreatureList "Imp"
        pushlist msCreatureList "Gargoyle"
        pushlist msCreatureList "Daemon"
    //  8 "Demihuman"
        pushlist msCreatureList "Headless"
        pushlist msCreatureList "Orc"
        pushlist msCreatureList "Ratman"
    //  9 "Draconic"
        pushlist msCreatureList "Dragon Whelp"
        pushlist msCreatureList "Drake"
        pushlist msCreatureList "Dragon"
    //  10 "Earthen"
        pushlist msCreatureList "Earth Elemental"
        pushlist msCreatureList "Volcanite"
        pushlist msCreatureList "Living Earth"
    //  11 "Farmland"
        pushlist msCreatureList "Pig"
        pushlist msCreatureList "Cow"
        pushlist msCreatureList "Horse"
    //  12 "Fey"
        pushlist msCreatureList "Dryad"
        pushlist msCreatureList "Faery"
        pushlist msCreatureList "Fey Spirit Matron"
    //  13 "Flora"
        pushlist msCreatureList "Corpser"
        pushlist msCreatureList "Noxweed"
        pushlist msCreatureList "Deathstalk"
    //  14 "Ghostly"
        pushlist msCreatureList "Ghoul"
        pushlist msCreatureList "Banshee"
        pushlist msCreatureList "Shadowguard"
    //  15 "Insectoid"
        pushlist msCreatureList "Scorpion"
        pushlist msCreatureList "Fire Ant"
        pushlist msCreatureList "Sand Crawler"
    //  16 "Minotaur"
        pushlist msCreatureList "Minotaur"
        pushlist msCreatureList "Minotaur Berserker"
        pushlist msCreatureList "Minotaur Runesmith"
    //  17 "Ogroid"
        pushlist msCreatureList "Ogre"
        pushlist msCreatureList "Troll"
        pushlist msCreatureList "Ettin"
    //  18 "Ophidian"
        pushlist msCreatureList "Ophidian Warrior"
        pushlist msCreatureList "Ophidian Mage"
        pushlist msCreatureList "Ophidian Matron"
    //  19 "Opilion"
        pushlist msCreatureList "Opilion Worker"
        pushlist msCreatureList "Opilion Attendant"
        pushlist msCreatureList "Opilion Conservator"
    //  20 "Ostard"
        pushlist msCreatureList "Desert Ostard"
        pushlist msCreatureList "Forest Ostard"
        pushlist msCreatureList "Frenzied Ostard"
    //  21 "Reanimated"
        pushlist msCreatureList "Flesh Hound"
        pushlist msCreatureList "Shambler"
        pushlist msCreatureList "Abomination"
    //  22 "Reptilian"
        pushlist msCreatureList "Primordial"
        pushlist msCreatureList "Lizardman"
        pushlist msCreatureList "Wyvern"
    //  23 "Sentinel"
        pushlist msCreatureList "Observer"
        pushlist msCreatureList "Overseer"
        pushlist msCreatureList "Molten Idol"
    //  24 "Shapeshifter"
        pushlist msCreatureList "Garou"
        pushlist msCreatureList "Lycanthrope"
        pushlist msCreatureList "Malform"
    //  25 "Skeletal"
        pushlist msCreatureList "Skeleton"
        pushlist msCreatureList "Skeletal Guardian"
        pushlist msCreatureList "Skeletal Fiend"
    //  26 "Spitter"
        pushlist msCreatureList "Giant Swamp Slug"
        pushlist msCreatureList "Colossal Swamp Slug"
        pushlist msCreatureList "Corpse Purger"
    //  27 "Stealther"
        pushlist msCreatureList "Jaguar"
        pushlist msCreatureList "Creeping Earth"
        pushlist msCreatureList "Temple Guardian"
    //  28 "Terathan"
        pushlist msCreatureList "Terathan Drone"
        pushlist msCreatureList "Terathan Warrior"
        pushlist msCreatureList "Terathan Matron"
    //  29 "Unliving"
        pushlist msCreatureList "Zombie"
        pushlist msCreatureList "Revenant"
        pushlist msCreatureList "Lich Magus"
    //  30 "Vampiric"
        pushlist msCreatureList "Vampire Bat"
        pushlist msCreatureList "Corpsebride"
        pushlist msCreatureList "Vampire"

    setvar! msCreatureMatch 0
    setvar! msJackpotFound 0
    removelist msFoundCreatureList
    createlist msFoundCreatureList
   
    setvar! msType_1 0
    setvar! msType_2 0
    setvar! msType_3 0
    setvar! msTypeMatch 0
    removelist msFoundTypeList
    createlist msFoundTypeList

    removelist msResponseList
    createlist msResponseList

    if insysmsg "You must finish your current roll before playing again."
    endif

    overhead "È ROLLING! È " 52
#    sysmsg "È ROLLING! È " 52
    gumpresponse 6 msGumpID
    waitforgump msGumpID 20000

    for 3
        if not find localKeg ground -1 -1 2 or insysmsg! "You are out of funds."
            break
        elseif ingump "Calamity" 1312641219 and inlist msCreatureList "Calamity"
            poplist msCreatureList "Calamity"
            pushlist msFoundCreatureList "Calamity"
            pushlist msFoundTypeList 1
        elseif ingump "Coagulator" 1312641219 and inlist msCreatureList "Coagulator"
            poplist msCreatureList "Coagulator"
            pushlist msFoundCreatureList "Coagulator"
            pushlist msFoundTypeList 1
        elseif ingump "Otyugh" 1312641219 and inlist msCreatureList "Otyugh" and not inlist msJackpotList "Otyugh"
            poplist msCreatureList "Otyugh"
            pushlist msFoundCreatureList "Otyugh"
            pushlist msFoundTypeList 1
        elseif ingump "Giant Frog" 1312641219 and inlist msCreatureList "Giant Frog"
            poplist msCreatureList "Giant Frog"
            pushlist msFoundCreatureList "Giant Frog"
            pushlist msFoundTypeList 2
        elseif ingump "Chameleon" 1312641219 and inlist msCreatureList "Chameleon"
            poplist msCreatureList "Chameleon"
            pushlist msFoundCreatureList "Chameleon"
            pushlist msFoundTypeList 2
        elseif ingump "Colossal Poison Dart Frog" 1312641219 and inlist msCreatureList "Colossal Poison Dart Frog" and not inlist msJackpotList "Colossal Poison Dart Frog"
            poplist msCreatureList "Colossal Poison Dart Frog"
            pushlist msFoundCreatureList "Colossal Poison Dart Frog"
            pushlist msFoundTypeList 2
        elseif ingump "Swamp Spider" 1312641219 and inlist msCreatureList "Swamp Spider"
            poplist msCreatureList "Swamp Spider"
            pushlist msFoundCreatureList "Swamp Spider"
            pushlist msFoundTypeList 3
        elseif ingump "Giant Spider" 1312641219 and inlist msCreatureList "Giant Spider"
            poplist msCreatureList "Giant Spider"
            pushlist msFoundCreatureList "Giant Spider"
            pushlist msFoundTypeList 3
        elseif ingump "Colossal Black Widow" 1312641219 and inlist msCreatureList "Colossal Black Widow" and not inlist msJackpotList "Colossal Black Widow"
            poplist msCreatureList "Colossal Black Widow"
            pushlist msFoundCreatureList "Colossal Black Widow"
            pushlist msFoundTypeList 3
        elseif ingump "Myconid" 1312641219 and inlist msCreatureList "Myconid"
            poplist msCreatureList "Myconid"
            pushlist msFoundCreatureList "Myconid"
            pushlist msFoundTypeList 4
        elseif ingump "Wildwood Guardian" 1312641219 and inlist msCreatureList "Wildwood Guardian"
            poplist msCreatureList "Wildwood Guardian"
            pushlist msFoundCreatureList "Wildwood Guardian"
            pushlist msFoundTypeList 4
        elseif ingump "Wildwood Reaper" 1312641219 and inlist msCreatureList "Wildwood Reaper" and not inlist msJackpotList "Wildwood Reaper"
            poplist msCreatureList "Wildwood Reaper"
            pushlist msFoundCreatureList "Wildwood Reaper"
            pushlist msFoundTypeList 4
        elseif ingump "Wolf" 1312641219 and not ingump "Wolfhound" 1312641219 and inlist msCreatureList "Wolf"
            poplist msCreatureList "Wolf"
            pushlist msFoundCreatureList "Wolf"
            pushlist msFoundTypeList 5
        elseif ingump "Wolfhound" 1312641219 and inlist msCreatureList "Wolfhound"
            poplist msCreatureList "Wolfhound"
            pushlist msFoundCreatureList "Wolfhound"
            pushlist msFoundTypeList 5
        elseif ingump "Hellhound" 1312641219 and inlist msCreatureList "Hellhound" and not inlist msJackpotList "Hellhound"
            poplist msCreatureList "Hellhound"
            pushlist msFoundCreatureList "Hellhound"
            pushlist msFoundTypeList 5
        elseif ingump "Giant Rat" 1312641219 and inlist msCreatureList "Giant Rat"
            poplist msCreatureList "Giant Rat"
            pushlist msFoundCreatureList "Giant Rat"
            pushlist msFoundTypeList 6
        elseif ingump "Corpse Eater" 1312641219 and inlist msCreatureList "Corpse Eater"
            poplist msCreatureList "Corpse Eater"
            pushlist msFoundCreatureList "Corpse Eater"
            pushlist msFoundTypeList 6
        elseif ingump "Carrion Beetle" 1312641219 and inlist msCreatureList "Carrion Beetle" and not inlist msJackpotList "Carrion Beetle"
            poplist msCreatureList "Carrion Beetle"
            pushlist msFoundCreatureList "Carrion Beetle"
            pushlist msFoundTypeList 6
        elseif ingump "Imp" 1312641219 and inlist msCreatureList "Imp"
            poplist msCreatureList "Imp"
            pushlist msFoundCreatureList "Imp"
            pushlist msFoundTypeList 7
        elseif ingump "Gargoyle" 1312641219 and inlist msCreatureList "Gargoyle"
            poplist msCreatureList "Gargoyle"
            pushlist msFoundCreatureList "Gargoyle"
            pushlist msFoundTypeList 7
        elseif ingump "Daemon" 1312641219 and not ingump "Imp" 1312641219 and not ingump "Gargoyle" 1312641219 and inlist msCreatureList "Daemon" and not inlist msJackpotList "Daemon"
            poplist msCreatureList "Daemon"
            pushlist msFoundCreatureList "Daemon"
            pushlist msFoundTypeList 7
        elseif ingump "Headless" 1312641219 and inlist msCreatureList "Headless"
            poplist msCreatureList "Headless"
            pushlist msFoundCreatureList "Headless"
            pushlist msFoundTypeList 8
        elseif ingump "Orc" 1312641219 and inlist msCreatureList "Orc"
            poplist msCreatureList "Orc"
            pushlist msFoundCreatureList "Orc"
            pushlist msFoundTypeList 8
        elseif ingump "Ratman" 1312641219 and inlist msCreatureList "Ratman" and not inlist msJackpotList "Ratman"
            poplist msCreatureList "Ratman"
            pushlist msFoundCreatureList "Ratman"
            pushlist msFoundTypeList 8
        elseif ingump "Dragon Whelp" 1312641219 and inlist msCreatureList "Dragon Whelp"
            poplist msCreatureList "Dragon Whelp"
            pushlist msFoundCreatureList "Dragon Whelp"
            pushlist msFoundTypeList 9
        elseif ingump "Drake" 1312641219 and inlist msCreatureList "Drake"
            poplist msCreatureList "Drake"
            pushlist msFoundCreatureList "Drake"
            pushlist msFoundTypeList 9
        elseif ingump "Dragon" 1312641219 and not ingump "Dragon Whelp" 1312641219 and inlist msCreatureList "Dragon" and not inlist msJackpotList "Dragon"
            poplist msCreatureList "Dragon"
            pushlist msFoundCreatureList "Dragon"
            pushlist msFoundTypeList 9
        elseif ingump "Earth Elemental" 1312641219 and inlist msCreatureList "Earth Elemental"
            poplist msCreatureList "Earth Elemental"
            pushlist msFoundCreatureList "Earth Elemental"
            pushlist msFoundTypeList 10
        elseif ingump "Volcanite" 1312641219 and inlist msCreatureList "Volcanite"
            poplist msCreatureList "Volcanite"
            pushlist msFoundCreatureList "Volcanite"
            pushlist msFoundTypeList 10
        elseif ingump "Living Earth" 1312641219 and inlist msCreatureList "Living Earth" and not inlist msJackpotList "Living Earth"
            poplist msCreatureList "Living Earth"
            pushlist msFoundCreatureList "Living Earth"
            pushlist msFoundTypeList 10
        elseif ingump "Pig" 1312641219 and inlist msCreatureList "Pig"
            poplist msCreatureList "Pig"
            pushlist msFoundCreatureList "Pig"
            pushlist msFoundTypeList 11
        elseif ingump "Cow" 1312641219 and inlist msCreatureList "Cow"
            poplist msCreatureList "Cow"
            pushlist msFoundCreatureList "Cow"
            pushlist msFoundTypeList 11
        elseif ingump "Horse" 1312641219 and inlist msCreatureList "Horse" and not inlist msJackpotList "Horse"
            poplist msCreatureList "Horse"
            pushlist msFoundCreatureList "Horse"
            pushlist msFoundTypeList 11
        elseif ingump "Dryad" 1312641219 and inlist msCreatureList "Dryad"
            poplist msCreatureList "Dryad"
            pushlist msFoundCreatureList "Dryad"
            pushlist msFoundTypeList 12
        elseif ingump "Faery" 1312641219 and inlist msCreatureList "Faery"
            poplist msCreatureList "Faery"
            pushlist msFoundCreatureList "Faery"
            pushlist msFoundTypeList 12
        elseif ingump "Fey Spirit Matron" 1312641219 and inlist msCreatureList "Fey Spirit Matron" and not inlist msJackpotList "Fey Spirit Matron"
            poplist msCreatureList "Fey Spirit Matron"
            pushlist msFoundCreatureList "Fey Spirit Matron"
            pushlist msFoundTypeList 12
        elseif ingump "Corpser" 1312641219 and inlist msCreatureList "Corpser"
            poplist msCreatureList "Corpser"
            pushlist msFoundCreatureList "Corpser"
            pushlist msFoundTypeList 13
        elseif ingump "Noxweed" 1312641219 and inlist msCreatureList "Noxweed"
            poplist msCreatureList "Noxweed"
            pushlist msFoundCreatureList "Noxweed"
            pushlist msFoundTypeList 13
        elseif ingump "Deathstalk" 1312641219 and inlist msCreatureList "Deathstalk" and not inlist msJackpotList "Deathstalk"
            poplist msCreatureList "Deathstalk"
            pushlist msFoundCreatureList "Deathstalk"
            pushlist msFoundTypeList 13
        elseif ingump "Ghoul" 1312641219 and inlist msCreatureList "Ghoul"
            poplist msCreatureList "Ghoul"
            pushlist msFoundCreatureList "Ghoul"
            pushlist msFoundTypeList 14
        elseif ingump "Banshee" 1312641219 and inlist msCreatureList "Banshee"
            poplist msCreatureList "Banshee"
            pushlist msFoundCreatureList "Banshee"
            pushlist msFoundTypeList 14
        elseif ingump "Shadowguard" 1312641219 and inlist msCreatureList "Shadowguard" and not inlist msJackpotList "Shadowguard"
            poplist msCreatureList "Shadowguard"
            pushlist msFoundCreatureList "Shadowguard"
            pushlist msFoundTypeList 14
        elseif ingump "Scorpion" 1312641219 and inlist msCreatureList "Scorpion"
            poplist msCreatureList "Scorpion"
            pushlist msFoundCreatureList "Scorpion"
            pushlist msFoundTypeList 15
        elseif ingump "Fire Ant" 1312641219 and inlist msCreatureList "Fire Ant"
            poplist msCreatureList "Fire Ant"
            pushlist msFoundCreatureList "Fire Ant"
            pushlist msFoundTypeList 15
        elseif ingump "Sand Crawler" 1312641219 and inlist msCreatureList "Sand Crawler" and not inlist msJackpotList "Sand Crawler"
            poplist msCreatureList "Sand Crawler"
            pushlist msFoundCreatureList "Sand Crawler"
            pushlist msFoundTypeList 15
        elseif ingump "Minotaur" 1312641219 and not ingump "Minotaur Berserker" 1312641219 and not ingump "Minotaur Runesmith" 1312641219 and inlist msCreatureList "Minotaur"
            poplist msCreatureList "Minotaur"
            pushlist msFoundCreatureList "Minotaur"
            pushlist msFoundTypeList 16
        elseif ingump "Minotaur Berserker" 1312641219 and inlist msCreatureList "Minotaur Berserker"
            poplist msCreatureList "Minotaur Berserker"
            pushlist msFoundCreatureList "Minotaur Berserker"
            pushlist msFoundTypeList 16
        elseif ingump "Minotaur Runesmith" 1312641219 and inlist msCreatureList "Minotaur Runesmith" and not inlist msJackpotList "Minotaur Runesmith"
            poplist msCreatureList "Minotaur Runesmith"
            pushlist msFoundCreatureList "Minotaur Runesmith"
            pushlist msFoundTypeList 16
        elseif ingump "Ogre" 1312641219 and inlist msCreatureList "Ogre"
            poplist msCreatureList "Ogre"
            pushlist msFoundCreatureList "Ogre"
            pushlist msFoundTypeList 17
        elseif ingump "Troll" 1312641219 and inlist msCreatureList "Troll"
            poplist msCreatureList "Troll"
            pushlist msFoundCreatureList "Troll"
            pushlist msFoundTypeList 17
        elseif ingump "Ettin" 1312641219 and inlist msCreatureList "Ettin" and not inlist msJackpotList "Ettin"
            poplist msCreatureList "Ettin"
            pushlist msFoundCreatureList "Ettin"
            pushlist msFoundTypeList 17
        elseif ingump "Ophidian Warrior" 1312641219 and inlist msCreatureList "Ophidian Warrior"
            poplist msCreatureList "Ophidian Warrior"
            pushlist msFoundCreatureList "Ophidian Warrior"
            pushlist msFoundTypeList 18
        elseif ingump "Ophidian Mage" 1312641219 and inlist msCreatureList "Ophidian Mage"
            poplist msCreatureList "Ophidian Mage"
            pushlist msFoundCreatureList "Ophidian Mage"
            pushlist msFoundTypeList 18
        elseif ingump "Ophidian Matron" 1312641219 and inlist msCreatureList "Ophidian Matron" and not inlist msJackpotList "Ophidian Matron"
            poplist msCreatureList "Ophidian Matron"
            pushlist msFoundCreatureList "Ophidian Matron"
            pushlist msFoundTypeList 18
        elseif ingump "Opilion Worker" 1312641219 and inlist msCreatureList "Opilion Worker"
            poplist msCreatureList "Opilion Worker"
            pushlist msFoundCreatureList "Opilion Worker"
            pushlist msFoundTypeList 19
        elseif ingump "Opilion Attendant" 1312641219 and inlist msCreatureList "Opilion Attendant"
            poplist msCreatureList "Opilion Attendant"
            pushlist msFoundCreatureList "Opilion Attendant"
            pushlist msFoundTypeList 19
        elseif ingump "Opilion Conservator" 1312641219 and inlist msCreatureList "Opilion Conservator" and not inlist msJackpotList "Opilion Conservator"
            poplist msCreatureList "Opilion Conservator"
            pushlist msFoundCreatureList "Opilion Conservator"
            pushlist msFoundTypeList 19
        elseif ingump "Desert Ostard" 1312641219 and inlist msCreatureList "Desert Ostard"
            poplist msCreatureList "Desert Ostard"
            pushlist msFoundCreatureList "Desert Ostard"
            pushlist msFoundTypeList 20
        elseif ingump "Forest Ostard" 1312641219 and inlist msCreatureList "Forest Ostard"
            poplist msCreatureList "Forest Ostard"
            pushlist msFoundCreatureList "Forest Ostard"
            pushlist msFoundTypeList 20
        elseif ingump "Frenzied Ostard" 1312641219 and inlist msCreatureList "Frenzied Ostard" and not inlist msJackpotList "Frenzied Ostard"
            poplist msCreatureList "Frenzied Ostard"
            pushlist msFoundCreatureList "Frenzied Ostard"
            pushlist msFoundTypeList 20
        elseif ingump "Flesh Hound" 1312641219 and inlist msCreatureList "Flesh Hound"
            poplist msCreatureList "Flesh Hound"
            pushlist msFoundCreatureList "Flesh Hound"
            pushlist msFoundTypeList 21
        elseif ingump "Shambler" 1312641219 and inlist msCreatureList "Shambler"
            poplist msCreatureList "Shambler"
            pushlist msFoundCreatureList "Shambler"
            pushlist msFoundTypeList 21
        elseif ingump "Abomination" 1312641219 and inlist msCreatureList "Abomination" and not inlist msJackpotList "Abomination"
            poplist msCreatureList "Abomination"
            pushlist msFoundCreatureList "Abomination"
            pushlist msFoundTypeList 21
        elseif ingump "Primordial" 1312641219 and inlist msCreatureList "Primordial"
            poplist msCreatureList "Primordial"
            pushlist msFoundCreatureList "Primordial"
            pushlist msFoundTypeList 22
        elseif ingump "Lizardman" 1312641219 and inlist msCreatureList "Lizardman"
            poplist msCreatureList "Lizardman"
            pushlist msFoundCreatureList "Lizardman"
            pushlist msFoundTypeList 22
        elseif ingump "Wyvern" 1312641219 and inlist msCreatureList "Wyvern" and not inlist msJackpotList "Wyvern"
            poplist msCreatureList "Wyvern"
            pushlist msFoundCreatureList "Wyvern"
            pushlist msFoundTypeList 22
        elseif ingump "Observer" 1312641219 and inlist msCreatureList "Observer"
            poplist msCreatureList "Observer"
            pushlist msFoundCreatureList "Observer"
            pushlist msFoundTypeList 23
        elseif ingump "Overseer" 1312641219 and inlist msCreatureList "Overseer"
            poplist msCreatureList "Overseer"
            pushlist msFoundCreatureList "Overseer"
            pushlist msFoundTypeList 23
        elseif ingump "Molten Idol" 1312641219 and inlist msCreatureList "Molten Idol" and not inlist msJackpotList "Molten Idol"
            poplist msCreatureList "Molten Idol"
            pushlist msFoundCreatureList "Molten Idol"
            pushlist msFoundTypeList 23
        elseif ingump "Garou" 1312641219 and inlist msCreatureList "Garou"
            poplist msCreatureList "Garou"
            pushlist msFoundCreatureList "Garou"
            pushlist msFoundTypeList 24
        elseif ingump "Lycanthrope" 1312641219 and inlist msCreatureList "Lycanthrope"
            poplist msCreatureList "Lycanthrope"
            pushlist msFoundCreatureList "Lycanthrope"
            pushlist msFoundTypeList 24
        elseif ingump "Malform" 1312641219 and inlist msCreatureList "Malform" and not inlist msJackpotList "Malform"
            poplist msCreatureList "Malform"
            pushlist msFoundCreatureList "Malform"
            pushlist msFoundTypeList 24
        elseif ingump "Skeleton" 1312641219 and inlist msCreatureList "Skeleton"
            poplist msCreatureList "Skeleton"
            pushlist msFoundCreatureList "Skeleton"
            pushlist msFoundTypeList 25
        elseif ingump "Skeletal Guardian" 1312641219 and inlist msCreatureList "Skeletal Guardian"
            poplist msCreatureList "Skeletal Guardian"
            pushlist msFoundCreatureList "Skeletal Guardian"
            pushlist msFoundTypeList 25
        elseif ingump "Skeletal Fiend" 1312641219 and inlist msCreatureList "Skeletal Fiend" and not inlist msJackpotList "Skeletal Fiend"
            poplist msCreatureList "Skeletal Fiend"
            pushlist msFoundCreatureList "Skeletal Fiend"
            pushlist msFoundTypeList 25
        elseif ingump "Giant Swamp Slug" 1312641219 and inlist msCreatureList "Giant Swamp Slug"
            poplist msCreatureList "Giant Swamp Slug"
            pushlist msFoundCreatureList "Giant Swamp Slug"
            pushlist msFoundTypeList 26
        elseif ingump "Colossal Swamp Slug" 1312641219 and inlist msCreatureList "Colossal Swamp Slug"
            poplist msCreatureList "Colossal Swamp Slug"
            pushlist msFoundCreatureList "Colossal Swamp Slug"
            pushlist msFoundTypeList 26
        elseif ingump "Corpse Purger" 1312641219 and inlist msCreatureList "Corpse Purger" and not inlist msJackpotList "Corpse Purger"
            poplist msCreatureList "Corpse Purger"
            pushlist msFoundCreatureList "Corpse Purger"
            pushlist msFoundTypeList 26
        elseif ingump "Jaguar" 1312641219 and inlist msCreatureList "Jaguar"
            poplist msCreatureList "Jaguar"
            pushlist msFoundCreatureList "Jaguar"
            pushlist msFoundTypeList 27
        elseif ingump "Creeping Earth" 1312641219 and inlist msCreatureList "Creeping Earth"
            poplist msCreatureList "Creeping Earth"
            pushlist msFoundCreatureList "Creeping Earth"
            pushlist msFoundTypeList 27
        elseif ingump "Temple Guardian" 1312641219 and inlist msCreatureList "Temple Guardian" and not inlist msJackpotList "Temple Guardian"
            poplist msCreatureList "Temple Guardian"
            pushlist msFoundCreatureList "Temple Guardian"
            pushlist msFoundTypeList 27
        elseif ingump "Terathan Drone" 1312641219 and inlist msCreatureList "Terathan Drone"
            poplist msCreatureList "Terathan Drone"
            pushlist msFoundCreatureList "Terathan Drone"
            pushlist msFoundTypeList 28
        elseif ingump "Terathan Warrior" 1312641219 and inlist msCreatureList "Terathan Warrior"
            poplist msCreatureList "Terathan Warrior"
            pushlist msFoundCreatureList "Terathan Warrior"
            pushlist msFoundTypeList 28
        elseif ingump "Terathan Matron" 1312641219 and inlist msCreatureList "Terathan Matron" and not inlist msJackpotList "Terathan Matron"
            poplist msCreatureList "Terathan Matron"
            pushlist msFoundCreatureList "Terathan Matron"
            pushlist msFoundTypeList 28
        elseif ingump "Zombie" 1312641219 and inlist msCreatureList "Zombie"
            poplist msCreatureList "Zombie"
            pushlist msFoundCreatureList "Zombie"
            pushlist msFoundTypeList 29
        elseif ingump "Revenant" 1312641219 and inlist msCreatureList "Revenant"
            poplist msCreatureList "Revenant"
            pushlist msFoundCreatureList "Revenant"
            pushlist msFoundTypeList 29
        elseif ingump "Lich Magus" 1312641219 and inlist msCreatureList "Lich Magus" and not inlist msJackpotList "Lich Magus"
            poplist msCreatureList "Lich Magus"
            pushlist msFoundCreatureList "Lich Magus"
            pushlist msFoundTypeList 29
        elseif ingump "Vampire Bat" 1312641219 and inlist msCreatureList "Vampire Bat"
            poplist msCreatureList "Vampire Bat"
            pushlist msFoundCreatureList "Vampire Bat"
            pushlist msFoundTypeList 30
        elseif ingump "Corpsebride" 1312641219 and inlist msCreatureList "Corpsebride"
            poplist msCreatureList "Corpsebride"
            pushlist msFoundCreatureList "Corpsebride"
            pushlist msFoundTypeList 30
        elseif ingump "Vampire" 1312641219 and not ingump "Vampire Bat" 1312641219 and inlist msCreatureList "Vampire" and not inlist msJackpotList "Vampire"
            poplist msCreatureList "Vampire"
            pushlist msFoundCreatureList "Vampire"
            pushlist msFoundTypeList 30
        else
            //This is not perfect.. if 1 or 2 is rare, and the other is a common or uncommon creature of the jackpot creature group it is assumed pick 3 is a jackpot creature (and we will check out as unknown type match without rerolling), however it also may be a non jackpot creature match
            //Checking for the actual name of a jackpot creature is useless, because the jackpot creature name is always shown in the gump
            if inlist msCreatureList "Otyugh" and inlist msJackpotList "Otyugh" and ingump "Aberration" 1312641219 and ingump "Rare (5x Match Bonus)" 1312641219
                poplist msCreatureList "Otyugh"
                poplist msJackpotList "Otyugh"
                pushlist msFoundCreatureList "Otyugh"
                pushlist msFoundTypeList 1
            elseif inlist msCreatureList "Colossal Poison Dart Frog" and inlist msJackpotList "Colossal Poison Dart Frog" and ingump "Amphibian" 1312641219 and ingump "Rare (5x Match Bonus)" 1312641219
                poplist msCreatureList "Colossal Poison Dart Frog"
                poplist msJackpotList "Colossal Poison Dart Frog"
                pushlist msFoundCreatureList "Colossal Poison Dart Frog"
                pushlist msFoundTypeList 2
            elseif inlist msCreatureList "Colossal Black Widow" and inlist msJackpotList "Colossal Black Widow" and ingump "Arachnid" 1312641219 and ingump "Rare (5x Match Bonus)" 1312641219
                poplist msCreatureList "Colossal Black Widow"
                poplist msJackpotList "Colossal Black Widow"
                pushlist msFoundCreatureList "Colossal Black Widow"
                pushlist msFoundTypeList 3
            elseif inlist msCreatureList "Wildwood Reaper" and inlist msJackpotList "Wildwood Reaper" and ingump "Arboreal" 1312641219 and ingump "Rare (5x Match Bonus)" 1312641219
                poplist msCreatureList "Wildwood Reaper"
                poplist msJackpotList "Wildwood Reaper"
                pushlist msFoundCreatureList "Wildwood Reaper"
                pushlist msFoundTypeList 4
            elseif inlist msCreatureList "Hellhound" and inlist msJackpotList "Hellhound" and ingump "Canine" 1312641219 and ingump "Rare (5x Match Bonus)" 1312641219
                poplist msCreatureList "Hellhound"
                poplist msJackpotList "Hellhound"
                pushlist msFoundCreatureList "Hellhound"
                pushlist msFoundTypeList 5
            elseif inlist msCreatureList "Carrion Beetle" and inlist msJackpotList "Carrion Beetle" and ingump "Carrion" 1312641219 and ingump "Rare (5x Match Bonus)" 1312641219
                poplist msCreatureList "Carrion Beetle"
                poplist msJackpotList "Carrion Beetle"
                pushlist msFoundCreatureList "Carrion Beetle"
                pushlist msFoundTypeList 6
            elseif inlist msCreatureList "Daemon" and inlist msJackpotList "Daemon" and ingump "Daemonic" 1312641219 and ingump "Rare (5x Match Bonus)" 1312641219
                poplist msCreatureList "Daemon"
                poplist msJackpotList "Daemon"
                pushlist msFoundCreatureList "Daemon"
                pushlist msFoundTypeList 7
            elseif inlist msCreatureList "Ratman" and inlist msJackpotList "Ratman" and ingump "Demihuman" 1312641219 and ingump "Rare (5x Match Bonus)" 1312641219
                poplist msCreatureList "Ratman"
                poplist msJackpotList "Ratman"
                pushlist msFoundCreatureList "Ratman"
                pushlist msFoundTypeList 8
            elseif inlist msCreatureList "Dragon" and inlist msJackpotList "Dragon" and ingump "Draconic" 1312641219 and ingump "Rare (5x Match Bonus)" 1312641219
                poplist msCreatureList "Dragon"
                poplist msJackpotList "Dragon"
                pushlist msFoundCreatureList "Dragon"
                pushlist msFoundTypeList 9
            elseif inlist msCreatureList "Living Earth" and inlist msJackpotList "Living Earth" and ingump "Earthen" 1312641219 and ingump "Rare (5x Match Bonus)" 1312641219
                poplist msCreatureList "Living Earth"
                poplist msJackpotList "Living Earth"
                pushlist msFoundCreatureList "Living Earth"
                pushlist msFoundTypeList 10
            elseif inlist msCreatureList "Horse" and inlist msJackpotList "Horse" and ingump "Farmland" 1312641219 and ingump "Rare (5x Match Bonus)" 1312641219
                poplist msCreatureList "Horse"
                poplist msJackpotList "Horse"
                pushlist msFoundCreatureList "Horse"
                pushlist msFoundTypeList 11
            elseif inlist msCreatureList "Fey Spirit Matron" and inlist msJackpotList "Fey Spirit Matron" and ingump "Fey" 1312641219 and ingump "Rare (5x Match Bonus)" 1312641219
                poplist msCreatureList "Fey Spirit Matron"
                poplist msJackpotList "Fey Spirit Matron"
                pushlist msFoundCreatureList "Fey Spirit Matron"
                pushlist msFoundTypeList 12
            elseif inlist msCreatureList "Deathstalk" and inlist msJackpotList "Deathstalk" and ingump "Flora" 1312641219 and ingump "Rare (5x Match Bonus)" 1312641219
                poplist msCreatureList "Deathstalk"
                poplist msJackpotList "Deathstalk"
                pushlist msFoundCreatureList "Deathstalk"
                pushlist msFoundTypeList 13
            elseif inlist msCreatureList "Shadowguard" and inlist msJackpotList "Shadowguard" and ingump "Ghostly" 1312641219 and ingump "Rare (5x Match Bonus)" 1312641219
                poplist msCreatureList "Shadowguard"
                poplist msJackpotList "Shadowguard"
                pushlist msFoundCreatureList "Shadowguard"
                pushlist msFoundTypeList 14
            elseif inlist msCreatureList "Sand Crawler" and inlist msJackpotList "Sand Crawler" and ingump "Insectoid" 1312641219 and ingump "Rare (5x Match Bonus)" 1312641219
                poplist msCreatureList "Sand Crawler"
                poplist msJackpotList "Sand Crawler"
                pushlist msFoundCreatureList "Sand Crawler"
                pushlist msFoundTypeList 15
            elseif inlist msCreatureList "Minotaur Runesmith" and inlist msJackpotList "Minotaur Runesmith" and ingump "Minotaur" 1312641219 and ingump "Rare (5x Match Bonus)" 1312641219
                poplist msCreatureList "Minotaur Runesmith"
                poplist msJackpotList "Minotaur Runesmith"
                pushlist msFoundCreatureList "Minotaur Runesmith"
                pushlist msFoundTypeList 16
            elseif inlist msCreatureList "Ettin" and inlist msJackpotList "Ettin" and ingump "Ogroid" 1312641219 and ingump "Rare (5x Match Bonus)" 1312641219
                poplist msCreatureList "Ettin"
                poplist msJackpotList "Ettin"
                pushlist msFoundCreatureList "Ettin"
                pushlist msFoundTypeList 17
            elseif inlist msCreatureList "Ophidian Matron" and inlist msJackpotList "Ophidian Matron" and ingump "Ophidian" 1312641219 and ingump "Rare (5x Match Bonus)" 1312641219
                poplist msCreatureList "Ophidian Matron"
                poplist msJackpotList "Ophidian Matron"
                pushlist msFoundCreatureList "Ophidian Matron"
                pushlist msFoundTypeList 18
            elseif inlist msCreatureList "Opilion Conservator" and inlist msJackpotList "Opilion Conservator" and ingump "Opilion" 1312641219 and ingump "Rare (5x Match Bonus)" 1312641219
                poplist msCreatureList "Opilion Conservator"
                poplist msJackpotList "Opilion Conservator"
                pushlist msFoundCreatureList "Opilion Conservator"
                pushlist msFoundTypeList 19
            elseif inlist msCreatureList "Frenzied Ostard" and inlist msJackpotList "Frenzied Ostard" and ingump "Ostard" 1312641219 and ingump "Rare (5x Match Bonus)" 1312641219
                poplist msCreatureList "Frenzied Ostard"
                poplist msJackpotList "Frenzied Ostard"
                pushlist msFoundCreatureList "Frenzied Ostard"
                pushlist msFoundTypeList 20
            elseif inlist msCreatureList "Abomination" and inlist msJackpotList "Abomination" and ingump "Reanimated" 1312641219 and ingump "Rare (5x Match Bonus)" 1312641219
                poplist msCreatureList "Abomination"
                poplist msJackpotList "Abomination"
                pushlist msFoundCreatureList "Abomination"
                pushlist msFoundTypeList 21
            elseif inlist msCreatureList "Wyvern" and inlist msJackpotList "Wyvern" and ingump "Reptilian" 1312641219 and ingump "Rare (5x Match Bonus)" 1312641219
                poplist msCreatureList "Wyvern"
                poplist msJackpotList "Wyvern"
                pushlist msFoundCreatureList "Wyvern"
                pushlist msFoundTypeList 22
            elseif inlist msCreatureList "Molten Idol" and inlist msJackpotList "Molten Idol" and ingump "Sentinel" 1312641219 and ingump "Rare (5x Match Bonus)" 1312641219
                poplist msCreatureList "Molten Idol"
                poplist msJackpotList "Molten Idol"
                pushlist msFoundCreatureList "Molten Idol"
                pushlist msFoundTypeList 23
            elseif inlist msCreatureList "Malform" and inlist msJackpotList "Malform" and ingump "Shapeshifter" 1312641219 and ingump "Rare (5x Match Bonus)" 1312641219
                poplist msCreatureList "Malform"
                poplist msJackpotList "Malform"
                pushlist msFoundCreatureList "Malform"
                pushlist msFoundTypeList 24
            elseif inlist msCreatureList "Skeletal Fiend" and inlist msJackpotList "Skeletal Fiend" and ingump "Skeletal" 1312641219 and ingump "Rare (5x Match Bonus)" 1312641219
                poplist msCreatureList "Skeletal Fiend"
                poplist msJackpotList "Skeletal Fiend"
                pushlist msFoundCreatureList "Skeletal Fiend"
                pushlist msFoundTypeList 25
            elseif inlist msCreatureList "Corpse Purger" and inlist msJackpotList "Corpse Purger" and ingump "Spitter" 1312641219 and ingump "Rare (5x Match Bonus)" 1312641219
                poplist msCreatureList "Corpse Purger"
                poplist msJackpotList "Corpse Purger"
                pushlist msFoundCreatureList "Corpse Purger"
                pushlist msFoundTypeList 26
            elseif inlist msCreatureList "Temple Guardian" and inlist msJackpotList "Temple Guardian" and ingump "Stealther" 1312641219 and ingump "Rare (5x Match Bonus)" 1312641219
                poplist msCreatureList "Temple Guardian"
                poplist msJackpotList "Temple Guardian"
                pushlist msFoundCreatureList "Temple Guardian"
                pushlist msFoundTypeList 27
            elseif inlist msCreatureList "Terathan Matron" and inlist msJackpotList "Terathan Matron" and ingump "Terathan" 1312641219 and ingump "Rare (5x Match Bonus)" 1312641219
                poplist msCreatureList "Terathan Matron"
                poplist msJackpotList "Terathan Matron"
                pushlist msFoundCreatureList "Terathan Matron"
                pushlist msFoundTypeList 28
            elseif inlist msCreatureList "Lich Magus" and inlist msJackpotList "Lich Magus" and ingump "Unliving" 1312641219 and ingump "Rare (5x Match Bonus)" 1312641219
                poplist msCreatureList "Lich Magus"
                poplist msJackpotList "Lich Magus"
                pushlist msFoundCreatureList "Lich Magus"
                pushlist msFoundTypeList 29
            elseif inlist msCreatureList "Vampire" and inlist msJackpotList "Vampire" and ingump "Vampiric" 1312641219 and ingump "Rare (5x Match Bonus)" 1312641219
                poplist msCreatureList "Vampire"
                poplist msJackpotList "Vampire"
                pushlist msFoundCreatureList "Vampire"
                pushlist msFoundTypeList 30

            //Correct potential mismatches (Wolf, Daemon, Dragon, Minotaur, Vampire)
            elseif ingump "Wolf" 1312641219 and ingump "Common (1x Match Bonus)" 1312641219 and inlist msCreatureList "Wolf" and msTypeMatch > 0
                poplist msCreatureList "Wolf"
                pushlist msFoundCreatureList "Wolf"
                pushlist msFoundTypeList 5
            elseif ingump "Daemon" 1312641219 and ingump "Rare (5x Match Bonus)" 1312641219 and inlist msCreatureList "Daemon" and msTypeMatch > 0
                poplist msCreatureList "Daemon"
                pushlist msFoundCreatureList "Daemon"
                pushlist msFoundTypeList 7
            elseif ingump "Dragon" 1312641219 and ingump "Rare (5x Match Bonus)" 1312641219 and inlist msCreatureList "Dragon" and msTypeMatch > 0
                poplist msCreatureList "Dragon"
                pushlist msFoundCreatureList "Dragon"
                pushlist msFoundTypeList 9
            elseif ingump "Minotaur" 1312641219 and ingump "Common (1x Match Bonus)" 1312641219 and inlist msCreatureList "Minotaur" and msTypeMatch > 0
                poplist msCreatureList "Minotaur"
                pushlist msFoundCreatureList "Minotaur"
                pushlist msFoundTypeList 16
            elseif ingump "Vampire" 1312641219 and ingump "Rare (5x Match Bonus)" 1312641219 and inlist msCreatureList "Vampire" and msTypeMatch > 0
                poplist msCreatureList "Vampire"
                pushlist msFoundCreatureList "Vampire"
                pushlist msFoundTypeList 30
            endif
        endif

        //Check jackpot creature gump position
        if 0 = index and list msJackpotList = 0
            setvar! msJackpotFound 2
        elseif 1 = index and list msJackpotList = 0 and msJackpotFound != 2
            setvar! msJackpotFound 3
        elseif 2 = index and list msJackpotList = 0 and msJackpotFound != 2 and msJackpotFound != 3
            setvar! msJackpotFound 4
        endif

        //Check for creature type match
        if list msFoundTypeList > 0
            if poplist msFoundTypeList front as localCreatureType
                if 0 = index
                    setvar! msType_1 localCreatureType
                elseif 1 = index
                    setvar! msType_2 localCreatureType
                elseif 2 = index
                    setvar! msType_3 localCreatureType
                endif
            endif
        endif
        if msType_1 > 0 and msType_2 > 0 and msType_3 > 0 and msType_1 = msType_2 and msType_2 = msType_3
            setvar! msTypeMatch 123
        elseif msType_1 > 0 and msType_2 > 0 and msType_1 = msType_2
            setvar! msTypeMatch 12
        elseif msType_1 > 0 and msType_3 > 0 and msType_1 = msType_3
            setvar! msTypeMatch 13
        elseif msType_2 > 0 and msType_3 > 0 and msType_2 = msType_3
            setvar! msTypeMatch 23
        endif

        //Check outcome
        if 1 = index and list msFoundCreatureList = 1
            //Creature pair 1 & 2 -> Reroll 3 next run if it does not match
            if msDebugMode > 0
                sysmsg "[ MATCH FOUND 1&2 ]" 100
            endif
            if list msJackpotList = 0
                if msDebugMode > 0
                    sysmsg "[ JACKPOT PAIR ]" 100
                endif
                setvar! msCreatureMatch 2
            else
                setvar! msCreatureMatch 1
            endif
            setvar! msTypeMatch 12
            setvar! msType_2 msType_1
        elseif 2 = index and list msFoundCreatureList = 1
            //Creature pair 1 & 2 & 3 -> Checkout
            if msDebugMode > 0
                sysmsg "[ MATCH FOUND 1&2&3 ]" 100
            endif
            pushlist msResponseList 2
            pushlist msResponseList 3
            pushlist msResponseList 4
        elseif 2 = index and list msFoundCreatureList = 2
            if msCreatureMatch > 0
                if msCreatureMatch = 1 and msTypeMatch = 123
                    if msDebugMode > 0
                        sysmsg "[ TYPE MATCH 3 ]" 100
                    endif
                    //Creature pair 1 & 2 (not jackpot), type match with 3 -> Checkout without rerolling
                    pushlist msResponseList 2
                    pushlist msResponseList 3
                    pushlist msResponseList 4
                else
                    //Creature pair 1 & 2, reroll 3
                    pushlist msResponseList 2
                    pushlist msResponseList 3
                endif
            elseif list msJackpotList = 0
                //Unknown creature pair -> Check for jackpot creature
                if msDebugMode > 0
                    overhead "[ JACKPOT PAIR SUSPECTED ]" 33
                    overhead "[ SAFETY BREAK ]" 33
                    sysmsg "[ JACKPOT PAIR SUSPECTED ]" 33
                    sysmsg "[ SAFETY BREAK ]" 33
                endif
                pushlist msResponseList 0
            else
                //Unknown creature pair -> Checkout without rerolling
                if msDebugMode > 0
                    sysmsg "[ UNKNOWN PAIR ]" 100
                    sysmsg "[ KEEPING ALL ]" 100
                endif
                pushlist msResponseList 2
                pushlist msResponseList 3
                pushlist msResponseList 4
            endif
        elseif 2 = index and msTypeMatch > 0
            if msTypeMatch = 123
                if msDebugMode > 0
                    sysmsg "[ GROUP FOUND 1&2&3 ]" 100
                endif
                if list msJackpotList = 0
                    if msDebugMode > 0
                        overhead "[ TYPE MATCH WITH JACKPOT ]" 33
                        overhead "[ SAFETY BREAK ]" 33 
                        sysmsg "[ TYPE MATCH WITH JACKPOT ]" 33
                        sysmsg "[ SAFETY BREAK ]" 33
                    endif
                    pushlist msResponseList 0
                endif
                //Checkout without rerolling
                pushlist msResponseList 2
                pushlist msResponseList 3
                pushlist msResponseList 4
            elseif list msJackpotList = 0
                if msDebugMode > 0
                    sysmsg "[ TYPE MATCH WITH JACKPOT ]" 100
                    sysmsg "[ KEEPING JACKPOT ]" 100
                endif
            elseif msTypeMatch = 12
                //Type pair 1 & 2 -> Reroll 3
                if msDebugMode > 0
                    sysmsg "[ GROUP FOUND 1&2 ]" 100
                endif
                pushlist msResponseList 2
                pushlist msResponseList 3
            elseif msTypeMatch = 13
                //Type pair 1 & 3 -> Reroll 2
                if msDebugMode > 0
                    sysmsg "[ GROUP FOUND 1&3 ]" 100
                endif
                pushlist msResponseList 2
                pushlist msResponseList 4
            elseif msTypeMatch = 23
                //Type pair 2 & 3 -> Reroll 1
                if msDebugMode > 0
                    sysmsg "[ GROUP FOUND 2&3 ]" 100
                endif
                pushlist msResponseList 3
                pushlist msResponseList 4
            else
                //Unknown type pair -> Checkout
                if msDebugMode > 0
                    sysmsg "[ UNKNOWN TYPE PAIR ]" 100
                    sysmsg "[ KEEPING ALL ]" 100
                endif
                pushlist msResponseList 2
                pushlist msResponseList 3
                pushlist msResponseList 4
            endif
        endif

        //Always keep a jackpot creature
        if msJackpotFound > 0 and not inlist msResponseList msJackpotFound
            pushlist msResponseList msJackpotFound front
        endif

        //Runspeed management
        if 0 = index
            while not insysmsg "You must finish your current roll before playing again." and find localKeg ground -1 -1 2 and not insysmsg! "You are out of funds."
                gumpresponse 6 msGumpID
                waitforgump msGumpID 20000
            endwhile
            wait globalWaitForServerResponse
        elseif 1 = index
            while timer globalObjectDelayTimer < globalWaitForObjectDelay
            endwhile
            dclick localKeg
            settimer globalObjectDelayTimer 0
            settimer globalSafetyTimer 0
            waitforgump msGumpID 20000
            wait globalWaitForServerResponse
        endif

    endfor

    if not gumpexists msGumpID or not find localKeg ground -1 -1 2 or insysmsg! "You are out of funds."
        break
    endif

    if msDebugMode > 0
        foreach localCreature in msFoundCreatureList
            if 2 < index
                break
            endif
            sysmsg "... {{index}}: {{localCreature}}" 100
            if list msFoundCreatureList = 1
                sysmsg "... 2: {{localCreature}}" 100
                sysmsg "... 3: {{localCreature}}" 100
                break
            elseif 1 = index and list msFoundCreatureList = 2
                sysmsg "... 3: unknown" 100
                break
            endif
        endfor
        sysmsg "... 1st set: {{msDebugTimer}} ms" 100
        if msAutoResolve > 0
            wait msShowResultDuration
        endif
    endif
    
    if msAutoResolve > 0
        if list msResponseList > 0
            while timer globalSafetyTimer < 2000
                //wait until 2 s auto gump refresh is done, or we may lose some already executed selections
            endwhile
            getlabel backpack waitForPing
            foreach localGumpButton in msResponseList
                if 0 = localGumpButton
                    overhead "·· PLAYER NEEDED! ÁÁ" 2760
                    overhead "·· SCRIPT STOPPED ÁÁ" 2760
                    sysmsg "·· PLAYER NEEDED! ÁÁ" 2760
                    sysmsg "·· SCRIPT STOPPED ÁÁ" 2760
                    stop
                endif
                gumpresponse localGumpButton msGumpID
                waitforgump msGumpID globalWaitForServerResponse
            endfor
            if list msResponseList > 0 and not ingump "Keep" 1312641219
                //Auto gump refresh hit us hard
                overhead "¶¶ GUMP ERROR ÀÀ" 1680
                overhead "¶¶ SCRIPT STOPPED ÀÀ" 1680
                sysmsg "¶¶ GUMP ERROR ÀÀ" 1680
                sysmsg "¶¶ SCRIPT STOPPED ÀÀ" 1680
            endif
        endif
        gumpresponse 5 msGumpID
        waitforgump msGumpID globalWaitForServerResponse
        dclick localKeg
        settimer globalObjectDelayTimer 0
        waitforgump msGumpID 20000
    else
        overhead "[Press -RESOLVE- to Continue]" 90
        sysmsg "[Manual Mode: Awaiting RESOLVE Press]" 90
    endif
    clearlist msResponseList

    //Wait for game to finish
    settimer globalSafetyTimer 1000
    while find localKeg ground -1 -1 2 and not ingump "Roll!" 1312641219
        if msAutoResolve > 0 and timer globalSafetyTimer > 1000
            gumpresponse 5 msGumpID
            waitforgump msGumpID globalWaitForServerResponse
            while timer globalObjectDelayTimer < globalWaitForObjectDelay
            endwhile
            dclick localKeg
            settimer globalObjectDelayTimer 0
            settimer globalSafetyTimer 0
        elseif msAutoResolve = 0 and not ingump "Resolve" 1312641219
            while timer globalObjectDelayTimer < globalWaitForObjectDelay
            endwhile
            dclick localKeg
            settimer globalObjectDelayTimer 0
        endif
        waitforgump msGumpID globalWaitForServerResponse
    endwhile

    if ingump "You have won" 1312641219
        overhead "ÆÆ YOU HAVE WON! ÆÆ" 2884
        if msDebugMode > 0
            sysmsg "... Game won: {{msDebugTimer}} ms" 2884
        endif
    else
        overhead "ÈÈ NO MATCHES ÈÈ" 52
        if msDebugMode > 0
            sysmsg "... Game lost: {{msDebugTimer}} ms" 50
        endif
    endif

    //User defined wait between rolls
    wait msShowResultDuration

endwhile

if not findtype 3711 ground -1 -1 2
    overhead "¶¶ NO GAME FOUND ÀÀ" 1680
    sysmsg "¶¶ NO GAME FOUND ÀÀ" 1680
elseif insysmsg "You are out of funds."
    if msAutoAddFunds > 0
        overhead "¶¶ ADDING GOLD ÀÀ" 52
        sysmsg "¶¶ ADDING GOLD ÀÀ" 52
        gumpresponse 7 msGumpID
        waitforgump msGumpID globalWaitForServerResponse
        replay
    else
        overhead "¶¶ NO GOLD ÀÀ" 1680
        sysmsg "¶¶ NO GOLD ÀÀ" 1680
    endif
endif

overhead "¶¶ SCRIPT STOPPED ÀÀ" 1680
sysmsg "¶¶ SCRIPT STOPPED ÀÀ" 1680