# This is an automated backup - check out https://outlands.uorazorscripts.com/script/9f1cc61f-05e1-41e5-ab78-41ee4edd9cdb for latest
# Automation by Jaseowns
## Script: ADARIAN SAFEHOUSE BAN BOT - *TOP SECRET*
## Created by: throatslip#0
#############################################

// CLASSIFIED ANDARIAN SAFEHOUSE BAN BOT - *TOP SECRET*
// Andaria faction strongholds only - Automatic enemy faction ban
// House friends auto-whitelisted - owner controlled access

// ANDARIAN FACTION SWITCHES
// 0 = Skip faction - allow access - 1 = Ban faction - enemy
@setvar! "CambriaFlag" 1      
@setvar! "PrevaliaFlag" 1     
@setvar! "TerranFlag" 1      

//'‚ƒ…‡ˆ“’‘éÞéWARNING: NO FURTHER CHANGES REQUIREDéÞé‘’“ˆ‡…ƒ‚‚ƒ…‡ˆ“’‘éÞéMODIFICATION RISKS BREAKING SCRIPT!éÞé‘’“ˆ‡…ƒVƒ\‚ƒ…‡ˆ“’‘éÞéANDARIA MUST NOT FALL!éÞé‘’“ˆ‡…ƒ‚‚ƒ…‡ˆ“’‘éÞéVƒ\‚ƒ…‡ˆ“’‘éÞéVƒ\‚ƒ…‡ˆ“’‘éÞéVƒ\‚ƒ…‡ˆ“’‘éÞéVƒ\‚ƒ…‡ˆ“’‘éÞéVƒ\‚ƒ…‡ˆ“’‘éÞé'

// Friend auto-whitelist slots
@setvar! "FRIEND1" "NONE"  
@setvar! "FRIEND2" "NONE"  
@setvar! "FRIEND3" "NONE"  

setvar "PREVSAFE" "NONE"   

while not dead
  
  // Skip if client skill cooldown active
  if timerexists "skill" or timerexists "skill timer"
    pause 1000
    loop
      if not timerexists "skill" and not timerexists "skill timer"
        break
      endif
      pause 500
    endloop
  endif

  // Stay hidden
  if not hidden
    useskill "Hiding"
    waitfortarget 3000
    target "self"
    pause 1500
  endif

  // Scan targets
  unsetvar "lastserial"
  @hotkey "Next Player Target"
  pause 500
  @setvar! "lastserial" lasttarget
  
  if not insysmsg "No one matching that was found"
    
    // Whitelist check first
    if "FRIEND1" == name lastserial or "FRIEND2" == name lastserial or "FRIEND3" == name lastserial
      overhead name lastserial " FRIEND PASS #1" 88
    else
      // Test house friend status
      hotkey "Cancel Current Target"
      say "i ban thee"
      pause 300
      target "lastserial"
      pause 1500
      
      if insysmsg "You cannot eject a friend of the house!"
        if "FRIEND1" == "NONE"
          @setvar! "FRIEND1" name lastserial
        elseif "FRIEND2" == "NONE"
          @setvar! "FRIEND2" name lastserial
        elseif "FRIEND3" == "NONE"
          @setvar! "FRIEND3" name lastserial
        else
          @setvar! "FRIEND1" name lastserial
        endif
        overhead name lastserial " HOUSE FRIEND WHITELISTED" 88
      else
        // Faction + traitor checks
        if "FRIEND1" == name lastserial or "FRIEND2" == name lastserial or "FRIEND3" == name lastserial
          overhead name lastserial " FRIEND PASS #3" 88
        else
          hotkey "Cancel Current Target"
          
          if noto "lastserial" = innocent or "Andaria" in name lastserial or "Andarian" in name lastserial
            setvar "PREVSAFE" name lastserial
            overhead "Andaria/Green safe" 77
          else
            if CambriaFlag == 1 and "Cambria" in name lastserial
              say name lastserial " Cambria traitor!"
            elseif PrevaliaFlag == 1 and "Prevalia" in name lastserial
              say name lastserial " Prevalia traitor!"  
            elseif TerranFlag == 1 and "Terran" in name lastserial
              say name lastserial " Terran traitor!"
            elseif PREVSAFE != "NONE" and PREVSAFE == name lastserial
              say name lastserial " went hostile!"
            endif
            
            say "i ban thee"
            pause 300
            target "lastserial"
          endif
        endif
      endif
    endif
    
    if not hidden
      useskill "Hiding"
      waitfortarget 3000
      target "self"
    endif
  endif
endwhile