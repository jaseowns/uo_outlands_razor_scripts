# This is an automated backup - check out https://outlands.uorazorscripts.com/script/d2b1a53a-0572-4cbf-bfab-f470effbe517 for latest
# Automation by Jaseowns
## Script: Bapeths Dungeon Recycler
## Created by: BAZZACUNT#9523
#############################################

//Bapeths Dungeon Recycler

//This script will ID your pack, consume essence, and drop recycle mats at your feet

//REQUIRED IN BAG "container identification wand" and "tinker tools"

if findtype "7864" backpack as btool
    dclick btool
    waitforgump 949095101 500
    if not ingump "Recycle All Magical"
        gumpresponse 2
        waitforgump 949095101 500
        replay
    else 
        if findtype "20495" backpack as bwand
            dclick bwand
            wft 1000
            target backpack
            hotkey 'Cancel Current Target'
        else 
            overhead "I need a wand for this..." 38
            gumpclose 949095101
            stop
        endif
        gumpresponse 3
        wft 500
        target self
        hotkey 'Cancel Current Target'
        waitforgump 949095101 500
        pause 350
        if ingump "No recyclable items were found"
            overhead "Nothing to break down..." 45
            gumpclose 949095101
            while findtype "12686" backpack as barcane
                dclick barcane
                wft 1000
                target self
                while queued
                    pause 600
                endwhile
                hotkey 'Cancel Current Target'
            endwhile
            while findtype 4225|7127|7154 backpack as trash
                lift trash 60000
                droprelloc -0 -0
                while queued
                    pause 600
                endwhile
            endwhile
            for 4
                if findtype 3827 backpack as scroll
                    getlabel scroll desc
                    if "Arcane" in desc
                        ignore scroll
                    endif
                    if "blank" in desc
                        lift scroll 60000
                        droprelloc  -0 -0
                        pause 600
                        break
                    endif
                endif
            endfor
            stop
        endif
        overhead "Breaking this down will lighten my load..." 69
        gumpclose 949095101
        while findtype "12686" backpack as barcane
            dclick barcane
            wft 1000
            target self
            while queued
                pause 600
            endwhile
            hotkey 'Cancel Current Target'
        endwhile
        while findtype 4225|7127|7154 backpack as trash
            lift trash 60000
            droprelloc -0 -0
            while queued
                pause 600
            endwhile
        endwhile
        if findtype 3827 backpack 0 as scroll
            lift scroll 60000
            droprelloc  -0 -0
            pause 600
            stop
        endif
    endif
else 
    overhead "I dont have tinker tools..." 38
    stop
endif
loop