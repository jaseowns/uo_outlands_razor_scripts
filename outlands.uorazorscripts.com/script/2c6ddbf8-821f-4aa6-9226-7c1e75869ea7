# This is an automated backup - check out https://outlands.uorazorscripts.com/script/2c6ddbf8-821f-4aa6-9226-7c1e75869ea7 for latest
# Automation by Jaseowns
## Script: Flu AFK Tamer to 120
## Created by: flutschi#0
#############################################

# frog 'a colossal frog'
# bear 'a cave bear'
# scarab 'a scarab'

clearignore 

#>info the tank, insert its ID
@setvar! tank 0x3A617D
@setvar! myNextPet 0
@setvar! healCD 5500
@setvar! lureDist 12
@setvar! lowHP 70

warmode off

if dead 
    stop
endif

if findtype "a cave bear" ground -1 -1 lureDist as tAnimal
    # overhead 'found new pet' 6 tAnimal
    @setvar! tameThisThing tAnimal
    pause 500
else
    # overhead 'not finding anything to tame..'
    hotkey 'Cancel current target'
    pause 500
endif

if find tank ground -1 -1 12
    if not cooldown 'heal'
        if findtype 3617 backpack
            dclicktype 3617 backpack
            waitfortarget 
            pause 500
            target tank
            pause 500
            if insysmsg 'being is not damaged'
                cooldown 'heal' healCD
            else
                cooldown 'heal' healCD
            endif
        endif
    endif
else
    overhead 'no tank..'
endif

if hp < lowHP
    say 'all guard me'
    pause 1500
    if poisoned
        cast 'Cure'
        waitfortarget 
        pause 500
        target 'self'
        pause 500
    else
        if skill 'magery' > 40 and hp < lowHP
            cast 'Greater Heal'
            waitfortarget 
            pause 500
            target 'self'
            pause 500
        endif
    endif
    replay
endif


if followers > 4
    overhead 'too many followers, play with the settings'
    pause 1000
endif


if find tameThisThing ground -1 -1 12
    

    if noto tameThisThing = friend 
        while noto tameThisThing = friend 
            overhead 'already tamed, killing it..'
            hotkey 'all kill'
            waitfortarget 
            target tameThisThing
            pause 2000
        endwhile
        replay
    endif

    clearsysmsg 
    
    if not timerexists 'tamingTimer'
        createtimer 'tamingTimer'
        settimer 'tamingTimer' 11000
    endif
    if timer 'tamingTimer' > 11000
        overhead 'taming Target..'
    
        if not find tameThisThing ground -1 -1 3
            #this is to lure it closer..
            say 'all kill'
            pause 500
            target tameThisThing
            pause 500
        endif
        
        say 'all follow me'
        pause 1000
        while not targetexists
            useskill 'Taming'
            pause 1000
        endwhile
        pause 500
        target tameThisThing
        pause 500
        settimer 'tamingTimer' 0
    endif   
    
    if insysmsg 'fail to'
        settimer 'tamingTimer' 12000
    endif
else
    overhead 'waiting for respawn..'
    pause 4000
endif

@unsetvar! tameThisThing

replay