# This is an automated backup - check out https://outlands.uorazorscripts.com/script/e3907358-a657-4944-a3ea-436a8bc181c8 for latest
# Automation by Jaseowns
## Script: Recover Potion Bottles
## Created by: thisideasucks#0
#############################################

@setvar! redRefresh 0
@setvar! whiteStrength 0
@setvar! blueDexterity 0
@setvar! blackMagicResist 1
@setvar! orangeCure 0
@setvar! yellowHeal 0
@setvar! greenPoison 0
@setvar! globalTimeout 600

if not dead
    if diffhits > 40
        while poisoned
            if findtype "Orange Potion" self
                wait globalTimeout            
                overhead 'Drinking cure!' 48
                potion "cure" 
                wait globalTimeout      
            elseif not findtype "Orange Potion" self and findtype "storage shelf" ground -1 -1 2 as myShelf
                menu myShelf 1
                wait 200
            elseif not findtype "Orange Potion" self
                overhead "Can't cure poison!!" 34
                overhead "Probly gonna die!!" 34
            endif
        endwhile

        if findtype 3852 self as healingPotion
            getlabel healingPotion healingPotionLabel
            if 'next usable' in healingPotionLabel
                sysmsg 'Unable to use Heal Potion Yet!' 33
            elseif not findtype 3852 self and findtype "storage shelf" ground -1 -1 2 as myShelf
                menu myShelf 1
                wait 200
            else
                overhead 'Drinking heal!' 68  
                dclick healingPotion
                wait globalTimeout
            endif
        endif
    endif

    if yellowHeal = 1
        if findtype 3852 self as healingPotion
            getlabel healingPotion healingPotionLabel
            if 'next usable' in healingPotionLabel
                sysmsg 'Unable to use Heal Potion Yet!' 33          
            else
                overhead 'Drinking heal!' 68
                dclick healingPotion
                wait globalTimeout
            endif
        endif 
    endif

    if redRefresh = 1
        if findtype "Red Potion" backpack as redPotion
            dclick redPotion
            wait 200
        else
            overhead "No Refresh Pots" 34
        endif
    endif

    if whiteStrength = 1
        if findtype "White Potion" backpack as whitePotion
            dclick whitePotion
            wait 200
        else
            overhead "No Strength Pots" 34
        endif
    endif

    if blueDexterity = 1
        if findtype "Blue Potion" backpack as bluePotion
            dclick bluePotion
            wait 200
        else
            overhead "No Dex Pots" 34
        endif
    endif

    if blackMagicResist = 1
        if findtype "Black Potion" backpack as blackPotion
            dclick blackPotion
            wait 200
        else
            overhead "No Resist Pots" 34
        endif
    endif

    if greenPoison = 1
        if findtype "Green Potion" backpack as greenPotion
            dclick greenPotion
            wait 200
        else
            overhead "No Poison Pots" 34
        endif
    endif
pause 1000
endif
loop