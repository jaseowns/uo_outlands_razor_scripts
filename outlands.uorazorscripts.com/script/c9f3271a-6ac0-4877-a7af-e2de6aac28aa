# This is an automated backup - check out https://outlands.uorazorscripts.com/script/c9f3271a-6ac0-4877-a7af-e2de6aac28aa for latest
# Automation by Jaseowns
## Script: Kings Faire 2024
## Created by: surpz#0
#############################################

@setvar! pingDelay 500
@setvar! retryDelay 2000

clearlist npcList
createlist npcList

#Ladder Golf
pushlist npcList 0x1413A
#Bell Striker
pushlist npcList 0x14119
#Dunk Tank
pushlist npcList 0x1412F
#Axe Toss
pushlist npcList 0x14117
#Log Rolling
pushlist npcList 0x1414E
#Pylon Gladiator
pushlist npcList 0x14148
#Drinking Contest
pushlist npcList 0x14128


while not dead
    foreach npc in npcList

        #look for each npc in list and open gump
        if find npc ground -1 -1 6 as npcFound
            overhead "¼ NPC Found ¼" 30 npc
            menu npcFound 1
            waitforgump 2258988405 1000
            wait pingDelay
        
            #if 0 plays remaining
            if ingump "have 0 plays remaining" 2258988405
                overhead "Done with this game for today."
            
            #some plays remaining, click Play Event
            else
                gumpresponse 2 2258988405
                wait pingDelay
                if insysmsg "You are already participating in an event currently"
                    wait retryDelay
                elseif insysmsg "You are too far away to participate in this event"
                    overhead 'Move Closer to NPC.'
                elseif insysmsg "You join the queue to participate"
                    overhead "Entered Queue!"
                elseif insysmsg "You are already queued"
                    overhead "Already Queued."
                elseif insysmsg "You have played this event"
                    overhead "Done with this game for today."
                elseif insysmsg "You do not have enough tickets in your bank box to participate in this event"
                    overhead "We need to go buy tickets!" 30
                endif
            endif
        endif
        
    endfor
    wait retryDelay
    
endwhile