# This is an automated backup - check out https://outlands.uorazorscripts.com/script/e3907358-a657-4944-a3ea-436a8bc181c8 for latest
# Automation by Jaseowns
## Script: Recover Potion Bottles
## Created by: thisideasucks#0
#############################################

// What to consume to recover bottles from
@setvar! redRefresh 1
@setvar! whiteStrength 1
@setvar! blueDexterity 1
@setvar! blackMagicResist 1
@setvar! orangeCure 0
@setvar! yellowHeal 0
@setvar! greenPoison 0

// Timeouts and wait times - May need to adjust for latency
@setvar! globalTimeout 150
@setvar! shelfWait 250
@setvar! potionWait 0

if not dead
    if hp < 50
        while poisoned
            if findtype "Orange Potion" self
                overhead 'Drinking cure!' 50
                potion "cure"
                wait globalTimeout
            elseif findtype "storage shelf" ground -1 -1 2 as myShelf
                menu myShelf 1
                wait shelfWait
            endif
            if not findtype "Orange Potion" self
                overhead "Can't cure poison!!" 34
                overhead "Probly gonna die!!" 34
                stop
            endif
        endwhile

        if findtype 3852 self
        elseif findtype "storage shelf" ground -1 -1 2 as myShelf
            menu myShelf 1
            wait shelfWait
        endif
        if findtype 3852 self as healingPotion
            getlabel healingPotion healingPotionLabel
            if 'next usable' in healingPotionLabel
                sysmsg "Can't Use Healing Yet" 34
            else
                overhead 'Drinking heal!' 50
                dclick healingPotion
                wait globalTimeout
            endif
        else
            overhead "Can't find healing potions" 34
        endif
    endif

    if yellowHeal = 1
        if findtype 3852 self as healingPotion
            getlabel healingPotion healingPotionLabel
            if 'next usable' in healingPotionLabel
                sysmsg 'Unable to use Heal Potion Yet!' 34     
            else
                overhead 'Drinking heal!' 50
                dclick healingPotion
                wait potionWait
            endif
        endif 
    endif

    if redRefresh = 1
        if findtype "Red Potion" backpack as redPotion
            dclick redPotion
            wait potionWait
        else
            overhead "No Refresh Pots" 34
        endif
    endif

    if whiteStrength = 1
        if findtype "White Potion" backpack as whitePotion
            dclick whitePotion
            wait potionWait
        else
            overhead "No Strength Pots" 34
        endif
    endif

    if blueDexterity = 1
        if findtype "Blue Potion" backpack as bluePotion
            dclick bluePotion
            wait potionWait
        else
            overhead "No Dex Pots" 34
        endif
    endif

    if blackMagicResist = 1
        if findtype "Black Potion" backpack as blackPotion
            dclick blackPotion
            wait potionWait
        else
            overhead "No Resist Pots" 34
        endif
    endif

    if greenPoison = 1
        if findtype "Green Potion" backpack as greenPotion
            dclick greenPotion
            wait potionWait
        else
            overhead "No Poison Pots" 34
        endif
    endif
endif
loop