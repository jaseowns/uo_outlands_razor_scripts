# This is an automated backup - check out https://outlands.uorazorscripts.com/script/804caa88-aa2c-4125-87f1-e7002a4676bb for latest
# Automation by Jaseowns
## Script: Magery One Button Hotkey
## Created by: jolanar#0
#############################################

#Wizard Grimoire
@setvar! castArrow 1
@setvar! castHarm 1
@setvar! castFireball 1
@setvar! castLightning 1

#Potions
@setvar! useHealthPotion 1
@setvar! useCurePotion 1
@setvar! useStrengthPotion 1
@setvar! useDexterityPotion 1
@setvar! useResistPotion 1
@setvar! Panacea 1
@setvar! useExplosion 1
@setvar! cdExplosionPvE 15000
    
#Misc
@setvar! castLeyline 1
@setvar! cdLeyline 5000
@setvar! useTaunt 1

if useCurePotion = 1 and poisoned
    if findtype "Orange Potion" backpack as pot
        dclick pot
    endif
endif

if Panacea = 1 and findbuff 'Disease' and not cooldown Panacea
    if findtype "Orange Potion" backpack as pot
        dclick pot
    endif
endif

if Panacea = 1 and findbuff 'Bleed' and not cooldown Panacea
    if findtype "Orange Potion" backpack as pot
        dclick pot
    endif
endif

if useHealthPotion = 1 and diffhits > 30
    if findtype "Yellow Potion" backpack as pot
        dclick pot
    endif
endif

if diffhits > 50
    hotkey 'Play Script: Smarter Heal'
endif

if not findbuff "Reactive Armor" and mana >= 5
    cast "Reactive Armor"
endif

if useTaunt = 1 and not cooldown Taunt
    say '[taunt'
    wft
    target lasttarget
endif

if useStrengthPotion = 1 and not findbuff 'Strength'
    if findtype "White Potion" backpack as pot
        dclick pot
    endif
endif

if useDexterityPotion = 1 and not findbuff 'Agility'
    if findtype "Blue Potion" backpack as pot
        dclick pot
    endif
endif

if useHealthPotion = 1 and not findbuff 'Magic Resist Potion'
    if findtype "Black Potion" backpack as pot
        dclick pot
    endif
endif

#You will need an ingame cooldown called Leyline for this to work.
if diffmana > 30 and not cooldown Leyline and castLeyline = 1
    say '[weaponability2'
    cooldown Leyline cdLeyline
endif

if not findbuff 'Food Satisfaction'
    if findtype tray backpack as food
        dclick food
    endif
endif


#If you have a target witin 12 tiles, this will use an explosion potion on last target.
#You will need an ingame cooldown called ExplosionPvE for this to work.
#WARNING: There is no way to check for Line of Sight. If you are out of LOS this will explode on you.
#WARNING: Explosion potions run the risk of exploding on blue characters and may turn you grey.
if find lasttarget ground -1 -1 12
    if skill 'Alchemy' > 79 and not cooldown 'ExplosionPvE' and useExplosion = 1 and findtype '3853' > 0
        if findtype "Purple Potion" backpack as pot
            dclick pot
        endif
    wft
    lasttarget
    cooldown ExplosionPvE cdExplosionPvE
    endif
endif


#Damage spells begin here:
if mana >= 64
    cast 'Flamestrike'
    stop
endif

if castArrow = 1 and mana >= 5 and not findbuff 'Magic Arrow Cooldown'
    cast 'magic arrow'
    stop
endif

if castHarm = 1 and mana >= 9 and not findbuff 'Harm Cooldown'
    cast 'harm'
    stop
endif
           
if castFireball = 1 and mana >= 12 and not findbuff 'Fireball Cooldown'
    cast 'fireball'
    stop
endif

if castLightning = 1 and mana >= 12 and not findbuff 'Lightning Cooldown'
    cast 'Lightning'
    stop                   
endif

if mana < 40 and not findbuff 'Magic Mushroom Cooldown'
    hotkey 'Eat Magic Mushroom'
endif


if mana >= 40
    cast 'Flamestrike'
    stop
endif

cast 'Mind Blast'