# This is an automated backup - check out https://outlands.uorazorscripts.com/script/156be202-0920-4cf0-a2d6-a2ba04da4f0b for latest
# Automation by Jaseowns
## Script: Lord Glacier's Chill BACKSTABBER AUTO PILOT - UO OUTLANDS RAZOR SCRIPT - v1.0.0
## Created by: danstock._98439#0
#############################################

/////////
////////                                          Lord Glaciers Chill STEALTH BACKSTABBER AUTO PILOT - UO OUTLANDS RAZOR SCRIPT version 1.0.0
///////
//////                                                  UO Outlands Razor script - Released Feb 17, 2026
/////                                                     Compiled by DanStock. (aka. Lord Glacier)
////
///





                                                   ###############################                     ###############################
                                                  //  SUGGESTED SKILL TEMPLATE:  \\                   //      INVENTORY ITEMS:       \\
                                                 ###################################                 ###################################

                                                    #      120  Stealth                                  Thieves Codex
                                                    #      100  Tactics (120 Camping w/ codex)           Weapon Codex (Macing or Archery)
                                                    #      100  Snooping (120 Item ID w/ codex)          2 handed Aspect weapon **
                                                    #      100  Hiding                                   1 handed Aspect weapon **
                                                    #      100  Stealing                                 Aspect platemail armour
                                                    #   80-100  Mace Fighting **                         Smoke Bombs
                                                    #   80-100  Tracking *                               Magical Wizards hat
                                                    #                                                    Potion Satchel (w/ potions)
                                                    #   ASPECT: SHADOW armour                            Trapped pouches
                                                    #           SHADOW weapon                            Adventurers rope
                                                    #                                                    Item ID wand *
                                                    #   CHAIN: Backstab Damage                           Crafting tool (for recycle) *
                                                    #          Damage above 66%                          Delectable food trays *
                                                    #          Slayer links                              Skinning knife *
                                                    #                                                    Aspect crystals *
                                                    #   * or Forensic or Alchemy                         Wooden Box w/ copper key *
                                                    #  ** or Archery (but keep Tactics)
                                                    #                                                     * Optional items
                                                    #                                                    ** Magic weapons (if using Item ID)

                                                 ##################################                  ##################################
                                                  ################################                    ################################
                                                   ##############################                      ##############################





    ///////////////////////
    //    CHANGE LOG:    //
    ///////////////////////

    #       Feb 19 2026 - version 1.0.0:  Public script release



    /////////////////
    //    TIPS:    //
    /////////////////

    //    Disclaimer:  I AM NOT AN EXPERT!  I have only played Outlands for just over 2 years now (with 90% of the first year spent harvesting - main PVM account is only at 16 links)
    //    This is also the first and only MMO I have played since I last logged out of my OSI accounts on Great Lakes shard back in 2003.
    //    So take any of my advice with that in mind - I am still a noob.  If you have 30+ links and millions of gold, there is probably a better way to do things, but this works for me at my stage!
    //    I have zero prior experience scripting and I have made these primarily for my own benefit!!  I am learning as I go...
    //    Mostly, I make these scripts in order to play on my Asus ROG Ally handheld - but I have come to enjoy the challenge of making them work for as many builds as possible.
    //    I do not really use Discord (I only installed it to join Outlands - then discovered I had an older account already).  Lots of people message me there, but I rarely check it (sorry).
    //    That being said, I do my best to fix reported bugs (dan@danstockman.com) but usually do not have time to respond to requests for custom stuff (but appreciate any ideas, for sure!)
    //    Since I do not personally use all aspects of the script (and do all my editing in Notepad on my PC at work lol) some bugs take longer for me to find - but I am always adjusting and updating!  Thanks for being patient!
    //    If you see me out in Avadon, my apologies if I dont respond (its a pain to type on the ROG Ally), but to do enjoy hearing that people use my scripts.  Appreciate the support!  GOOD LUCK OUT THERE :)


#     This script does it all for a STEALTH BACKSTABBER! If you are familiar with any of my other Auto Pilot scripts, this one should be pretty self-explanatory!
#     You will automatically be hidden (when in PEACE MODE) and MOBs will be targeted once stealth is active and backstabbed when in range (and in WAR MODE)
#     Automatic Stealthing MUST BE ENABLED in game (toggle with '[AutoStealth' command or verify under  HELP-> Commands-> Mechanics -> [AutoStealth  Setting should = Enabled)
#     Stealth steps MUST BE DISPLAYED AS SYSTEM MESSAGE in game (toggle with '[ShowStealthSteps' command or verify under HELP -> Commands -> Text Displays -> [ShowStealthSteps  Setting should = Display System Message)
#     In order to still see your stealth steps overhead, you can turn on 'Count stealth steps' in Razor under Options -> Additional Options.  Then check 'overhead' and format as desired
#     As usual, you will find my personal skill template above.  I am very new to backstabbing, so it may not be exactly meta, but it is fun for me so far!
#     Definitely recommend putting your first 6 points in your THIEVES CODEX into 'Shadow Hands' (and then drop snooping skill for something like item ID, Camping, Forensic, Arms Lore or Alchemy)
#     Then putting your next 6 points into 'Ruffian' in order to drop tactics skill for something to further buff your damage (must keep Tactics if using Archery skill)
#     From there I put my next points into 'Ransack' for the damage increase and 'Without a Trace' for quicker cooldowns on Smoke Bombs - do your own research!
#     I would also highly recommend BACKSTAB DAMAGE chain links, DAMAGE ABOVE 66% chain links and SLAYER chain links to maximize your damage output and ideally hit the 10k hp cap in all scenarios
#     Again, I am totally new to this build myself, but I cannot imagine using anything but SHADOW ASPECT on this character.  Start leveling this ASAP
#     Script currently supports MACING or ARCHERY weapons only!  Weapons will be automatically equipped (prioritizes Aspected weapons and ignores unidentified magic)  More support may be added in the future!
#     Once MOB is within Attack Range (set below) and stealth is active, a BACKSTAB attempt will be made when WAR MODE is toggled (TAB TO STAB!)
#     Target indicators are BLUE when target is acquired, YELLOW when outside attack range, ORANGE when in attack range but stealth is on cooldown or GREEN when MOB is in attack range and hiding is available
#     Backstab attempts will still be made during ORANGE targeting mode, if WAR MODE is toggled, but you may choose to wait until targeting is GREEN if you want to be able to hide right away
#     You can use the 'EnableInstantHide' below to delay backstab attacks until all cooldowns are zeroed, so that Hiding skill will be immediately available
#     After your backstab attempt, if enabled below, a second hit attempt will immediately be made with a one handed weapon (MACING or ARCHERY only)
#     Prior to the second hit attempt, if enabled and available, WEAPON CODEX ABILITIES will be activated
#     Second hit attempt with fast weapon will be ignored if VANISH ASPECT EFFECT is activated upon backstab or if targeted MOB is dead
#     If VANISH ASPECT EFFECT is activated upon backstab and targeted MOB is still alive, another backstab will be initiated immediately (triggered if MOB is within attack range)
#     If enabled below and 'magical wizard hat' is found in inventory, it will be used to keep your stamina below max while stealth is active (will equip and remove when stam = max)
#     The 'magical wizard hat' can be purchased from mage NPCs and is able to be [blessed] with a clothing bless deed (or else they are 40gp to replace)
#     Keeping stamina below your max while stealthing will prevent accidentally walking through MOBs or other players and revealing yourself!  Very helpful
#     This script HAS TWO REQUIRED COOLDOWNS YOU NEED TO ADD IN UO CLIENT ('Hiding' and 'Stealth').  Information and instructions below.
#     There are also some optional cooldowns you can add to keep track of weapon ability timers, smoke bomb cooldowns, healing potions, etc.  They are NOT required for script function
#     You also have the option (below) to HIDE/SMOKE BOMB immediately after backstab attempt.  Script will first attempt to HIDE.  If hiding fails and available, SMOKE BOMB will be used
#     If current targeted MOB is still alive after backstab and smoke bomb, another backstab attempt will be made immediately (if target is still within attack range)
#     While NOT HIDDEN and in WAR MODE, script will buff, heal and cure with potions (set below), use bandages (if healing skill) and skin corpses (if enabled and skinning knife available)
#     You can choose to use POTION KEGS (set your potion amounts below) and inventory amounts will be automatically maintained based on amounts below
#     As soon as PEACE MODE is toggled (while not hidden) an attempt to HIDE will be made.  If hiding fails, WAR MODE will be re-toggled.  Break line of site and try again!
#     If enabled below, when PEACE MODE is toggled and HIDE is not possible due to MOB aggro, a SMOKE BOMB will be used (if in inventory and not on cooldown)
#     Cooldown for SMOKE BOMB is set automatically based on your Thieves Codex 'WITHOUT A TRACE' level (set below) - if left at '0' will default to 2 mins
#     Weapon Codex Stances can be set below.  Recommend using 'WILD SWING' for macing or 'LONG SHOT' for archery.  Script will automatically reset stance if found to be incorrect
#     If enabled and WOODEN BOX and matching COPPER KEY are found in inventory, loot will be automatically moved and secured (make sure key is not inside box and well hidden)
#     Loot storage will be triggered while HIDING is on cooldown and script is waiting for STEALTH to activate to not interfere with targeting, attacking or evading
#     My standard UTILITY options are also available below (gold, arrow and/or resource vacuums, skinning, eating food, overhead message toggles, etc.)
#     Also the script will AUTOMATICALLY IDENTIFY AND RECYCLE MAGIC ITEMS if enabled below!  Requires any crafting tool in inventory and a container ID wand (if ITEM ID SKILL < 120)
#     Recycling of junk magic items is triggered based on weight differential (set below).  When weight trigger is reached, items will be identified and then recycled (if junk)
#     You can then optionally choose to consume the Arcane Essence immediately and/or drop resources on the ground (lumber, ingots, blank scrolls, etc.)
#     Combining the magic item recycler with camping skill carry weight increase and Strongbox 1 & 2 perks makes this template a great dungeon farming character who can sneak around PKs and hide in a corner when AFK
#     It is a slow template to start until you build up your Thieves Codex and Aspect levels, but it really seems to escalate quickly!
#     I intentionally did NOT include AUTO RECALL options in this script.  I also did not include DUNGEON ESCAPE MODES.  Hiding and stealthing away covers most situations
#     However, this script pairs very well with my other QOL scripts such as the Dungeon Escape n Gate or Ultimate Home Recall scripts you can find in my profile!  Just set hotkeys for each

#     I think this covers the basics:  WAR MODE FOR VISIBLE AND PEACE MODE FOR HIDDEN THEN TAB TO STAB - Follow the overhead prompts and hopefully the script is self explanatory...
    
    //     I am VERY NEW TO PLAYING A BACKSTABBER so this script will likely evolve over time - definitely let me know if there are things that are missing!  Check back for updates
    //     At the time of releasing this script, I am only tier 7 Shadow Aspect and have just 17 points in my Thieves Codex - so I am BRAND NEW to this build and still learning as I go
    //     As usual, if there is any bugs, questions, concerns or suggestions the best way to reach me is by email:  dan@danstockman.com




     ##########################################
    ###    COOLDOWNS TO ADD IN UO CLIENT:    ###
    ###          (case sensitive!)           ###
     ##########################################

     
        // REQUIRED (IMPT!):
            # Hiding
                // Overhead Triggers:  "You have hidden yourself well" and "You fail to hide" w/ 10 second cooldown
            # Stealth
                // Sysmsg Triggers:  "You begin to move quietly" and "You feel ready to continue stealthing" w/ 10 second cooldown

                    
        // OPTIONAL:
            # Smoke Bomb
            # Weapon Ability
            # Healing Potion
            # Cleansing Brew
            
        // OPTIONAL (ALCHEMY ONLY): 
            # Purple Potion
            # Panacea Potion

        // OPTIONAL (MACING ONLY):
            # Pummel Ability
            # Stun Ability
            # Smash Ability

        // OPTIONAL (ARCHERY ONLY):
            # Skirmish Ability
            # Full Draw AbilitY
            # Repeater Ability


            

                            ###########################################################################################################################
                            #  MOST FEATURES ARE TURNED 'OFF' BY DEFAULT! PLEASE CHECK THE 'VARIABLES' SECTION BELOW CAREFULLY DURING INITIAL SETUP!  #
                            ###########################################################################################################################




#############################################
#######        USER VARIABLES:        #######
#############################################


///////////////////
//   BACKSTAB:   //
///////////////////

@setvar! TargetAttackRange 1
    # Backstab attempt will be made when in WAR MODE and target is within attack range and stealth is active (TAB TO STAB!)
    # Leave this at default value of '1' if using Macing 
    # Increase range only if using Archery (Max '8' tiles - or up to '12' with Longshot stance in Codex)

@setvar! EnableWeaponCheck 0
    # Requires two handed weapon (Macing or Archery supported)
    # Checks hands for main (two handed) weapon and will equip if found in backpack
    # Prioritizes aspected weapons and ignores unidentified magic items

@setvar! EnableWizardHatStealthTrick 0
    # Requires 'a magical wizards hat' in inventory
    # Will automatically equip and unequip wizard hat as needed to keep stamina below maximum while stealthing
    # This prevents accidentally walking through MOBs or other players and revealing yourself 
    # Can be purchased from mage NPC for 40gp and is able to be [blessed] with a clothing bless deed

@setvar! EnableInstantHide 0
    # If enabled, ATTACKS WILL BE DELAYED until cooldowns are cleared to make sure hiding is available (if MOB is one-shotted)
    # Immediately after backstab, if target MOB has been killed, you will be hidden
    # To hide instantly, set 'LootDelayTimer' to '0' (below) - this will keep you from catching aggro from other MOBs but leaves no time for looting
    # To counter this, you can add a small delay (ex. set 'LootDelayTimer' to '500' or '1000'), but too much may cause your hide to fail!
    # If disabled, you will still hide instantly after a kill if cooldowns allow (you just need to manually time your backstabs)
    
@setvar! EnableFastSecondHit 0
    # If target MOB is NOT one-shotted, an additional hit can be attempted with a fast weapon
    # Requires one handed weapon (Macing or Archery supported)
    # Will equip a one handed weapon immediately after backstab for a quick second hit
    # Prioritizes aspected weapons and ignores unidentified magic items
    # Will trigger WEAPON ABILITIES before hitting, if enabled and available (set below)
    # Will ignore fast second hit attempt if VANISH ASPECT EFFECT is activated upon backstab or target MOB is dead 
    # If VANISH ASPECT EFFECT is activated and Target is sill alive, another backstab will be attempted immediately

@setvar! EnableSmokeBombDoubleTap 0
    # Requires Smoke Bombs in inventory
    # Immediately after backstab, if target MOB is still alive, a Smoke Bomb will be used (if not on cooldown)
    # Another backstab attempt will be made immediately
    # If both Hiding and Smoke Bombs are unavailable, WAR MODE will be toggled for VISIBLE MODE
    # Break Line of Sight and toggle PEACE MODE to immediately hide and restart script

@setvar! LootDelayTimer 1500
    # This is the delay timer after target MOB is killed to allow a window for looting
    # Setting this at '0' will make looting nearly impossible, but makes instant hiding more safe
    # Increase this slightly if skinning or if you are having trouble grabbing loot in time 

@setvar! EnableSmokeBombWhenAggro 0
    # Requires Smoke Bombs in inventory
    # If attempt to HIDE is made but not possible due to MOB aggro, and if not on cooldown and available, script will use SMOKE BOMB
    # This will immediately put you into stealth mode and makes TAB TO STAB available to activate when target MOB is within attack range

@setvar! WithoutaTraceLevel 0
    # Adjusts your Smoke Bomb cooldown automatically based on your THIEVES CODEX settings
    # Can be set to '0', '1', '2' or '3' based on your 'Without a Trace' tier level in Thieves Codex
        # '0' for '120 second Smoke Bomb cooldown'
        # '1' for '100 second Smoke Bomb cooldown'
        # '2' for '80 second Smoke Bomb cooldown'
        # '3' for '60 second Smoke Bomb cooldown'


/////////////////////////
//    WEAPON CODEX:    //
/////////////////////////

@setvar! EnableWeaponCodexHotbar 0
    # Will automatically display your Codex Hotbar gump

@setvar! EnableWeaponStances 0
    @setvar! SetWeaponStance 0
        # Requires Macing or Archery codex stances unlocked
        # Can be set to '0', '1', '2', '3', '4' or '5':
            # '0' for 'Disabled'
            # '1' for 'Aggressive Stance' or 'Arcane Stance'
            # '2' for 'Defensive Stance' or 'Fowling Stance'
            # '3' for 'Cleave Stance' or 'Incendiary Stance'
            # '4' for 'Wildswing Stance' or 'Longshot Stance'
            # '5' for 'Sunder Stance' or 'Maiming Stance'

@setvar! EnableWeaponAbilities 0
    @setvar! SetWeaponAbility 0
    # Variable 'EnableFastSecondHit' above must be enabled for weapon abilities to be used
        # Requires Macing or Archery codex Weapon Ability unlocked
        # Will be activated prior to second hit attempts (if enabled above)
        # Can be set to '0', '1', '2' or '3':
            # '0' for 'Disabled'
            # '1' for 'Pummel Ability' or 'Skirmish Ability'
            # '2' for 'Stun Ability' or 'Full Draw Ability'
            # '3' for 'Smash Ability' or 'Repeater Ability'

            @setvar! WeaponAbilityCooldown 60000
                # Adjust Weapon Ability cooldown time if using Arms Lore skill


//////////////////
//   POTIONS:   //
//////////////////

    // Potions will be used automatically when in WAR MODE and VISIBLE //

    @setvar! EnableHealPotion 1
    @setvar! EnableCurePotion 1
    @setvar! EnableRefreshPotion 0

        @setvar! HealPotionHPdiff 30
        @setvar! RefreshPotionSPdiff 50
            # Adjust HP diff set points for Heal and Refresh potion
            # Cure pots will be used as needed (if enabled)


        @setvar! EnableCleansingBrews 0
            # Requires Cleansing Brews in inventory
            # Will automatically consume Cleansing Brew if Bleeding or Diseased and not on cooldown 
        @setvar! EnablePanaceaPotion 0
            # Requires Alchemy skill 80+, Cure Potions in inventory and Potion Codex Panacea buff unlocked
            # Will automatically consume Cure Potion if Bleeding or Diseased and not on cooldown 
        

        @setvar! EnableStrengthPotion 0
        @setvar! EnableAgilityPotion 0
        @setvar! EnableMagicResistPotion 0
            # Strength, Agility and Resist potions will auto-buff when effects wear off (if enabled)


        @setvar! EnableExplosionPotion 0
            # Requires Alchemy skill 80+ and Purple Potions in inventory
            # If target MOB is still alive after backstab, an explosion potion will be stuck to the target
            @setvar! PurplePotionCooldown 15000
                # Adjusts your Explosion Potion cooldown
                
            
            @setvar! EnableUsePotionKegs 0
                # Will auto fill empty bottles from potion kegs if inventory counts drop below your set amounts
                # Requires empty bottles and kegs of each type in inventory (pack extra empty bottles for explosion pots)
                # Pack extra empty bottles if using Explosion Potions!

            # Set your potion amounts (if using kegs):
                @setvar! HealingPotionAmount 5
                @setvar! CurePotionAmount 5
                @setvar! RefreshPotionAmount 5
                @setvar! StrengthPotionAmount 1
                @setvar! AgilityPotionAmount 1
                @setvar! ResistPotionAmount 1
                @setvar! PoisonPotionAmount 0
                @setvar! ExplosionPotionAmount 0


//////////////////////////
//       UTILITY:       //
//////////////////////////

@setvar! EnableOverheadMessages 1
    # Overhead messages can be turned off (minimal indicators will remain)

@setvar! EnableAutoParalyzePouch 1
    # Requires trapped pouches in inventory
    # Will automatically pop trapped pouches if paralyzed

@setvar! EnableAutoCarving 0
    # Requires skinning knife in inventory
    # Will automatically carve nearby corpses (while not hidden)
    # You may need to adjust 'LootDelayTimer' above while skinning

@setvar! EnableEatingFood 0
    # Requires delectable food trays in inventory
    # Will automatically eat delectable food trays when not buffed

@setvar! EnableAutoSatchels 0
    # Will automatically move potions and/or reagents in backpack to corresponding satchels

@setvar! EnableGoldVacuum 0
    # Will automatically pickup discarded gold nearby (within 2 tiles)
    # WARNING: This can hinder you with weight issues if you are not careful!

@setvar! EnableDungeonCleanup 0
    # Will automatically pickup discarded regs, ingots, boards, etc. (within 2 tiles)

@setvar! EnableArrowCleanup 0
    # Requires Archery skill 50+
    # Will automatically pickup arrows and/or bolts from the ground (within 2 tiles)

@setvar! EnableArcheryWarningMessage 0
    @setvar! ArcheryLowAmmoWarningAmount 10
        # Requires Archery skill 50+
        # Overhead warning (independent of other Overhead Messages) for low archery ammunition

@setvar! EnableDropGoldWhenOverweight 0
    # Will drop set amount of gold when overweight until no longer impeded
    @setvar! DropGoldAmount 500
        # Set gold amount to drop (will drop this amount repeatedly until below max weight)

@setvar! EnablePutLootinLockBox 0
    # Requires WOODEN BOX and matching COPPER KEY in inventory
    # Loot will be automatically moved into lockbox and secured during hiding cooldown (while waiting for stealth)
    # Key cannot be inside the lockbox and should be well hidden in your pack
    # Being hidden most of the time, having a hidden grab item bag and using a lockbox makes you basically thief-proof

@setvar! EnableWeightWarningMessage 1
    @setvar! GreenWarningDiffWeight 50
    @setvar! YellowWarningDiffWeight 25
    @setvar! RedWeightLimitDiffWeight 10
        # Weight limit will drop gold (if overweight and enabled above) and/or stop script
        # Recommend using my 'Dungeon Escape n Gate' script to then exit dungeons safely

@setvar! EnableIDandRecycleMagicItems 0
    # Requires 120 Item ID skill (or container ID wand) and a crafting tool in your inventory
    # Uses crafting tool to Recycle junk magic items after identification
    # Top tier items will not be recycled! 
    # Combining this with Camping skill for increased carry weight makes this build a farming machine!
    @setvar! IDandRecycleWeightdiff 20
        # Item identification and junk recycling is initiated when weight diff trigger is reached
        
        @setvar! EnableAutoConsumeArcaneEssence 0
            # Will automatically consume any Arcane Essence created from recycling
        @setvar! DropResourcesAfterRecycle 0
            # Will automatically drop resources from recycling onto ground (boards, ingots, leather, blank scrolls, etc.)


//////////////////////////
//     PK TRACKING:     //
//////////////////////////

@setvar! EnablePKRadar 0
    # Requires Tracking skill 80+
    # Uses tracking to detect nearby PKs automatically
    # Will Hide or use Smoke Bomb, if available, when Red is tracked
    @setvar! EnableRedAlertOverhead 1
        # Controls the Red Alert overhead message (displayed when PK is tracked)
        # I highly recommend setting up a RAZOR OVERHEAD MESSAGE instead of using the script one:
            // This will display PK name/distance overhead when tracked!
            // Add overhead message w/ a trigger of "Now tracking" and message "[ RED ALERT: {3} ]"  (hue 335)
            // Then a second with a trigger of "Distance to destination" and message "[ {4} TILES AWAY! ]"  (hue 253)
            // Once complete you should disable "EnableRedAlertOverhead" above

    // I decided NOT to included Auto Recall in this script due to 99% of backstabbing being done in dungeons and while hidden
    // If Tracking skill available, Hiding skill and/or Smoke Bombs will be used to evade tracked Reds instead (is PK Radar is on)
    // Highly recommend using my 'Home Recall' or 'Dungeon Escape n Gate' scripts to supplement this one!


/////////////////////////
//     DEATH LOOP:     //
/////////////////////////
    
@setvar! EnableDeathLoop 1
    # Script will detect if you die and enters an optional DEATH LOOP (otherwise script ends upon death)
    # While in death loop, dungeon gates will be marked with overhead arrows and automatically activated when within 2 tiles 
    # You will be gated to your last moongated town
    # Script will automatically resurrect you when close enough to a HEALER

    @setvar! EnableHideAfterResurrection 0
        # Will immediately hide after being resurrected
        
    @setvar! EnableDressAfterResurrection 0
        # Will automatically dress after being resurrected 
        # Must have a Razor 'Dress List' named 'UltimateBackstabber' for all your [blessed] wearables

        
        // Script ends after death loop completion.  Check out my other scripts for inventory reset, home recall or other QOL support scripts! //
    
    
/////////////////////////
//  END OF VARIABLES!  //
/////////////////////////






################  EDIT BELOW THIS LINE AT YOUR OWN RISK!  #####  EDIT BELOW THIS LINE AT YOUR OWN RISK!  #####  EDIT BELOW THIS LINE AT YOUR OWN RISK!  #####  EDIT BELOW THIS LINE AT YOUR OWN RISK!  ################






#############################################
#########    SCRIPT STARTS HERE:    #########
#############################################

if not timerexists TargetTimer
    createtimer TargetTimer
    settimer TargetTimer 4500
endif

if not timerexists HidingOverheadTimer
    createtimer HidingOverheadTimer
    settimer HidingOverheadTimer 4500
endif

if not timerexists WarModeOverheadTimer
    createtimer WarModeOverheadTimer
    settimer WarModeOverheadTimer 3500
endif

if not timerexists DungeonCleanup
    createtimer DungeonCleanup
    settimer DungeonCleanup 4500
endif

if not timerexists GoldRadar
    createtimer GoldRadar
    settimer GoldRadar 4500
endif

if not timerexists pouchMessageTimer
    createtimer pouchMessageTimer
    settimer pouchMessageTimer 4500
endif

if not timerexists aidsMessageTimer
    createtimer aidsMessageTimer
    settimer aidsMessageTimer 4500
endif

if not timerexists blackMessageTimer
    createtimer blackMessageTimer
    settimer blackMessageTimer 4500
endif

if not timerexists blueMessageTimer
    createtimer blueMessageTimer
    settimer blueMessageTimer 4500
endif

if not timerexists whiteMessageTimer
    createtimer whiteMessageTimer
    settimer whiteMessageTimer 4500
endif

if not timerexists redMessageTimer
    createtimer redMessageTimer
    settimer redMessageTimer 4500
endif

if not timerexists orangeMessageTimer
    createtimer orangeMessageTimer
    settimer orangeMessageTimer 4500
endif

if not timerexists yellowMessageTimer
    createtimer yellowMessageTimer
    settimer yellowMessageTimer 4500
endif

if not timerexists overweightMessageTimer
    createtimer overweightMessageTimer
    settimer overweightMessageTimer 4500
endif

if not timerexists SkinningTimer
    createtimer SkinningTimer
    settimer SkinningTimer 4500
endif

if not timerexists WorldSaveTimer
    createtimer WorldSaveTimer
    settimer WorldSaveTimer 4500
endif

if not timerexists HealPotionTimer
    createtimer HealPotionTimer
    settimer HealPotionTimer 4500
endif

if not timerexists PotionKegTimer
    createtimer PotionKegTimer
    settimer PotionKegTimer 4500
endif

if not timerexists LOStimer
    createtimer LOStimer
    settimer LOStimer 2500
endif

if not timerexists NoTargetTimer
    createtimer NoTargetTimer
    settimer NoTargetTimer 4500
endif

if not timerexists FindTarget
    createtimer FindTarget
    settimer FindTarget 2000
endif

if not timerexists StabDistanceTimer
    createtimer StabDistanceTimer
    settimer StabDistanceTimer 2500
endif

if not timerexists HEALERSEARCH
    createtimer HEALERSEARCH
    settimer HEALERSEARCH 2500
endif

if not timerexists StealthCooldownTimer
    createtimer StealthCooldownTimer
    settimer StealthCooldownTimer 2500
endif

if not timerexists HidingCooldownTimer
    createtimer HidingCooldownTimer
    settimer HidingCooldownTimer 2500
endif

if not timerexists CheckTargetTimer
    createtimer CheckTargetTimer
    settimer CheckTargetTimer 5000
endif

if not timerexists PotionKegPVPCooldown
    createtimer PotionKegPVPCooldown
    settimer PotionKegPVPCooldown 30000
endif

if not timerexists WeaponAbilityTimer
    createtimer WeaponAbilityTimer
    settimer WeaponAbilityTimer 60000
endif

if not timerexists LootTimer
    createtimer LootTimer
    settimer LootTimer 5000
endif

if not timerexists WeightTimer
    createtimer WeightTimer
    settimer WeightTimer 5000
endif

if not timerexists STORELOOT
    createtimer STORELOOT
    settimer STORELOOT 5000
endif

if not timerexists LootCooldownTimer
    createtimer LootCooldownTimer
    settimer LootCooldownTimer 10000
endif

if not timerexists VisibilityTimer
    createtimer VisibilityTimer
    settimer VisibilityTimer 2500
endif

if not timerexists WaitingForStealthTimer
    createtimer WaitingForStealthTimer
    settimer WaitingForStealthTimer 2500
endif

if not timerexists KeepOnTruckingTimer
    createtimer KeepOnTruckingTimer
    settimer KeepOnTruckingTimer 4000
endif

if not timerexists DoNotMoveTimer
    createtimer DoNotMoveTimer
    settimer DoNotMoveTimer 500
endif

if not timerexists CooldownOverheadTimer
    createtimer CooldownOverheadTimer
    settimer CooldownOverheadTimer 3500
endif

if not timerexists FindTargetTimer
    createtimer FindTargetTimer
    settimer FindTargetTimer 1000
endif

if not timerexists BoltCleanupRadar
    createtimer BoltCleanupRadar
    settimer BoltCleanupRadar 3500
endif

if not timerexists ArrowCleanupRadar
    createtimer ArrowCleanupRadar
    settimer ArrowCleanupRadar 3500
endif

if not timerexists ArrowCleanupTimer
    createtimer ArrowCleanupTimer
    settimer ArrowCleanupTimer 3500
endif

if not timerexists QuiverTimer
    createtimer QuiverTimer
    settimer QuiverTimer 30000
endif

if not timerexists AmmunitionTimer
    createtimer AmmunitionTimer
    settimer AmmunitionTimer 6000
endif

if not timerexists PotionSatchelTimer
    createtimer PotionSatchelTimer
    settimer PotionSatchelTimer 60000
endif

if not timerexists WizardSatchelTimer
    createtimer WizardSatchelTimer
    settimer WizardSatchelTimer 60000
endif

if not timerexists RecyclingJunkTimer
    createtimer RecyclingJunkTimer
    settimer RecyclingJunkTimer 3500
endif

if not timerexists GATEHERE
    createtimer GATEHERE
    settimer GATEHERE 3500
endif

if not timerexists PurplePotionTimer
    createtimer PurplePotionTimer
    settimer PurplePotionTimer PurplePotionCooldown
endif

if not timerexists purpleMessageTimer
    createtimer purpleMessageTimer
    settimer purpleMessageTimer 15000
endif

if not timerexists aidsMessageTimer
    createtimer aidsMessageTimer
    settimer aidsMessageTimer 5000
endif

if not timerexists MagicRecyclerCooldown
    createtimer MagicRecyclerCooldown
    settimer MagicRecyclerCooldown 300000
endif

if not timerexists NoWeaponOverheadTimer
    createtimer NoWeaponOverheadTimer
    settimer NoWeaponOverheadTimer 5000
endif

if not timerexists CleansingBrewOverhead 
    createtimer CleansingBrewOverhead
    settimer CleansingBrewOverhead 15000
endif

if not timerexists CleansingBrewTimer
    createtimer CleansingBrewTimer
    settimer CleansingBrewTimer 120000
endif

if not timerexists PanaceaOverheadTimer
    createtimer PanaceaOverheadTimer
    settimer PanaceaOverheadTimer 15000
endif

if targetexists
    hotkey 'Cancel Current Target'
endif

clearsysmsg
clearignore
@setvar! CurrentTarget 0

if WithoutaTraceLevel = 0
    @setvar! SmokeBombCooldown 120000
elseif WithoutaTraceLevel = 1
    @setvar! SmokeBombCooldown 100000
elseif WithoutaTraceLevel = 2
    @setvar! SmokeBombCooldown 80000
elseif WithoutaTraceLevel = 3
    @setvar! SmokeBombCooldown 60000
endif

if EnableWeaponAbilities = 1
    if SetWeaponAbility = 0
        if skill 'Mace Fighting' > 50
            @setvar! UsePummelAbility 0
            @setvar! UseStunAbility 0
            @setvar! UseSmashAbility 0
        elseif skill 'Archery' > 50
            @setvar! UseSkirmishAbility 0
            @setvar! UseFullDrawAbility 0
            @setvar! UseRepeaterAbility 0
        endif
    elseif SetWeaponAbility = 1
        if skill 'Mace Fighting' > 50
            @setvar! UsePummelAbility 1
            @setvar! UseStunAbility 0
            @setvar! UseSmashAbility 0
        elseif skill 'Archery' > 50
            @setvar! UseSkirmishAbility 1
            @setvar! UseFullDrawAbility 0
            @setvar! UseRepeaterAbility 0
        endif
    elseif SetWeaponAbility = 2
        if skill 'Mace Fighting' > 50
            @setvar! UsePummelAbility 0
            @setvar! UseStunAbility 1
            @setvar! UseSmashAbility 0
        elseif skill 'Archery' > 50
            @setvar! UseSkirmishAbility 0
            @setvar! UseFullDrawAbility 1
            @setvar! UseRepeaterAbility 0
        endif
    elseif SetWeaponAbility = 3
        if skill 'Mace Fighting' > 50
            @setvar! UsePummelAbility 0
            @setvar! UseStunAbility 0
            @setvar! UseSmashAbility 1
        elseif skill 'Archery' > 50
            @setvar! UseSkirmishAbility 0
            @setvar! UseFullDrawAbility 0
            @setvar! UseRepeaterAbility 1
        endif
    else
        if skill 'Mace Fighting' > 50
            @setvar! UsePummelAbility 0
            @setvar! UseStunAbility 0
            @setvar! UseSmashAbility 0
        elseif skill 'Archery' > 50
            @setvar! UseSkirmishAbility 0
            @setvar! UseFullDrawAbility 0
            @setvar! UseRepeaterAbility 0
        endif
    endif
endif

if EnableWeaponStances = 1
    if SetWeaponStance = 0
        if skill 'Mace Fighting' > 50
            @setvar! SwitchToAggressiveStance 0
            @setvar! SwitchToDefensiveStance 0
            @setvar! SwitchToCleaveStance 0
            @setvar! SwitchToWildSwingStance 0
            @setvar! SwitchToSunderStance 0
        elseif skill 'Archery' > 50
            @setvar! SwitchToArcaneStance 0
            @setvar! SwitchToFowlingStance 0
            @setvar! SwitchToIncendiaryStance 0
            @setvar! SwitchToLongshotStance 0
            @setvar! SwitchToMaimingStance 0
        endif
    elseif SetWeaponStance = 1
        if skill 'Mace Fighting' > 50
            @setvar! SwitchToAggressiveStance 1
            @setvar! SwitchToDefensiveStance 0
            @setvar! SwitchToCleaveStance 0
            @setvar! SwitchToWildSwingStance 0
            @setvar! SwitchToSunderStance 0
        elseif skill 'Archery' > 50
            @setvar! SwitchToArcaneStance 1
            @setvar! SwitchToFowlingStance 0
            @setvar! SwitchToIncendiaryStance 0
            @setvar! SwitchToLongshotStance 0
            @setvar! SwitchToMaimingStance 0
        endif
    elseif SetWeaponStance = 2
        if skill 'Mace Fighting' > 50
            @setvar! SwitchToAggressiveStance 0
            @setvar! SwitchToDefensiveStance 1
            @setvar! SwitchToCleaveStance 0
            @setvar! SwitchToWildSwingStance 0
            @setvar! SwitchToSunderStance 0
        elseif skill 'Archery' > 50
            @setvar! SwitchToArcaneStance 0
            @setvar! SwitchToFowlingStance 1
            @setvar! SwitchToIncendiaryStance 0
            @setvar! SwitchToLongshotStance 0
            @setvar! SwitchToMaimingStance 0
        endif
    elseif SetWeaponStance = 3
        if skill 'Mace Fighting' > 50
            @setvar! SwitchToAggressiveStance 0
            @setvar! SwitchToDefensiveStance 0
            @setvar! SwitchToCleaveStance 1
            @setvar! SwitchToWildSwingStance 0
            @setvar! SwitchToSunderStance 0
        elseif skill 'Archery' > 50
            @setvar! SwitchToArcaneStance 0
            @setvar! SwitchToFowlingStance 0
            @setvar! SwitchToIncendiaryStance 1
            @setvar! SwitchToLongshotStance 0
            @setvar! SwitchToMaimingStance 0
        endif
    elseif SetWeaponStance = 4
        if skill 'Mace Fighting' > 50
            @setvar! SwitchToAggressiveStance 0
            @setvar! SwitchToDefensiveStance 0
            @setvar! SwitchToCleaveStance 0
            @setvar! SwitchToWildSwingStance 1
            @setvar! SwitchToSunderStance 0
        elseif skill 'Archery' > 50
            @setvar! SwitchToArcaneStance 0
            @setvar! SwitchToFowlingStance 0
            @setvar! SwitchToIncendiaryStance 0
            @setvar! SwitchToLongshotStance 1
            @setvar! SwitchToMaimingStance 0
        endif
    elseif SetWeaponStance = 5
         if skill 'Mace Fighting' > 50
            @setvar! SwitchToAggressiveStance 0
            @setvar! SwitchToDefensiveStance 0
            @setvar! SwitchToCleaveStance 0
            @setvar! SwitchToWildSwingStance 0
            @setvar! SwitchToSunderStance 1
        elseif skill 'Archery' > 50
            @setvar! SwitchToArcaneStance 0
            @setvar! SwitchToFowlingStance 0
            @setvar! SwitchToIncendiaryStance 0
            @setvar! SwitchToLongshotStance 0
            @setvar! SwitchToMaimingStance 1
        endif
    else
         if skill 'Mace Fighting' > 50
            @setvar! SwitchToAggressiveStance 0
            @setvar! SwitchToDefensiveStance 0
            @setvar! SwitchToCleaveStance 0
            @setvar! SwitchToWildSwingStance 0
            @setvar! SwitchToSunderStance 0
        elseif skill 'Archery' > 50
            @setvar! SwitchToArcaneStance 0
            @setvar! SwitchToFowlingStance 0
            @setvar! SwitchToIncendiaryStance 0
            @setvar! SwitchToLongshotStance 0
            @setvar! SwitchToMaimingStance 0
        endif
    endif
endif

if diffweight > RedWeightLimitDiffWeight
    @setvar! DisableVacuums 0
endif

if skill 'Archery' > 50
    if not find MyFastWeapon self and EnableFastSecondHit = 1
        while findtype "bow|composite bow|recurve bow|crossbow|balestra|stubnose crossbow" backpack as FastWeapon
            getlabel FastWeapon FastWeaponlabel
            if 'aspect' in FastWeaponlabel
                @setvar! MyFastWeapon FastWeapon
                if EnableOverheadMessages = 1
                    overhead '[ FAST WEAPON SET! ]' 1790
                endif
                break
            elseif 'unidentified' in FastWeaponLabel
                @ignore FastWeapon
            else 
                overhead '[ SELECT YOUR FAST WEAPON... ]' 153
                getlabel backpack backpacklabel
                @setvar! FastWeapon
                while targetexists 
                    wait 100
                endwhile
                if EnableOverheadMessages = 1
                    overhead '[ FAST WEAPON SET! ]' 77
                endif
                break
            endif
            wait 500
        endwhile
    endif 
    
    if not find MySlowWeapon self 
        while findtype "heavy crossbow|long bow|tower guard crossbow" backpack as SlowWeapon
            getlabel SlowWeapon SlowWeaponlabel
            if 'aspect' in SlowWeaponlabel
                @setvar! MySlowWeapon SlowWeapon
                if EnableOverheadMessages = 1
                    overhead '[ MAIN WEAPON SET! ]' 1790
                endif
                break
            elseif 'unidentified' in SlowWeaponlabel
                @ignore SlowWeapon
            else 
                overhead '[ SELECT YOUR MAIN WEAPON... ]' 153
                getlabel backpack backpacklabel
                @setvar! SlowWeapon
                while targetexists 
                    wait 100
                endwhile
                if EnableOverheadMessages = 1
                    overhead '[ MAIN WEAPON SET! ]' 77
                endif
                break                
            endif
            wait 500
        endwhile
        clearignore
    endif
elseif skill 'Mace Fighting' > 50
    if not find MyFastWeapon self and EnableFastSecondHit = 1
        while findtype "flail|war axe|war hammer|war mace|flanged mace|mace|maul|cudgel|hammer pick|club|skull club" backpack as FastWeapon
            getlabel FastWeapon FastWeaponlabel
            if 'aspect' in FastWeaponlabel
                @setvar! MyFastWeapon FastWeapon
                if EnableOverheadMessages = 1
                    overhead '[ FAST WEAPON SET! ]' 1790
                endif
                break
            elseif 'unidentified' in FastWeaponLabel
                @ignore FastWeapon
            else 
                overhead '[ SELECT YOUR FAST WEAPON... ]' 153
                getlabel backpack backpacklabel
                @setvar! FastWeapon
                while targetexists 
                    wait 100
                endwhile
                if EnableOverheadMessages = 1
                    overhead '[ FAST WEAPON SET! ]' 77
                endif
                break
            endif
            wait 500
        endwhile
    endif

    if not find MySlowWeapon self 
        while findtype "great mace|giant club|giant spiked club|sledgehammer" backpack as SlowWeapon
            getlabel SlowWeapon SlowWeaponlabel
            if 'aspect' in SlowWeaponlabel
                @setvar! MySlowWeapon SlowWeapon
                if EnableOverheadMessages = 1
                    overhead '[ MAIN WEAPON SET! ]' 1790
                endif
                break
            elseif 'unidentified' in SlowWeaponlabel
                @ignore SlowWeapon
            else 
                overhead '[ SELECT YOUR MAIN WEAPON... ]' 153
                @setvar! SlowWeapon
                getlabel backpack backpacklabel
                while targetexists 
                    wait 100
                endwhile
                if EnableOverheadMessages = 1
                    overhead '[ MAIN WEAPON SET! ]' 77
                endif
                break  
            endif
            wait 500
        endwhile
        clearignore
    endif
endif

if skill 'Tracking' > 50
    if not findbuff 'tracking'
        while not gumpexists 4267467659
            useskill 'tracking'
            wait 250
        endwhile
        if gumpexists 4267467659
            while not insysmsg "You will now hunt all hostile players."
                gumpresponse 8 4267467659
                waitforgump 4267467659 5000
            endwhile
            gumpresponse 6 4267467659
            wait 500
            clearsysmsg
        endif
        gumpclose 4267467659
        if EnableOverheadMessages = 1
            overhead "[ TRACKING ACTIVATED! ]" 334
        endif
    endif
endif

if insysmsg "world is saving"
    settimer "WorldSaveTimer" 0
    if EnableOverheadMessages = 1
        overhead "[ WORLD SAVING... ]" 253
    endif
    while timer "WorldSaveTimer" < 4500
        if insysmsg "save complete"
            break
        endif
        wait 100
    endwhile
    if EnableOverheadMessages = 1
        overhead "[ SAVE COMPLETE! ]" 253
    endif
endif

if not findbuff 'food satisfaction' and findtype "tray" self and EnableEatingFood = 1
    if findtype "tray" self as Food
        if EnableOverheadMessages = 1
            overhead "[ EATING FOOD... ]" 88
        endif
        dclick Food
        wait 500
    endif
endif

if insysmsg 'You have been revealed'
    if EnableOverheadMessages = 1
        overhead '[ !! REVEALED !! ]' 37
    else 
        overhead ' Ï ' 37
    endif
    clearsysmsg 
    hotkey 'Toggle War Only' 
    @setvar! Stealthing 0
    @setvar! KeepOnTrucking 0
    cooldown 'Hiding' 5000
endif


///////////////////
//  ALIVE LOOP:  //
///////////////////

while not dead
    if EnableDropGoldWhenOverweight = 1
        if weight > maxweight
            if timer overweightMessageTimer > 4500
                overhead "[ OVERWEIGHT! ]" 34
                settimer overweightMessageTimer 0
            endif

            if DropGoldAmount != 0
                clearignore
                @setvar! DisableVacuums 1
                wait 250

                if EnablePutLootinLockBox = 1
                    if findtype "wooden box" self as lockbox
                        if findtype "copper key" self as key
                            clearignore
                            getlabel lockbox lockboxlabel
                            wait 100
                            if "items" in lockboxlabel
                                // Do nothing
                            else
                                dclick key
                                wft 1500
                                target lockbox
                                if EnableOverheadMessages = 1
                                    overhead "[loot box unlocked]" 2114
                                endif
                                wait 500
                                if insysmsg "It appears to be locked."
                                    dclick key
                                    wft 1500
                                    target lockbox
                                    wait 250
                                endif
                            endif
                        elseif EnableOverheadMessages = 1
                            overhead "[ NO LOCKBOX KEY! ]" 337
                        endif
                    endif
                endif

                while weight > maxweight
                    if findtype "gold coin" self as easycomeeasygo
                        lift easycomeeasygo DropGoldAmount
                        droprelloc 0 0
                        getlabel backpack packdesc
                        if EnableOverheadMessages = 1
                            overhead "[ DROPPING GOLD... ]" 149
                        endif
                        wait 250
                        if insysmsg "cannot drop anything"
                            drop backpack -1 -1 -1
                            break
                        endif
                        wait 250
                    else
                        break
                    endif
                    if diffhits > 30
                        break
                    endif
                endwhile
            endif
        endif
    endif

    if paralyzed and EnableAutoParalyzePouch = 1
        if findtype "pouch" self
            yell "[pouch"
            wait 250
        else
            if timer pouchMessageTimer > 5000 and EnableOverheadMessages = 1
                overhead "[ NO POUCHES! ]" 337
                settimer pouchMessageTimer 0
            endif
        endif
    endif

    if insysmsg "world is saving"
        settimer "WorldSaveTimer" 0
        if EnableOverheadMessages = 1
            overhead "[ WORLD SAVING... ]" 253
        endif
        while timer "WorldSaveTimer" < 4500
            if insysmsg "save complete"
                break
            endif
            wait 100
        endwhile
        if EnableOverheadMessages = 1
            overhead "[ SAVE COMPLETE! ]" 253
        endif
    endif

    if EnableArcheryWarningMessage = 1 and skill 'Archery' >= 50
        if findtype 'stubnose crossbow|tower guard crossbow|balestra|heavy crossbow|crossbow' hand
            @setvar! AMMO 1
        elseif findtype 'long bow|bow|recurve bow|composite bow' hand
            @setvar! AMMO 2
        endif

        if counttype "crossbow bolt" self < ArcheryLowAmmoWarningAmount and timer "AmmunitionTimer" > 6000 and AMMO = 1
            overhead "[ AMMO LOW! ]" 37
            settimer 'AmmunitionTimer' 0
        endif

        if counttype "arrow" self < ArcheryLowAmmoWarningAmount and timer 'AmmunitionTimer' > 6000 and AMMO = 2
            overhead "[ AMMO LOW! ]" 37
            settimer 'AmmunitionTimer' 0
        endif
    endif

    if EnableWeightWarningMessage = 1
        if diffweight < GreenWarningDiffWeight and diffweight > YellowWarningDiffWeight and timer WeightTimer > 6000
            if EnableOverheadMessages = 1
                overhead "[ WEIGHT WARNING... ]" 77
                settimer "WeightTimer" 0
            else
                overhead "  " 77
                settimer "WeightTimer" 0
            endif
        elseif diffweight < YellowWarningDiffWeight and diffweight > RedWeightLimitDiffWeight and timer WeightTimer > 6000
            if EnableOverheadMessages = 1
                overhead "[ WEIGHT WARNING! ]" 153
                settimer "WeightTimer" 0
            else
                overhead "  " 153
                settimer "WeightTimer" 0
            endif
        elseif diffweight < RedWeightLimitDiffWeight and timer WeightTimer > 6000
            if EnableOverheadMessages = 1
                overhead "[ WEIGHT LIMIT REACHED! ]" 37
                settimer "WeightTimer" 0
                wait 500
            else
                overhead " Ï " 37
                settimer "WeightTimer" 0
            endif

            wait 500

            if weight > maxweight
                if EnableDropGoldWhenOverweight = 1
                    if EnableOverheadMessages = 1
                        wait 1000
                        overhead "[ OVERWEIGHT! ]" 337
                    endif
                    replay
                else
                    if EnableOverheadMessages = 1
                        overhead "[ OVERWEIGHT! ]" 337
                        wait 2000
                    endif
                    overhead "[ STOPPING SCRIPT! ]" 88
                endif
            endif
        endif
    endif

    if EnableWeaponCheck = 1
        if not find MySlowWeapon hand
            clearignore
            if skill 'Mace Fighting' >= 50
                if not findtype 'great mace|giant club|giant spiked club|sledgehammer' self
                    if timer NoWeaponOverheadTimer > 5000
                        overhead "[ NO WEAPON! ]" 337
                        settimer NoWeaponOverheadTimer 0
                    endif
                else
                    if not findtype 'great mace|giant club|giant spiked club|sledgehammer' hand
                        if findtype 'great mace|giant club|giant spiked club|sledgehammer' backpack as  MySlowWeapon
                            for 10
                            getlabel  MySlowWeapon WeaponLabel
                            wait 250
                            if "aspect" in WeaponLabel
                                break
                            elseif "unidentified" in WeaponLabel
                                @ignore  MySlowWeapon
                                wait 250
                            else
                                @ignore  MySlowWeapon
                                wait 250
                            endif
                            if findtype 'great mace|giant club|giant spiked club|sledgehammer' backpack as  MySlowWeapon
                                getlabel  MySlowWeapon WeaponLabel
                                wait 250
                            endif
                            endfor
                            wait 250
                            dclick  MySlowWeapon
                            wait 500
                        endif
                    endif
                endif
            elseif skill 'Archery' >= 50
                if not findtype 'heavy crossbow|long bow|tower guard crossbow' self
                    if timer NoWeaponOverheadTimer > 5000
                        overhead "[ NO WEAPON! ]" 337
                        settimer NoWeaponOverheadTimer 0
                    endif
                else
                    if not findtype 'heavy crossbow|long bow|tower guard crossbow' hand
                        if findtype 'heavy crossbow|long bow|tower guard crossbow' backpack as  MySlowWeapon
                            for 10
                            getlabel  MySlowWeapon WeaponLabel
                            wait 250
                            if "aspect" in WeaponLabel
                                break
                            elseif "unidentified" in WeaponLabel
                                @ignore  MySlowWeapon
                                wait 250
                            else
                                @ignore  MySlowWeapon
                                wait 250
                            endif
                            if findtype 'heavy crossbow|long bow|tower guard crossbow' backpack as  MySlowWeapon
                                getlabel  MySlowWeapon WeaponLabel
                                wait 250
                            endif
                            endfor
                            wait 250
                            dclick  MySlowWeapon
                            wait 500
                        endif
                    endif
                endif
            endif
        endif
    endif


    /////////////////////
    //  VISIBLE LOOP:  //
    /////////////////////

    if not hidden
        @setvar! KeepOnTrucking 0
        @setvar! Stealthing 0


        /////////////////////
        //  WARMODE LOOP:  //
        /////////////////////

        if warmode
            if timer WarModeOverheadTimer > 2500
                if EnableOverheadMessages = 1
                    overhead "[ VISIBLE MODE! ]" 1909
                else
                    overhead " Ï " 1909
                endif
                settimer WarModeOverheadTimer 0
            endif

            if insysmsg "world is saving"
                settimer "WorldSaveTimer" 0
                if EnableOverheadMessages = 1
                    overhead "[ WORLD SAVING... ]" 253
                endif
                while timer "WorldSaveTimer" < 4500
                    if insysmsg "save complete"
                        break
                    endif
                    wait 100
                endwhile
                if EnableOverheadMessages = 1
                    overhead "[ SAVE COMPLETE! ]" 253
                endif
            endif

            if EnablePKRadar = 1
                if insysmsg "Now tracking"
                    clearsysmsg
                    if EnableRedAlertOverhead = 1
                        overhead "[ !! RED ALERT !! ]" 337
                        wait 500
                    endif
                    if not hidden
                        if not cooldown 'Hiding'
                            if targetexists
                                hotkey 'Cancel Current Target'
                            endif

                            useskill "Hiding"
                            wait 500

                            while insysmsg 'You must wait'
                                clearsysmsg
                                wait 250
                                skill 'Hiding'
                            endwhile

                            if hidden
                                // Do nothing
                            else
                                if counttype 52149 self > 0
                                    if not cooldown 'Smoke Bomb'
                                        clearsysmsg
                                        hotkey 'Smoke Bomb'
                                        wait 500
                                        if insysmsg 'You must wait another'
                                            if EnableOverheadMessages = 1
                                                overhead '[ SMOKE BOMB UNAVAILABLE ]' 333
                                            endif
                                            hotkey 'Toggle War Only'
                                            replay
                                        else
                                            if hidden
                                                if EnableOverheadMessages = 1
                                                    overhead '[ SMOKE BOMB! ]' 1790
                                                endif
                                                @setvar! Stealthing 1
                                                cooldown 'Hiding' 0
                                                cooldown 'Stealth' 10000
                                                cooldown 'Smoke Bomb' SmokeBombCooldown
                                            endif
                                            replay
                                        endif
                                    else
                                        if EnableOverheadMessages = 1
                                            overhead '[ SMOKE ON COOLDOWN! ]' 33
                                        endif
                                        hotkey 'Toggle War Only'
                                        replay
                                    endif
                                else
                                    if EnableOverheadMessages = 1
                                        overhead '[ NO SMOKE BOMBS ]' 337
                                    endif
                                    replay
                                endif
                            endif
                        endif
                    else
                        if EnableOverheadMessages = 1
                            wait 500
                            overhead "[ ALREADY HIDDEN! ]" 11
                        endif
                        wait 500
                    endif
                    wait 500
                endif
            endif

            if EnableWeaponCheck = 1
                clearignore
                if skill 'Mace Fighting' >= 50
                    if not findtype 'great mace|giant club|giant spiked club|sledgehammer' self
                        if timer NoWeaponOverheadTimer > 5000
                            overhead "[ NO WEAPON! ]" 337
                            settimer NoWeaponOverheadTimer 0
                        endif
                    else
                        if not findtype 'great mace|giant club|giant spiked club|sledgehammer' hand
                            if findtype 'great mace|giant club|giant spiked club|sledgehammer' backpack as  MySlowWeapon
                                for 10
                                getlabel  MySlowWeapon WeaponLabel
                                wait 250
                                if "aspect" in WeaponLabel
                                    break
                                elseif "unidentified" in WeaponLabel
                                    @ignore  MySlowWeapon
                                    wait 250
                                else
                                    @ignore  MySlowWeapon
                                    wait 250
                                endif
                                if findtype 'great mace|giant club|giant spiked club|sledgehammer' backpack as  MySlowWeapon
                                    getlabel  MySlowWeapon WeaponLabel
                                    wait 250
                                endif
                                endfor
                                wait 250
                                dclick  MySlowWeapon
                                wait 500
                            endif
                        endif
                    endif
                elseif skill 'Archery' >= 50
                    if not findtype 'heavy crossbow|long bow|tower guard crossbow' self
                        if timer NoWeaponOverheadTimer > 5000
                            overhead "[ NO WEAPON! ]" 337
                            settimer NoWeaponOverheadTimer 0
                        endif
                    else
                        if not findtype 'heavy crossbow|long bow|tower guard crossbow' hand
                            if findtype 'heavy crossbow|long bow|tower guard crossbow' backpack as  MySlowWeapon
                                for 10
                                getlabel  MySlowWeapon WeaponLabel
                                wait 250
                                if "aspect" in WeaponLabel
                                    break
                                elseif "unidentified" in WeaponLabel
                                    @ignore  MySlowWeapon
                                    wait 250
                                else
                                    @ignore  MySlowWeapon
                                    wait 250
                                endif
                                if findtype 'heavy crossbow|long bow|tower guard crossbow' backpack as  MySlowWeapon
                                    getlabel  MySlowWeapon WeaponLabel
                                    wait 250
                                endif
                                endfor
                                wait 250
                                dclick  MySlowWeapon
                                wait 500
                            endif
                        endif
                    endif
                endif
            endif

            if paralyzed and EnableAutoParalyzePouch = 1
                if findtype "pouch" self
                    yell "[pouch"
                    wait 250
                else
                    if timer pouchMessageTimer > 5000 and EnableOverheadMessages = 1
                        overhead "[ NO POUCHES! ]" 337
                        settimer pouchMessageTimer 0
                    endif
                endif
            endif

            if diffhits > 0 and not bandaging and not hidden and skill 'healing' > 0
                if findtype 'clean bandage%s%' self
                    if targetexists
                        hotkey 'cancel current target'
                    endif
                    hotkey 'Bandage Self'
                    if EnableOverheadMessages = 1
                        if timer aidsMessageTimer > 5000
                            overhead "[ BANDAGING... ]" 88
                            settimer aidsMessageTimer 0
                        endif
                    endif
                    wait 500
                else
                    if timer aidsMessageTimer > 5000 and EnableOverheadMessages = 1
                        overhead "[ OUT OF BANDAGES! ]" 337
                        settimer aidsMessageTimer 0
                    endif
                endif
            endif

            if EnableUsePotionKegs = 1 and findtype 'empty bottle%s%' self and findtype 'keg' self and timer 'PotionKegPVPCooldown' > 30000 and warmode
                if not timerexists PotionKegTimer
                    createtimer PotionKegTimer
                    settimer PotionKegTimer 5000
                endif

                @setvar! PotionStockCheck 0

                while PotionStockCheck < 8 and findtype 'empty bottle%s%' self and warmode

                    if PotionStockCheck = 0 and HealingPotionAmount != 0
                        @setvar! PotionType 3852
                        @setvar! KegColour 253
                        @setvar! PotionAmounttoFill HealingPotionAmount
                        @setvar! PotionStockCheck 1
                    elseif PotionStockCheck = 1 and CurePotionAmount != 0
                        @setvar! PotionType 3847
                        @setvar! KegColour 44
                        @setvar! PotionAmounttoFill CurePotionAmount
                        @setvar! PotionStockCheck 2
                    elseif PotionStockCheck = 2 and RefreshPotionAmount != 0
                        @setvar! PotionType 3851
                        @setvar! KegColour 37
                        @setvar! PotionAmounttoFill RefreshPotionAmount
                        @setvar! PotionStockCheck 3
                    elseif PotionStockCheck = 3 and StrengthPotionAmount != 0
                        @setvar! PotionType 3849
                        @setvar! KegColour 956
                        @setvar! PotionAmounttoFill StrengthPotionAmount
                        @setvar! PotionStockCheck 4
                    elseif PotionStockCheck = 4 and AgilityPotionAmount != 0
                        @setvar! PotionType 3848
                        @setvar! KegColour 93
                        @setvar! PotionAmounttoFill AgilityPotionAmount
                        @setvar! PotionStockCheck 5
                    elseif PotionStockCheck = 5 and ResistPotionAmount != 0
                        @setvar! PotionType 3846
                        @setvar! KegColour 1109
                        @setvar! PotionAmounttoFill ResistPotionAmount
                        @setvar! PotionStockCheck 6
                    elseif PotionStockCheck = 6 and PoisonPotionAmount != 0
                        @setvar! PotionType 3850
                        @setvar! KegColour 363
                        @setvar! PotionAmounttoFill PoisonPotionAmount
                        @setvar! PotionStockCheck 7
                    elseif PotionStockCheck = 7 and ExplosionPotionAmount != 0
                        @setvar! PotionType 3853
                        @setvar! KegColour 419
                        @setvar! PotionAmounttoFill ExplosionPotionAmount
                        @setvar! PotionStockCheck 8
                    else
                        break
                    endif

                    if not warmode
                        replay
                    endif

                    while counttype PotionType self < PotionAmounttoFill and warmode
                        if not warmode
                            replay
                        endif

                        if not findtype 'empty bottle%s%' self
                            if EnableOverheadMessages = 1 and timer 'PotionKegTimer' > 5000
                                overhead "[ NO EMPTY BOTTLES... ]" 337
                                settimer 'PotionKegTimer' 0
                            endif
                            break
                        endif

                        if diffhits > HealPotionHPdiff
                            break
                        endif

                        if findtype 'keg' self KegColour as myKeg
                            dclick myKeg
                            wait 250
                            if EnableOverheadMessages = 1
                                if timer 'PotionKegTimer' > 2000
                                    overhead '[ FILLING POTS... ]' KegColour
                                    settimer 'PotionKegTimer' 0
                                endif
                            endif
                        else
                            if EnableOverheadMessages = 1 and timer 'PotionKegTimer' > 5000
                                overhead "[ NO KEG TO USE... ]" KegColour
                                settimer 'PotionKegTimer' 0
                            endif
                            break
                        endif
                        if insysmsg "You have been in combat with another player"
                            settimer "PotionKegPVPCooldown" 0
                            break
                        endif
                    endwhile

                    if counttype PotionType self < PotionAmounttoFill and not findtype 'empty bottle%s%' self
                        if EnableOverheadMessages = 1 and timer 'PotionKegTimer' > 5000
                            overhead "[ NO EMPTY BOTTLES... ]" 337
                            settimer 'PotionKegTimer' 0
                        endif
                        break
                    endif
                endwhile
            endif

            if EnableHealPotion = 1 and diffhits >= HealPotionHPdiff and not hidden
                if findtype "Yellow Potion" self as HealPot
                    getlabel HealPot HealPotlabel
                    if "next" in HealPotlabel
                        // Do nothing
                    else
                        @setvar! HealPotionCheck 0

                        if counttype 3852 self as HealPotCount
                            @setvar! HealPotionCheck HealPotCount
                        endif

                        clearsysmsg
                        dclicktype 3852
                        getlabel backpack backpackdesc
                        wait 250

                        if HealPotionCheck != counttype 3852 self or insysmsg "potion satchel used"
                            settimer 'HealPotionTimer' 0
                            cooldown "Healing Potion" 10000
                            if EnableOverheadMessages = 1
                                if insysmsg "potion satchel used"
                                    overhead '[ FREE HEAL POTION ]' 253
                                else
                                    overhead "[ HEAL POTION ]" 253
                                endif
                            endif
                            clearsysmsg
                        endif
                    endif
                else
                    if timer 'yellowMessageTimer' > 4500
                        overhead "[ NO HEAL POTS! ]" 337
                        settimer 'yellowMessageTimer' 0
                    endif
                endif
            endif

            if EnablePanaceaPotion = 1
                if findbuff "bleed" or findbuff "diseased" and skill 'Alchemy' >= 80
                    if not findbuff "panacea potion cooldown"
                        if findtype "Orange Potion" self
                            dclicktype "Orange Potion"
                            wait 500
                            if findbuff "panacea potion cooldown" and EnableOverheadMessages = 1
                                overhead "[ PANACEA POTION ]" 2117
                            endif
                            cooldown 'Panacea Potion' 30000
                        else 
                            if timer 'orangeMessageTimer' > 15000
                                overhead "[ NO CURE POTS! ]" 337
                                settimer 'orangeMessageTimer' 0
                            endif
                        endif
                    else 
                        if EnableOverheadMessages = 1 and timer PanaceaOverheadTimer > 15000
                            overhead '[ PANACEA ON COOLDOWN! ]' 37
                            settimer PanaceaOverheadTimer 0
                        endif
                    endif
                endif
            endif

            if EnableCleansingBrews = 1
                if findbuff "Disease" or findbuff "Bleed"
                    if timer CleansingBrewTimer > 120000
                        if findtype 50675 self 2935 as CleansingBrew
                            dclick CleansingBrew
                            if EnableOverheadMessages = 1
                                overhead '[ CLEANSING BREW ]' 2117
                            endif
                            cooldown 'Cleansing Brew' 120000
                            settimer CleansingBrewTimer 0
                            wait 250
                        else
                            if timer CleansingBrewOverhead > 15000
                                overhead "[ NO CLEANSING BREWS! ]" 337
                                settimer CleansingBrewOverhead 0
                                settimer CleansingBrewTimer 0
                            endif
                        endif
                    else 
                        if EnableOverheadMessages = 1 and timer CleansingBrewOverhead > 15000
                            overhead '[ BREW ON COOLDOWN! ]' 37
                            settimer CleansingBrewOverhead 0
                        endif
                    endif
                endif
            endif

            if EnableCurePotion = 1
                while poisoned
                    if findtype "Orange Potion" self
                        dclicktype "Orange Potion"
                        if EnableOverheadMessages = 1 and timer 'orangeMessageTimer' > 3500
                            overhead "[ CURE POTION ]" 44
                            settimer 'orangeMessageTimer' 0
                        endif
                        wait 250
                    else
                        if timer 'orangeMessageTimer' > 5000
                            overhead "[ NO CURE POTS! ]" 337
                            settimer 'orangeMessageTimer' 0
                        endif
                    endif
                    if diffhits > 40
                        break
                    endif
                endwhile
            endif

            if EnableRefreshPotion = 1 and diffstam >= RefreshPotionSPdiff and not hidden
                if findtype "Red Potion" self
                    dclicktype "Red Potion"
                    if EnableOverheadMessages = 1
                        overhead "[ REFRESH POTION ]" 37
                    endif
                    wait 500
                else
                    if timer redMessageTimer > 4500
                        overhead "[ NO REFRESH POTS! ]" 337
                        settimer redMessageTimer 0
                    endif
                endif
                wait 500
            endif

            if EnableStrengthPotion = 1 and not hidden
                if skill 'Alchemy' > 0 and skill 'Alchemy' < 2
                    if insysmsg "You may now use a strength" or not findbuff "Strength"
                        if findtype "White Potion" self
                            dclicktype "White Potion"
                            if EnableOverheadMessages = 1
                                overhead "[ STRENGTH POTION ]" 956
                            endif
                            wait 500
                        else
                            if timer whiteMessageTimer > 4500
                                overhead "[ NO STRENGTH POTS! ]" 337
                                settimer whiteMessageTimer 0
                            endif
                        endif
                        clearsysmsg
                    endif
                else
                    if not findbuff "Strength"
                        if findtype "White Potion" self
                            dclicktype "White Potion"
                            if EnableOverheadMessages = 1
                                overhead "[ STRENGTH POTION ]" 956
                            endif
                            wait 500
                        else
                            if timer whiteMessageTimer > 4500
                                overhead "[ NO STRENGTH POTS! ]" 337
                                settimer whiteMessageTimer 0
                            endif
                        endif
                    endif
                endif
            endif

            if EnableAgilityPotion = 1 and not findbuff "Agility" and not hidden
                if findtype "Blue Potion" self
                    dclicktype "Blue Potion"
                    if EnableOverheadMessages = 1
                        overhead "[ AGILITY POTION ]" 93
                    endif
                    wait 500
                else
                    if timer blueMessageTimer > 4500
                        overhead "[ NO AGILITY POTS! ]" 337
                        settimer blueMessageTimer 0
                    endif
                endif
            endif

            if EnableMagicResistPotion = 1 and not findbuff "Magic Resist" and not hidden
                if findtype "Black Potion" self
                    dclicktype "Black Potion"
                    if EnableOverheadMessages = 1
                        overhead "[ RESIST POTION ]" 1109
                    endif
                    wait 500
                else
                    if timer blackMessageTimer > 4500
                        overhead "[ NO RESIST POTS! ]" 337
                        settimer blackMessageTimer 0
                    endif
                endif
            endif

            if EnableDropGoldWhenOverweight = 1
                if weight > maxweight
                    if timer overweightMessageTimer > 4500
                        overhead "[ OVERWEIGHT! ]" 34
                        settimer overweightMessageTimer 0
                    endif

                    if DropGoldAmount != 0
                        clearignore
                        @setvar! DisableVacuums 1
                        wait 250

                        if EnablePutLootinLockBox = 1
                            if findtype "wooden box" self as lockbox
                                if findtype "copper key" self as key
                                    clearignore
                                    getlabel lockbox lockboxlabel
                                    wait 100
                                    if "items" in lockboxlabel
                                        // Do nothing
                                    else
                                        dclick key
                                        wft 1500
                                        target lockbox
                                        if EnableOverheadMessages = 1
                                            overhead "[loot box unlocked]" 2114
                                        endif
                                        wait 500
                                        if insysmsg "It appears to be locked."
                                            dclick key
                                            wft 1500
                                            target lockbox
                                            wait 250
                                        endif
                                    endif
                                elseif EnableOverheadMessages = 1
                                    overhead "[ NO LOCKBOX KEY! ]" 337
                                endif
                            endif
                        endif

                        while weight > maxweight
                            if findtype "gold coin" self as easycomeeasygo
                                lift easycomeeasygo DropGoldAmount
                                droprelloc 0 0
                                getlabel backpack packdesc
                                if EnableOverheadMessages = 1
                                    overhead "[ DROPPING GOLD... ]" 149
                                endif
                                wait 250
                                if insysmsg "cannot drop anything"
                                    drop backpack -1 -1 -1
                                    break
                                endif
                                wait 250
                            else
                                break
                            endif
                            if diffhits > 30
                                break
                            endif
                        endwhile
                    endif
                endif
            endif
            
            if insysmsg 'Vanish activated'
                if EnableOverheadMessages = 1
                    overhead '[ VANISHED!! ]' 2114
                endif
                wait 500
                @setvar! Stealthing 1
                if EnableSmokeBombDoubleTap = 1
                    hotkey 'Toggle War Only'
                else 
                    hotkey 'Toggle Peace Only'
                endif
                clearsysmsg
                cooldown 'Stealth' 0
                cooldown "Hiding" 0
                replay
            endif

            if not findbuff 'food satisfaction' and findtype "tray" self and EnableEatingFood = 1
                if findtype "tray" self as Food
                    if EnableOverheadMessages = 1
                        overhead "[ EATING FOOD... ]" 88
                    endif
                    dclick Food
                    wait 500
                endif
            endif

            if EnableArcheryWarningMessage = 1 and skill 'Archery' >= 50
                if findtype 'stubnose crossbow|tower guard crossbow|balestra|heavy crossbow|crossbow' hand
                    @setvar! AMMO 1
                elseif findtype 'long bow|bow|recurve bow|composite bow' hand
                    @setvar! AMMO 2
                endif

                if counttype "crossbow bolt" self < ArcheryLowAmmoWarningAmount and timer "AmmunitionTimer" > 6000 and AMMO = 1
                    overhead "[ AMMO LOW! ]" 37
                    settimer 'AmmunitionTimer' 0
                endif

                if counttype "arrow" self < ArcheryLowAmmoWarningAmount and timer 'AmmunitionTimer' > 6000 and AMMO = 2
                    overhead "[ AMMO LOW! ]" 37
                    settimer 'AmmunitionTimer' 0
                endif
            endif

            if EnableWeightWarningMessage = 1
                if diffweight < GreenWarningDiffWeight and diffweight > YellowWarningDiffWeight and timer WeightTimer > 6000
                    if EnableOverheadMessages = 1
                        overhead "[ WEIGHT WARNING... ]" 77
                        settimer "WeightTimer" 0
                    else
                        overhead "  " 77
                        settimer "WeightTimer" 0
                    endif
                elseif diffweight < YellowWarningDiffWeight and diffweight > RedWeightLimitDiffWeight and timer WeightTimer > 6000
                    if EnableOverheadMessages = 1
                        overhead "[ WEIGHT WARNING! ]" 153
                        settimer "WeightTimer" 0
                    else
                        overhead "  " 153
                        settimer "WeightTimer" 0
                    endif
                elseif diffweight < RedWeightLimitDiffWeight and timer WeightTimer > 6000
                    if EnableOverheadMessages = 1
                        overhead "[ WEIGHT LIMIT REACHED! ]" 37
                        settimer "WeightTimer" 0
                        wait 500
                    else
                        overhead " Ï " 37
                        settimer "WeightTimer" 0
                    endif

                    wait 500

                    if weight > maxweight
                        if EnableDropGoldWhenOverweight = 1
                            if EnableOverheadMessages = 1
                                wait 1000
                                overhead "[ OVERWEIGHT! ]" 337
                            endif
                            replay
                        else
                            if EnableOverheadMessages = 1
                                overhead "[ OVERWEIGHT! ]" 337
                                wait 2000
                            endif
                            overhead "[ STOPPING SCRIPT! ]" 88
                        endif
                    endif
                endif
            endif

            if EnableAutoCarving = 1 and findtype 11552 self
                while findtype "corpse" ground -1 -1 2 as deadbody
                    if findtype 11552 self
                        if targetexists
                            hotkey 'cancel current target'
                        endif
                        while not targetexists
                            skill 'forensicevaluation'
                        endwhile
                        if targetexists and find deadbody ground -1 -1 2
                            target 'self'
                            @ignore deadbody
                            wait 500
                        endif
                        if insysmsg "You dont see anything nearby"
                            clearsysmsg
                            break
                        else
                            if EnableOverheadMessages = 1 and timer SkinningTimer > 3000
                                overhead "[ SKINNING... ]" 333
                                settimer SkinningTimer 0
                            endif
                        endif
                    else
                        if EnableOverheadMessages = 1 and timer SkinningTimer > 15000
                            overhead "[ NO SKINNING KNIFE ]" 337
                            settimer SkinningTimer 0
                            break
                        endif
                    endif
                endwhile
            endif

            if EnableGoldVacuum = 1 and DisableVacuums != 1
                if findtype "gold coin" ground -1 -1 12 as droppedmoney and timer "GoldRadar" > 3500
                    overhead " ¼ " 149 droppedmoney
                    settimer "GoldRadar" 0
                endif
                
                while findtype "gold coin" ground -1 -1 2 as droppedmoney and diffhits < 10
                    if diffhits > 30
                        break
                    endif
                    overhead " ² " 149
                    hotkey "Grab Item"
                    wft 2500
                    target droppedmoney
                    wait 250
                    if insysmsg "Invalid or inaccessible item"
                        wait 500
                        @ignore droppedmoney
                    endif
                    wait 250
                endwhile
            endif

            if EnableArrowCleanup = 1 and skill 'Archery' > 50
                while findtype 7163|3903 ground -1 -1 2 as item and diffhits < 30
                    if timer "ArrowCleanupTimer" > 3500
                        if EnableOverheadMessages = 1
                            overhead '[ CLEANUP... ]' 93
                            settimer "ArrowCleanupTimer" 0
                        else
                            overhead ' ² ' 93
                            settimer "ArrowCleanupTimer" 0
                        endif
                    endif
                    hotkey "Grab Item"
                    wft 1000
                    target item
                    wait 250
                endwhile

                if findtype "quiver" self as MyQuiver and timer "QuiverTimer" > 30000
                    while findtype "quiver" self as MyQuiver
                        getlabel MyQuiver MyQuiverdesc
                        wait 250
                        if 'decorative' in MyQuiverdesc
                            @ignore MyQuiver
                            wait 500
                        else
                            break
                        endif
                    endwhile
                    settimer "QuiverTimer" 0
                    menu MyQuiver 0
                    wait 250
                endif

                if findtype 7163 ground -1 -1 10 as bolt and timer "BoltCleanupRadar" > 3500
                    overhead "¼" 93 bolt
                    settimer "BoltCleanupRadar" 0
                endif

                if findtype 3903 ground -1 -1 10 as arrow and timer "ArrowCleanupRadar" > 3500
                    overhead "¼" 37 arrow
                    settimer "ArrowCleanupRadar" 0
                endif
            endif

            if EnableDungeonCleanup = 1 and DisableVacuums != 1
                while findtype "iron ingot%s|board%s|cut up leather|3972|3962|3963|3980|3976|3973|3974|3981" ground -1 -1 2 as item and diffhits < 10
                    if diffhits < 10
                        break
                    endif
                    if EnableOverheadMessages = 1
                        if timer "DungeonCleanup" > 1500
                            overhead '[ CLEANUP... ]' 420
                            settimer "DungeonCleanup" 0
                        endif
                    else
                        if timer "DungeonCleanup" > 1500
                            overhead ' ² ' 420
                            settimer "DungeonCleanup" 0
                        endif
                    endif
                    hotkey "Grab Item"
                    wft 1000
                    target item
                    wait 250
                endwhile

                if findtype "iron ingot%s|board%s|cut up leather|3972|3962|3963|3980|3976|3973|3974|3981" ground -1 -1 15 as dungeonjunk and timer "DungeonCleanupRadar" > 3500
                    overhead " ¼ " 420 dungeonjunk
                    settimer "DungeonCleanupRadar" 0
                endif
            endif
            replay
            
        ///////////////////////
        //  END WARMODE LOOP //
        ///////////////////////


        else
            if not cooldown 'Hiding' and not cooldown 'Stealth'
                if targetexists
                    hotkey 'Cancel Current Target'
                endif
                
                useskill 'Hiding'
                wait 500
                
                if not hidden
                    if insysmsg 'You must wait' and not hidden
                        if EnableOverheadMessages = 1
                            if timer CooldownOverheadTimer > 3500
                                overhead '[ WAITING FOR COOLDOWN... ]' 11
                                wait 500
                                settimer CooldownOverheadTimer 0
                            endif
                        endif
                                
                        if EnableHealPotion = 1 and diffhits >= HealPotionHPdiff and not hidden
                            if findtype "Yellow Potion" self as HealPot
                                getlabel HealPot HealPotlabel
                                if "next" in HealPotlabel
                                    // Do nothing
                                else
                                    @setvar! HealPotionCheck 0

                                    if counttype 3852 self as HealPotCount
                                        @setvar! HealPotionCheck HealPotCount
                                    endif

                                    clearsysmsg
                                    dclicktype 3852
                                    getlabel backpack backpackdesc
                                    wait 250

                                    if HealPotionCheck != counttype 3852 self or insysmsg "potion satchel used"
                                        settimer 'HealPotionTimer' 0
                                        cooldown "Healing Potion" 10000
                                        if EnableOverheadMessages = 1
                                            if insysmsg "potion satchel used"
                                                overhead '[ FREE HEAL POTION ]' 253
                                            else
                                                overhead "[ HEAL POTION ]" 253
                                            endif
                                        endif
                                        clearsysmsg
                                    endif
                                endif
                            else
                                if timer 'yellowMessageTimer' > 4500
                                    overhead "[ NO HEAL POTS! ]" 337
                                    settimer 'yellowMessageTimer' 0
                                endif
                            endif
                        endif

                        if EnablePanaceaPotion = 1
                            if findbuff "bleed" or findbuff "diseased" and skill 'Alchemy' >= 80
                                if not findbuff "panacea potion cooldown"
                                    if findtype "Orange Potion" self
                                        dclicktype "Orange Potion"
                                        wait 500
                                        if findbuff "panacea potion cooldown" and EnableOverheadMessages = 1
                                            overhead "[ PANACEA POTION ]" 2117
                                        endif
                                        cooldown 'Panacea Potion' 30000
                                    else 
                                        if timer 'orangeMessageTimer' > 15000
                                            overhead "[ NO CURE POTS! ]" 337
                                            settimer 'orangeMessageTimer' 0
                                        endif
                                    endif
                                else 
                                    if EnableOverheadMessages = 1 and timer PanaceaOverheadTimer > 15000
                                        overhead '[ PANACEA ON COOLDOWN! ]' 37
                                        settimer PanaceaOverheadTimer 0
                                    endif
                                endif
                            endif
                        endif

                        if EnableCleansingBrews = 1
                            if findbuff "Disease" or findbuff "Bleed"
                                if timer CleansingBrewTimer > 120000
                                    if findtype 50675 self 2935 as CleansingBrew
                                        dclick CleansingBrew
                                        if EnableOverheadMessages = 1
                                            overhead '[ CLEANSING BREW ]' 2117
                                        endif
                                        cooldown 'Cleansing Brew' 120000
                                        settimer CleansingBrewTimer 0
                                        wait 250
                                    else
                                        if timer CleansingBrewOverhead > 15000
                                            overhead "[ NO CLEANSING BREWS! ]" 337
                                            settimer CleansingBrewOverhead 0
                                            settimer CleansingBrewTimer 0
                                        endif
                                    endif
                                else 
                                    if EnableOverheadMessages = 1 and timer CleansingBrewOverhead > 15000
                                        overhead '[ BREW ON COOLDOWN! ]' 37
                                        settimer CleansingBrewOverhead 0
                                    endif
                                endif
                            endif
                        endif

                        if EnableCurePotion = 1
                            while poisoned
                                if findtype "Orange Potion" self
                                    dclicktype "Orange Potion"
                                    if EnableOverheadMessages = 1 and timer 'orangeMessageTimer' > 3500
                                        overhead "[ CURE POTION ]" 44
                                        settimer 'orangeMessageTimer' 0
                                    endif
                                    wait 250
                                else
                                    if timer 'orangeMessageTimer' > 5000
                                        overhead "[ NO CURE POTS! ]" 337
                                        settimer 'orangeMessageTimer' 0
                                    endif
                                endif
                                if diffhits > 40
                                    break
                                endif
                            endwhile
                        endif

                        if diffhits > 0 and not bandaging and not hidden and skill 'healing' > 0
                            if findtype 'clean bandage%s%' self
                                if targetexists
                                    hotkey 'cancel current target'
                                endif
                                hotkey 'Bandage Self'
                                if EnableOverheadMessages = 1
                                    if timer aidsMessageTimer > 5000
                                        overhead "[ BANDAGING... ]" 88
                                        settimer aidsMessageTimer 0
                                    endif
                                endif
                                wait 500
                            else
                                if timer aidsMessageTimer > 5000 and EnableOverheadMessages = 1
                                    overhead "[ OUT OF BANDAGES! ]" 337
                                    settimer aidsMessageTimer 0
                                endif
                            endif
                        endif

                        if EnableRefreshPotion = 1 and diffstam >= RefreshPotionSPdiff and not hidden
                            if findtype "Red Potion" self
                                dclicktype "Red Potion"
                                if EnableOverheadMessages = 1
                                    overhead "[ REFRESH POTION ]" 37
                                endif
                                wait 500
                            else
                                if timer redMessageTimer > 4500
                                    overhead "[ NO REFRESH POTS! ]" 337
                                    settimer redMessageTimer 0
                                endif
                            endif
                            wait 500
                        endif
                    else
                        if EnableSmokeBombWhenAggro = 1
                            if counttype 52149 self > 0
                                if not cooldown 'Smoke Bomb'
                                    clearsysmsg
                                    hotkey 'Smoke Bomb'
                                    wait 500
                                    if insysmsg 'You must wait another'
                                        if EnableOverheadMessages = 1
                                            overhead '[ SMOKE BOMB UNAVAILABLE ]' 333
                                        endif
                                        hotkey 'Toggle War Only'
                                        replay
                                    else
                                        if hidden
                                            if EnableOverheadMessages = 1
                                                overhead '[ SMOKE BOMB! ]' 1790
                                            endif
                                            @setvar! Stealthing 1
                                            cooldown 'Hiding' 0
                                            cooldown 'Stealth' 10000
                                            cooldown 'Smoke Bomb' SmokeBombCooldown
                                        endif
                                        replay
                                    endif
                                else
                                    if EnableOverheadMessages = 1
                                        overhead '[ SMOKE ON COOLDOWN! ]' 33
                                    endif
                                    hotkey 'Toggle War Only'
                                    replay
                                endif
                            else
                                if EnableOverheadMessages = 1
                                    overhead '[ NO SMOKE BOMBS ]' 337
                                endif
                                cooldown 'Hiding' 1000
                                if not hidden
                                    hotkey 'Toggle War Only'
                                    replay
                                endif
                            endif
                        else
                            cooldown 'Hiding' 1000
                            if not hidden
                                hotkey 'Toggle War Only'
                                replay
                            endif
                        endif
                    endif
                endif
                replay
            else
                if EnableOverheadMessages = 1
                    if timer CooldownOverheadTimer > 3500
                        overhead '[ WAITING FOR COOLDOWN... ]' 11
                        wait 500
                        settimer CooldownOverheadTimer 0
                    endif
                endif
                
                if not hidden
                    hotkey 'Toggle War Only'
                    replay
                endif
                                
                if EnableHealPotion = 1 and diffhits >= HealPotionHPdiff and not hidden
                    if findtype "Yellow Potion" self as HealPot
                        getlabel HealPot HealPotlabel
                        if "next" in HealPotlabel
                            // Do nothing
                        else
                            @setvar! HealPotionCheck 0

                            if counttype 3852 self as HealPotCount
                                @setvar! HealPotionCheck HealPotCount
                            endif

                            clearsysmsg
                            dclicktype 3852
                            getlabel backpack backpackdesc
                            wait 250

                            if HealPotionCheck != counttype 3852 self or insysmsg "potion satchel used"
                                settimer 'HealPotionTimer' 0
                                cooldown "Healing Potion" 10000
                                if EnableOverheadMessages = 1
                                    if insysmsg "potion satchel used"
                                        overhead '[ FREE HEAL POTION ]' 253
                                    else
                                        overhead "[ HEAL POTION ]" 253
                                    endif
                                endif
                                clearsysmsg
                            endif
                        endif
                    else
                        if timer 'yellowMessageTimer' > 4500
                            overhead "[ NO HEAL POTS! ]" 337
                            settimer 'yellowMessageTimer' 0
                        endif
                    endif
                endif

                if EnablePanaceaPotion = 1
                    if findbuff "bleed" or findbuff "diseased" and skill 'Alchemy' >= 80
                        if not findbuff "panacea potion cooldown"
                            if findtype "Orange Potion" self
                                dclicktype "Orange Potion"
                                wait 500
                                if findbuff "panacea potion cooldown" and EnableOverheadMessages = 1
                                    overhead "[ PANACEA POTION ]" 2117
                                endif
                                cooldown 'Panacea Potion' 30000
                            else 
                                if timer 'orangeMessageTimer' > 15000
                                    overhead "[ NO CURE POTS! ]" 337
                                    settimer 'orangeMessageTimer' 0
                                endif
                            endif
                        else 
                            if EnableOverheadMessages = 1 and timer PanaceaOverheadTimer > 15000
                                overhead '[ PANACEA ON COOLDOWN! ]' 37
                                settimer PanaceaOverheadTimer 0
                            endif
                        endif
                    endif
                endif

                if EnableCleansingBrews = 1
                    if findbuff "Disease" or findbuff "Bleed"
                        if timer CleansingBrewTimer > 120000
                            if findtype 50675 self 2935 as CleansingBrew
                                dclick CleansingBrew
                                if EnableOverheadMessages = 1
                                    overhead '[ CLEANSING BREW ]' 2117
                                endif
                                cooldown 'Cleansing Brew' 120000
                                settimer CleansingBrewTimer 0
                                wait 250
                            else
                                if timer CleansingBrewOverhead > 15000
                                    overhead "[ NO CLEANSING BREWS! ]" 337
                                    settimer CleansingBrewOverhead 0
                                    settimer CleansingBrewTimer 0
                                endif
                            endif
                        else 
                            if EnableOverheadMessages = 1 and timer CleansingBrewOverhead > 15000
                                overhead '[ BREW ON COOLDOWN! ]' 37
                                settimer CleansingBrewOverhead 0
                            endif
                        endif
                    endif
                endif

                if EnableCurePotion = 1
                    while poisoned
                        if findtype "Orange Potion" self
                            dclicktype "Orange Potion"
                            if EnableOverheadMessages = 1 and timer 'orangeMessageTimer' > 3500
                                overhead "[ CURE POTION ]" 44
                                settimer 'orangeMessageTimer' 0
                            endif
                            wait 250
                        else
                            if timer 'orangeMessageTimer' > 5000
                                overhead "[ NO CURE POTS! ]" 337
                                settimer 'orangeMessageTimer' 0
                            endif
                        endif
                        if diffhits > 40
                            break
                        endif
                    endwhile
                endif

                if diffhits > 0 and not bandaging and not hidden and skill 'healing' > 0
                    if findtype 'clean bandage%s%' self
                        if targetexists
                            hotkey 'cancel current target'
                        endif
                        hotkey 'Bandage Self'
                        if EnableOverheadMessages = 1
                            if timer aidsMessageTimer > 5000
                                overhead "[ BANDAGING... ]" 88
                                settimer aidsMessageTimer 0
                            endif
                        endif
                        wait 500
                    else
                        if timer aidsMessageTimer > 5000 and EnableOverheadMessages = 1
                            overhead "[ OUT OF BANDAGES! ]" 337
                            settimer aidsMessageTimer 0
                        endif
                    endif
                endif

                if EnableRefreshPotion = 1 and diffstam >= RefreshPotionSPdiff and not hidden
                    if findtype "Red Potion" self
                        dclicktype "Red Potion"
                        if EnableOverheadMessages = 1
                            overhead "[ REFRESH POTION ]" 37
                        endif
                        wait 500
                    else
                        if timer redMessageTimer > 4500
                            overhead "[ NO REFRESH POTS! ]" 337
                            settimer redMessageTimer 0
                        endif
                    endif
                    wait 500
                endif
            endif
        endif

    ///////////////////////
    //  END VISIBLE LOOP //
    ///////////////////////


    //////////////////////
    //   HIDDEN LOOP:   //
    //////////////////////

    elseif hidden
        if not cooldown 'Hiding'
            @setvar! Stealthing 1
            getlabel backpack backpacklabel
            clearsysmsg
        else
            @setvar! Stealthing 0
            wait 500
            clearsysmsg
            clearignore
            while hidden and Stealthing != 1
                if insysmsg 'You feel comfortable enough to begin stealthing.' or not cooldown 'Hiding'
                    @setvar! Stealthing 1
                    if EnableOverheadMessages = 1
                        overhead '[ READY TO STEALTH! ]' 69
                    else
                        overhead ' Ï ' 69
                    endif
                    settimer NoTargetTimer 0
                    clearsysmsg
                    break
                endif

                if insysmsg 'You have been revealed'
                    if EnableOverheadMessages = 1
                        overhead '[ !! REVEALED !! ]' 37
                    else 
                        overhead ' Ï ' 37
                    endif
                    clearsysmsg 
                    hotkey 'Toggle War Only' 
                    @setvar! Stealthing 0
                    @setvar! KeepOnTrucking 0
                    cooldown 'Hiding' 5000
                    replay
                endif

                if not hidden
                    @setvar! Stealthing 0
                    @setvar! KeepOnTrucking 0
                    hotkey 'Toggle War Only'
                    replay
                endif

                if timer WaitingForStealthTimer > 2500
                    if EnableOverheadMessages = 1
                        overhead '[ WAITING FOR STEALTH... ]' 153
                    else
                        overhead ' Ï ' 153
                    endif
                    settimer WaitingForStealthTimer 0
                endif

                if insysmsg "world is saving"
                    settimer "WorldSaveTimer" 0
                    if EnableOverheadMessages = 1
                        overhead "[ WORLD SAVING... ]" 253
                    endif
                    while timer "WorldSaveTimer" < 4500
                        if insysmsg "save complete"
                            break
                        endif
                        wait 100
                    endwhile
                    if EnableOverheadMessages = 1
                        overhead "[ SAVE COMPLETE! ]" 253
                    endif
                    clearsysmsg
                endif

                if EnablePKRadar = 1
                    if insysmsg "Now tracking"
                        clearsysmsg
                        if EnableRedAlertOverhead = 1
                            overhead "[ !! RED ALERT !! ]" 337
                            wait 500
                        endif
                        if not hidden
                            if not cooldown 'Hiding'
                                if targetexists
                                    hotkey 'Cancel Current Target'
                                endif

                                useskill "Hiding"
                                wait 500

                                while insysmsg 'You must wait'
                                    clearsysmsg
                                    wait 250
                                    skill 'Hiding'
                                endwhile

                                if hidden
                                    // Do nothing
                                else
                                    if counttype 52149 self > 0
                                        if not cooldown 'Smoke Bomb'
                                            clearsysmsg
                                            hotkey 'Smoke Bomb'
                                            wait 500
                                            if insysmsg 'You must wait another'
                                                if EnableOverheadMessages = 1
                                                    overhead '[ SMOKE BOMB UNAVAILABLE ]' 333
                                                endif
                                                hotkey 'Toggle War Only'
                                                replay
                                            else
                                                if hidden
                                                    if EnableOverheadMessages = 1
                                                        overhead '[ SMOKE BOMB! ]' 1790
                                                    endif
                                                    @setvar! Stealthing 1
                                                    cooldown 'Hiding' 0
                                                    cooldown 'Stealth' 10000
                                                    cooldown 'Smoke Bomb' SmokeBombCooldown
                                                endif
                                                replay
                                            endif
                                        else
                                            if EnableOverheadMessages = 1
                                                overhead '[ SMOKE ON COOLDOWN! ]' 33
                                            endif
                                            hotkey 'Toggle War Only'
                                            replay
                                        endif
                                    else
                                        if EnableOverheadMessages = 1
                                            overhead '[ NO SMOKE BOMBS ]' 337
                                        endif
                                        replay
                                    endif
                                endif
                            endif
                        else
                            if EnableOverheadMessages = 1
                                wait 500
                                overhead "[ ALREADY HIDDEN! ]" 11
                            endif
                            wait 500
                        endif
                        wait 500
                    endif
                endif

                if EnableArcheryWarningMessage = 1 and skill 'Archery' >= 50
                    if findtype 'stubnose crossbow|tower guard crossbow|balestra|heavy crossbow|crossbow' hand
                        @setvar! AMMO 1
                    elseif findtype 'long bow|bow|recurve bow|composite bow' hand
                        @setvar! AMMO 2
                    endif

                    if counttype "crossbow bolt" self < ArcheryLowAmmoWarningAmount and timer "AmmunitionTimer" > 6000 and AMMO = 1
                        overhead "[ AMMO LOW! ]" 37
                        settimer 'AmmunitionTimer' 0
                    endif

                    if counttype "arrow" self < ArcheryLowAmmoWarningAmount and timer 'AmmunitionTimer' > 6000 and AMMO = 2
                        overhead "[ AMMO LOW! ]" 37
                        settimer 'AmmunitionTimer' 0
                    endif
                endif

                if EnableWeightWarningMessage = 1
                    if diffweight < GreenWarningDiffWeight and diffweight > YellowWarningDiffWeight and timer WeightTimer > 6000
                        if EnableOverheadMessages = 1
                            overhead "[ WEIGHT WARNING... ]" 77
                            settimer "WeightTimer" 0
                        else
                            overhead "  " 77
                            settimer "WeightTimer" 0
                        endif
                    elseif diffweight < YellowWarningDiffWeight and diffweight > RedWeightLimitDiffWeight and timer WeightTimer > 6000
                        if EnableOverheadMessages = 1
                            overhead "[ WEIGHT WARNING! ]" 153
                            settimer "WeightTimer" 0
                        else
                            overhead "  " 153
                            settimer "WeightTimer" 0
                        endif
                    elseif diffweight < RedWeightLimitDiffWeight and timer WeightTimer > 6000
                        if EnableOverheadMessages = 1
                            overhead "[ WEIGHT LIMIT REACHED! ]" 37
                            settimer "WeightTimer" 0
                            wait 500
                        else
                            overhead " Ï " 37
                            settimer "WeightTimer" 0
                        endif

                        wait 500

                        if weight > maxweight
                            if EnableDropGoldWhenOverweight = 1
                                if EnableOverheadMessages = 1
                                    wait 1000
                                    overhead "[ OVERWEIGHT! ]" 337
                                endif
                                replay
                            else
                                if EnableOverheadMessages = 1
                                    overhead "[ OVERWEIGHT! ]" 337
                                    wait 2000
                                endif
                                overhead "[ STOPPING SCRIPT! ]" 88
                            endif
                        endif
                    endif
                endif

                if EnableUsePotionKegs = 1 and findtype 'empty bottle%s%' self and findtype 'keg' self and timer 'PotionKegPVPCooldown' > 30000
                    if not timerexists PotionKegTimer
                        createtimer PotionKegTimer
                        settimer PotionKegTimer 5000
                    endif

                    @setvar! PotionStockCheck 0

                    while PotionStockCheck < 8 and findtype 'empty bottle%s%' self

                        if PotionStockCheck = 0 and HealingPotionAmount != 0
                            @setvar! PotionType 3852
                            @setvar! KegColour 253
                            @setvar! PotionAmounttoFill HealingPotionAmount
                            @setvar! PotionStockCheck 1
                        elseif PotionStockCheck = 1 and CurePotionAmount != 0
                            @setvar! PotionType 3847
                            @setvar! KegColour 44
                            @setvar! PotionAmounttoFill CurePotionAmount
                            @setvar! PotionStockCheck 2
                        elseif PotionStockCheck = 2 and RefreshPotionAmount != 0
                            @setvar! PotionType 3851
                            @setvar! KegColour 37
                            @setvar! PotionAmounttoFill RefreshPotionAmount
                            @setvar! PotionStockCheck 3
                        elseif PotionStockCheck = 3 and StrengthPotionAmount != 0
                            @setvar! PotionType 3849
                            @setvar! KegColour 956
                            @setvar! PotionAmounttoFill StrengthPotionAmount
                            @setvar! PotionStockCheck 4
                        elseif PotionStockCheck = 4 and AgilityPotionAmount != 0
                            @setvar! PotionType 3848
                            @setvar! KegColour 93
                            @setvar! PotionAmounttoFill AgilityPotionAmount
                            @setvar! PotionStockCheck 5
                        elseif PotionStockCheck = 5 and ResistPotionAmount != 0
                            @setvar! PotionType 3846
                            @setvar! KegColour 1109
                            @setvar! PotionAmounttoFill ResistPotionAmount
                            @setvar! PotionStockCheck 6
                        elseif PotionStockCheck = 6 and PoisonPotionAmount != 0
                            @setvar! PotionType 3850
                            @setvar! KegColour 363
                            @setvar! PotionAmounttoFill PoisonPotionAmount
                            @setvar! PotionStockCheck 7
                        elseif PotionStockCheck = 7 and ExplosionPotionAmount != 0
                            @setvar! PotionType 3853
                            @setvar! KegColour 419
                            @setvar! PotionAmounttoFill ExplosionPotionAmount
                            @setvar! PotionStockCheck 8
                        else
                            break
                        endif

                        while counttype PotionType self < PotionAmounttoFill

                            if not findtype 'empty bottle%s%' self
                                if EnableOverheadMessages = 1 and timer 'PotionKegTimer' > 5000
                                    overhead "[ NO EMPTY BOTTLES... ]" 337
                                    settimer 'PotionKegTimer' 0
                                endif
                                break
                            endif
                            if diffhits > 10
                                break
                            endif
                            if findtype 'keg' self KegColour as myKeg
                                dclick myKeg
                                wait 250
                                if EnableOverheadMessages = 1
                                    if timer 'PotionKegTimer' > 2000
                                        overhead '[ FILLING POTS... ]' KegColour
                                        settimer 'PotionKegTimer' 0
                                    endif
                                endif
                            else
                                if EnableOverheadMessages = 1 and timer 'PotionKegTimer' > 5000
                                    overhead "[ NO KEG TO USE... ]" KegColour
                                    settimer 'PotionKegTimer' 0
                                endif
                                break
                            endif
                            if insysmsg "You have been in combat with another player"
                                settimer "PotionKegPVPCooldown" 0
                                break
                            endif
                        endwhile

                        if counttype PotionType self < PotionAmounttoFill and not findtype 'empty bottle%s%' self
                            if EnableOverheadMessages = 1 and timer 'PotionKegTimer' > 5000
                                overhead "[ NO EMPTY BOTTLES... ]" 337
                                settimer 'PotionKegTimer' 0
                            endif
                            break
                        endif
                    endwhile
                endif

                if EnableWeaponCheck = 1
                    if not find MySlowWeapon hand
                        clearignore
                        if skill 'Mace Fighting' >= 50
                            if not findtype 'great mace|giant club|giant spiked club|sledgehammer' self
                                if timer NoWeaponOverheadTimer > 5000
                                    overhead "[ NO WEAPON! ]" 337
                                    settimer NoWeaponOverheadTimer 0
                                endif
                            else
                                if not findtype 'great mace|giant club|giant spiked club|sledgehammer' hand
                                    if findtype 'great mace|giant club|giant spiked club|sledgehammer' backpack as  MySlowWeapon
                                        for 10
                                        getlabel  MySlowWeapon WeaponLabel
                                        wait 250
                                        if "aspect" in WeaponLabel
                                            break
                                        elseif "unidentified" in WeaponLabel
                                            @ignore  MySlowWeapon
                                            wait 250
                                        else
                                            @ignore  MySlowWeapon
                                            wait 250
                                        endif
                                        if findtype 'great mace|giant club|giant spiked club|sledgehammer' backpack as  MySlowWeapon
                                            getlabel  MySlowWeapon WeaponLabel
                                            wait 250
                                        endif
                                        endfor
                                        wait 250
                                        dclick  MySlowWeapon
                                        wait 500
                                    endif
                                endif
                            endif
                        elseif skill 'Archery' >= 50
                            if not findtype 'heavy crossbow|long bow|tower guard crossbow' self
                                if timer NoWeaponOverheadTimer > 5000
                                    overhead "[ NO WEAPON! ]" 337
                                    settimer NoWeaponOverheadTimer 0
                                endif
                            else
                                if not findtype 'heavy crossbow|long bow|tower guard crossbow' hand
                                    if findtype 'heavy crossbow|long bow|tower guard crossbow' backpack as  MySlowWeapon
                                        for 10
                                        getlabel  MySlowWeapon WeaponLabel
                                        wait 250
                                        if "aspect" in WeaponLabel
                                            break
                                        elseif "unidentified" in WeaponLabel
                                            @ignore  MySlowWeapon
                                            wait 250
                                        else
                                            @ignore  MySlowWeapon
                                            wait 250
                                        endif
                                        if findtype 'heavy crossbow|long bow|tower guard crossbow' backpack as  MySlowWeapon
                                            getlabel  MySlowWeapon WeaponLabel
                                            wait 250
                                        endif
                                        endfor
                                        wait 250
                                        dclick  MySlowWeapon
                                        wait 500
                                    endif
                                endif
                            endif
                        endif
                    endif
                endif

                if not findbuff 'food satisfaction' and findtype "tray" self and EnableEatingFood = 1
                    if findtype "tray" self as Food
                        if EnableOverheadMessages = 1
                            overhead "[ EATING FOOD... ]" 88
                        endif
                        dclick Food
                        wait 500
                    endif
                endif

                if EnableAutoSatchels = 1
                    if findtype "3962|3963|3972|3973|3974|3976|3980|3981" backpack and findtype "reagent satchel" self as MyWizardBag
                        while findtype "reagent satchel" self as MyWizardBag
                            getlabel MyWizardBag MyWizardBagdesc
                            if 'decorative' in MyWizardBagdesc
                                @ignore MyWizardBag
                            else
                                break
                            endif
                        endwhile
                        if timer "WizardSatchelTimer" > 60000
                            menu MyWizardBag 0
                            wait 250
                            settimer "WizardSatchelTimer" 0
                        endif
                    endif
                    
                    if findtype "Yellow Potion|Orange Potion|Red Potion|White Potion|Blue Potion|Black Potion|" backpack and findtype 31262 self as MyPotBag
                        if timer "PotionSatchelTimer" > 60000
                            menu MyPotBag 0
                            wait 250
                            settimer "PotionSatchelTimer" 0
                        endif
                    endif
                endif

                if not varexist "NoLockbox"
                    @setvar! NoLockbox 0
                endif

                if findtype "wooden box" self and findtype "copper key" self
                    @setvar! NoLockbox 0
                else
                    @setvar! NoLockbox 1
                endif

                if EnableIDandRecycleMagicItems = 1 and DisableRecycler != 1 and diffweight < IDandRecycleWeightdiff and timer MagicRecyclerCooldown > 300000
                    if findtype "3997|4148|4032|7864" self as RecyclingTool
                        hotkey "Cancel Current Target"
                        settimer MagicRecyclerCooldown 0
                        
                        if not find MyContainerIDWand self and findtype 20495 self as NewContainterIDWand
                            @setvar! MyContainerIDWand NewContainterIDWand
                        endif

                        if skill "Item ID" = 120 or find MyContainerIDWand self
                            clearsysmsg
                            clearignore

                            if EnablePutLootinLockBox = 1 and EnablePutLootinLockBoxFailed != 1
                                if findtype "wooden box" self as lockbox
                                    if findtype "copper key" self as key
                                        getlabel lockbox lockboxlabel
                                        wait 250
                                        @setvar! EnablePutLootinLockBoxFailed 0
                                        if 'items' in lockboxlabel
                                            // Do nothing
                                        else
                                            dclick key
                                            wft 1500
                                            target lockbox
                                            wait 250
                                            overhead '[loot box unlocked]' 2114
                                        endif
                                    else
                                        if EnableOverheadMessages = 1
                                            overhead '[ KEY IS MISSING! ]' 337
                                            @setvar! EnablePutLootinLockBox 0
                                            wait 250
                                        endif
                                    endif
                                else
                                    if EnableOverheadMessages = 1
                                        overhead '[ NO LOCKBOX FOUND! ]' 337
                                        @setvar! EnablePutLootinLockBoxFailed 1
                                        wait 250
                                    endif
                                endif
                            endif

                            if skill "Item ID" = 120
                                skill "Item ID"
                                wait 500
                            elseif find MyContainerIDWand self
                                dclick MyContainerIDWand
                                wait 500
                            endif

                            if insysmsg 'What do you wish to appraise and identify?'
                                if EnablePutLootinLockBox = 1
                                    if findtype 'wooden box' self as lockbox
                                        target lockbox
                                    else 
                                        overhead '[ NO LOCKBOX FOUND ]' 337
                                        @setvar! EnablePutLootinLockBoxFailed 1
                                    endif
                                    wait 500
                                elseif EnablePutLootinLockBox = 0
                                    overhead "[ SELECT CONTAINER TO ID... ]" 88
                                    while targetexists
                                        wait 100
                                    endwhile
                                endif
                            endif

                            wait 500

                            if EnableOverheadMessages = 1
                                overhead "[ IDENTIFYING ITEMS... ]" 88
                            endif

                            if insysmsg "No unidentified items found."
                                if EnableOverheadMessages = 1
                                    wait 1000
                                    overhead "[ NO ITEMS TO ID ]" 337
                                endif
                            elseif insysmsg "That is not a container."
                                if EnableOverheadMessages = 1
                                    wait 1000
                                    overhead "[ INVALID CONTAINER ]" 337
                                endif
                            elseif insysmsg "You must wait a few moments to use another skill"
                                if EnableOverheadMessages = 1
                                    wait 1000
                                    overhead "[ SKILL COOLDOWN... ]" 2117
                                endif
                            else
                                wait 500
                            endif

                            while findtype 5056|5059|5060|5061|5063|5070|5074|5075|5076|5078|5085|5089|5090|5101|5103|5105|5106|5129|5131|5132|5135|5138|5139|5142|5143|5144|5146|5201|5203|5204|5205|5207|7169|7170|7173|7175|7177|7179|7181|7610|7947|31003|31004|31005|31006|31007|31008|31009|31010|31011|31012|31015|31191|31017|31019|31021|31023|31025|31027|31029|31031|31033|31035|31037|31038|31041|31043|31045|31047|31049|31051|31053|31055|3834|3740|3742|3762|3763|10245|20006|20008|20010|20012|20014|20016|7026|7027|7029|7031|7033|7034|7035|7107|7109|31002|31130|3920|5042|5117|30990|30993|30994|30995|31184|31186|3719|3938|5121|5123|5125|30989|30992|30996|30997|30998|31176|31188|3568|3713|3721|3932|5040|5044|5112|5127|5177|5179|5181|30991|30999|31000|31001|31014|31178|31180|31182|3909|3911|3913|3915|3917|3934|3937|5046|5049|5115|5119|5182|5185|5187|30988|31128|31190|22187|31141|31142|31169|31172 backpack as UnidentifiedItem
                                getlabel UnidentifiedItem UnidentifiedItemlabel
                                if "aspect" in UnidentifiedItemlabel or "training" in UnidentifiedItemlabel or "vanquishing" in UnidentifiedItemlabel or "supremely" in UnidentifiedItemlabel or "slaying" in UnidentifiedItemlabel or "enticement" in UnidentifiedItemlabel or "invulnerability" in UnidentifiedItemlabel or "power" in UnidentifiedItemlabel or "exceedingly accurate force" in UnidentifiedItemlabel or "exceedingly potent" in UnidentifiedItemlabel or "valorite" in UnidentifiedItemlabel or "valehide" in UnidentifiedItemlabel or "valewood" in UnidentifiedItemlabel or "avarite" in UnidentifiedItemlabel or "avarhide" in UnidentifiedItemlabel or "avarwood" in UnidentifiedItemlabel or "verite" in UnidentifiedItemlabel or "verehide" in UnidentifiedItemlabel or "verewood" in UnidentifiedItemlabel or "agapite" in UnidentifiedItemlabel or "rosehide" in UnidentifiedItemlabel or "rosewood" in UnidentifiedItemlabel or "fortification" in UnidentifiedItemlabel
                                    @ignore UnidentifiedItem
                                elseif "durable" in UnidentifiedItemlabel or "substantial" in UnidentifiedItemlabel or "massive" in UnidentifiedItemlabel or "fortified" in UnidentifiedItemlabel or "indestructible" in UnidentifiedItemlabel or "exceptional" in UnidentifiedItemlabel or "accurate" in UnidentifiedItemlabel or "surpassingly" in UnidentifiedItemlabel or "eminently" in UnidentifiedItemlabel or "exceedingly" in UnidentifiedItemlabel or "ruin" in UnidentifiedItemlabel or "might" in UnidentifiedItemlabel or "force" in UnidentifiedItemlabel or "power" in UnidentifiedItemlabel or "mastercrafted" in UnidentifiedItemlabel or "defense" in UnidentifiedItemlabel or "guarding" in UnidentifiedItemlabel or "hardening" in UnidentifiedItemlabel or "potent" in UnidentifiedItemlabel or "melodious" in UnidentifiedItemlabel
                                    while not gumpexists 949095101
                                        while queued
                                            // Do nothing
                                        endwhile
                                        dclick RecyclingTool
                                        waitforgump 949095101 1000
                                    endwhile

                                    while not ingump "Recycle Single Item" 949095101
                                        gumpresponse 2
                                        waitforgump 949095101 1000
                                    endwhile

                                    if EnableOverheadMessages = 1
                                        if timer RecyclingJunkTimer > 3500
                                            overhead '[ RECYCLING JUNK... ]' 1182
                                            settimer RecyclingJunkTimer 0
                                        endif
                                    endif

                                    gumpresponse 3
                                    waitforgump 949095101 1000
                                    target UnidentifiedItem
                                    getlabel backpack backpacklabel
                                    wait 250
                                    gumpclose 949095101
                                else
                                    @ignore UnidentifiedItem
                                endif

                                if skill "Item ID" = 120
                                    // Do nothing
                                elseif not find MyContainerIDWand self
                                    break
                                endif
                            endwhile

                            if gumpexists 949095101
                                gumpclose 949095101
                            endif
                        else
                            if EnableOverheadMessages = 1
                                overhead '[ NO CONTAINER ID WAND ]' 337
                            endif
                        endif

                        if targetexists
                            hotkey "Cancel Current Target"
                        endif

                        if EnableAutoConsumeArcaneEssence = 1 and findtype 3901 self as MyArcaneEssence
                            dclick MyArcaneEssence
                            wft 1500
                            target self
                            if EnableOverheadMessages = 1
                                overhead '[ CONSUMING ESSENCE... ]' 12
                            endif
                            wait 500
                        endif

                        if DropResourcesAfterRecycle = 1
                            while findtype "iron ingot%s|board%s|cut up leather|cut%s% of raw ribs|raw chicken leg%s%|feather%s" self as ResourcestoDrop
                                if diffhits > 30
                                    break
                                endif
                                if EnableOverheadMessages = 1
                                    if timer "DungeonCleanup" > 2500
                                        overhead '[ DROPPING RESOURCES... ]' 420
                                        settimer "DungeonCleanup" 0
                                    endif
                                endif
                                lift ResourcestoDrop 60000
                                drop 0
                                wait 500
                                while queued
                                    // Do nothing
                                endwhile
                            endwhile
                        endif

                        if EnableOverheadMessages = 1
                            overhead '[ RECYCLE COMPLETE! ]' 2114
                        endif
                        
                        settimer MagicRecyclerCooldown 0
                        hotkey "Cancel Current Target"

                        if EnablePutLootinLockBox = 1
                            if findtype "wooden box" self as lockbox
                                if findtype "copper key" self as key
                                    getlabel lockbox lockboxlabel
                                    wait 250
                                    if 'items' in lockboxlabel
                                        dclick key
                                        wft 1500
                                        target lockbox
                                        wait 250
                                        overhead '[loot box locked]' 2117
                                    else
                                        // Do nothing
                                    endif
                                else
                                    if EnableOverheadMessages = 1
                                        overhead '[ KEY IS MISSING! ]' 337
                                        @setvar! EnablePutLootinLockBox 0
                                        wait 250
                                    endif
                                endif
                            else
                                if EnableOverheadMessages = 1
                                    overhead '[ NO LOCKBOX FOUND! ]' 337
                                    @setvar! EnablePutLootinLockBox 0
                                    wait 250
                                endif
                            endif
                        endif

                        @clearignore
                    else
                        if EnableOverheadMessages = 1
                            overhead '[ NO RECYCLING TOOL! ]' 337
                        endif
                        @setvar! DisableRecycler 1
                    endif
                endif

                if EnablePutLootinLockBox = 1 and NoLockbox != 1 and timer LootCooldownTimer > 10000
                    if not findtype "wooden box" self or not findtype "copper key" self
                        if EnableOverheadMessages = 1
                            overhead "[ NO LOCKBOX FOUND! ]" 337
                        endif
                        @setvar! NoLockbox 1
                        wait 1500
                    elseif counttype 2474 self > 1 or counttype 4110 self > 1
                        if EnableOverheadMessages = 1
                            overhead "[ TOO MANY LOCKBOXES/KEYS! ]" 337
                        endif
                        @setvar! NoLockbox 1
                        wait 1500
                    else
                        if findtype "wooden box" self as lockbox and findtype "copper key" self as key
                            if EnableWizardHatStealthTrick = 1
                                @ignore MyHelmet
                                @ignore MagicWizardHat
                            endif
                            @ignore  MySlowWeapon
                            @ignore MyFastWeapon
                            if findtype '30988|7109|24343|3834|31017|31019|31021|31023|31025|31027|31029|31031|31033|31035|31037|31038|31041|31043|31045|31047|31049|31051|31053|31055|3821|31169|31172|31190|31128|31142|31141|31002|31130|31000|31001|31180|31182|31178|30991|30999|31014|20014|20012|20010|20008|20006|30992|30997|31176|31188|30998|30989|30996|30995|31186|31184|30994|30990|30993|37181|4026|4025|31010|31008|31007|31006|31015|31005|31009|31012|31011|31004|31003|31191|39911|17686|31014|30994|31142|31190|24434|43206|29363|43166|22336|29348|17087|3985|8826|3827|29030|3836|5981|4248|5359|3839|3838|3843|2597|29036|48407|3865|3859|3885|3856|3878|3877|3873|3861|3862|576|5123|7177|7027|3920|5131|5179|5075|5060|5076|5042|10245|3938|3913|7169|3909|5063|5089|7170|7033|3762|5040|5103|5117|7181|7029|3568|6264|3742|5139|6263|7026|5125|3740|5121|5204|5105|5185|5078|5115|7175|5059|7034|3713|3915|5112|5070|5049|5205|5046|7035|3911|7179|5106|5143|3573|3719|5177|7610|5181|3917|5132|7031|5207|5056|5085|3763|5129|5187|3721|5138|3570|5101|5061|5074|5142|5182|5146|6265|5090|5203|5044|5144|3932|5201|5127|3572|7173|5135|3937|3571|22326|27611|9917|3821|5356|8455|5362|45315|8454|22187|5901|126867981|7982|7983|7984|7985|7986|7987|7988|7989|7990|7991|7992|7993|7994|7995|7996|7997|7998|7999|8000|8001|8002|8003|8004|8005|8006|8007|8008|8009|8010|8011|8012|8013|8014|8015|8016|8017|8018|8019|8020|8021|8022|8023|8024|8025|8026|8027|8028|8029|8030|8031|8032|8033|8034|8035|8036|8037|8038|8039|8040|8041|8042|8033|8044|39889|39891|39892|39896|39897|39898|39905|39909|39911|39912|39916|39917|39918|3843|3838|3839|3842|15296|15297|29025|29034|29036|2472|2475|3648|3649|3650|3651|3708|3712|29832|29833|7107' backpack as loottostore
                                getlabel lockbox lockboxLabel
                                wait 250
                                if "items" in lockboxLabel
                                    if EnableOverheadMessages = 1
                                        if timer "STORELOOT" > 3500
                                            overhead "[ SECURING LOOT... ]" 88
                                            settimer "STORELOOT" 0
                                        endif
                                    endif
                                else
                                    if EnableOverheadMessages = 1
                                        overhead "[loot box unlocked]" 2114
                                    endif
                                    dclick key
                                    wft 1500
                                    target lockbox
                                    wait 250
                                    if EnableOverheadMessages = 1
                                        if timer "STORELOOT" > 3500
                                            overhead "[ SECURING LOOT... ]" 88
                                            settimer "STORELOOT" 0
                                        endif
                                    endif
                                endif
                                while findtype '30988|7109|24343|3834|31017|31019|31021|31023|31025|31027|31029|31031|31033|31035|31037|31038|31041|31043|31045|31047|31049|31051|31053|31055|3821|31169|31172|31190|31128|31142|31141|31002|31130|31000|31001|31180|31182|31178|30991|30999|31014|20014|20012|20010|20008|20006|30992|30997|31176|31188|30998|30989|30996|30995|31186|31184|30994|30990|30993|37181|4026|4025|31010|31008|31007|31006|31015|31005|31009|31012|31011|31004|31003|31191|39911|17686|31014|30994|31142|31190|24434|43206|29363|43166|22336|29348|17087|3985|8826|3827|29030|3836|5981|4248|5359|3839|3838|3843|2597|29036|48407|3865|3859|3885|3856|3878|3877|3873|3861|3862|576|5123|7177|7027|3920|5131|5179|5075|5060|5076|5042|10245|3938|3913|7169|3909|5063|5089|7170|7033|3762|5040|5103|5117|7181|7029|3568|6264|3742|5139|6263|7026|5125|3740|5121|5204|5105|5185|5078|5115|7175|5059|7034|3713|3915|5112|5070|5049|5205|5046|7035|3911|7179|5106|5143|3573|3719|5177|7610|5181|3917|5132|7031|5207|5056|5085|3763|5129|5187|3721|5138|3570|5101|5061|5074|5142|5182|5146|6265|5090|5203|5044|5144|3932|5201|5127|3572|7173|5135|3937|3571|22326|27611|9917|3821|5356|8455|5362|45315|8454|22187|5901|126867981|7982|7983|7984|7985|7986|7987|7988|7989|7990|7991|7992|7993|7994|7995|7996|7997|7998|7999|8000|8001|8002|8003|8004|8005|8006|8007|8008|8009|8010|8011|8012|8013|8014|8015|8016|8017|8018|8019|8020|8021|8022|8023|8024|8025|8026|8027|8028|8029|8030|8031|8032|8033|8034|8035|8036|8037|8038|8039|8040|8041|8042|8033|8044|39889|39891|39892|39896|39897|39898|39905|39909|39911|39912|39916|39917|39918|3843|3838|3839|3842|15296|15297|29025|29034|29036|2472|2475|3648|3649|3650|3651|3708|3712|29832|29833|7107' backpack as loottostore
                                    if find loottostore lockbox
                                        @ignore loottostore
                                    else
                                        clearsysmsg
                                        lift loottostore 9999
                                        drop lockbox -1 -1 -1
                                        wait 500
                                        if insysmsg "appears to be locked"
                                            dclick key
                                            wft 1500
                                            target lockbox
                                            wait 250
                                            clearsysmsg
                                        endif
                                    endif
                                endwhile
                                dclick key
                                wft 1500
                                target lockbox
                                if EnableOverheadMessages = 1
                                    overhead "[loot box locked]" 2117
                                endif
                                @setvar! NeedtoSecureLoot 0
                                settimer LootCooldownTimer 0
                                clearignore
                            endif
                            getlabel lockbox lockboxLabel
                            wait 250
                            if "items" in lockboxLabel
                                dclick key
                                wft 1500
                                target lockbox
                                @setvar! NeedtoSecureLoot 0
                                settimer LootTimer 0
                                settimer LootCooldownTimer 0
                                clearignore
                            endif
                        endif
                    endif
                endif

                if not hidden
                    clearsysmsg
                    hotkey 'Toggle War Only'
                    replay
                endif

                if Stealthing = 1
                    wait 250
                    break
                endif
            endwhile

            if hidden and not cooldown 'Hiding'
                @setvar! Stealthing 1
                wait 250
            endif

            if insysmsg 'You have been revealed'
                if EnableOverheadMessages = 1
                    overhead '[ !! REVEALED !! ]' 37
                else 
                    overhead ' Ï ' 37
                endif
                clearsysmsg 
                hotkey 'Toggle War Only' 
                @setvar! Stealthing 0
                @setvar! KeepOnTrucking 0
                cooldown 'Hiding' 5000
                replay
            endif

            if not hidden
                @setvar! Stealthing 0
                @setvar! KeepOnTrucking 0
                hotkey 'Toggle War Only'
                replay
            endif
        endif
    endif

    ///////////////////////
    //  END HIDDEN LOOP  //
    ///////////////////////


    getlabel backpack backpacklabel
    @setvar! TargetAcquired 0


    /////////////////////
    //  STEALTH LOOP:  //
    /////////////////////

    while hidden and Stealthing = 1 and TargetAcquired != 1
        if insysmsg 'You begin to move quietly.'
            if EnableOverheadMessages = 1
                overhead '[ STEALTHING... ]' 69
            else
                overhead ' Ï ' 69
            endif
            settimer NoTargetTimer 0
            settimer KeepOnTruckingTimer 0
            clearsysmsg
            @setvar! KeepOnTrucking 0
            cooldown 'Stealth' 10000
        endif
        
        if timer FindTargetTimer > 500
            hotkey "Target Closest Grey Monster"
            getlabel backpack backpacklabel
            wait 100
            if insysmsg "no one matching"
                if timer NoTargetTimer > 3000
                    if EnableOverheadMessages = 1
                        overhead "[ NOTHING TO TARGET... ]" 2338
                    endif
                    settimer NoTargetTimer 0
                endif
                @setvar! TargetAcquired 0
                clearsysmsg
            else
                @setvar! CurrentTarget lasttarget
                @setvar! TargetAcquired 1
                getlabel backpack backpacklabel
            endif
            settimer FindTargetTimer 0
        endif

        if TargetAcquired = 1
            getlabel CurrentTarget descTarget
            if cooldown "Hiding"
                if timer TargetTimer > 3000
                    if "Paragon" in descTarget
                if EnableOverheadMessages = 1
                            overhead "[ PARAGON! ]" 12 CurrentTarget
                        endif
                        overhead " ¼ " 12 CurrentTarget
                    else
                        if EnableOverheadMessages = 1
                            overhead "[ TARGET ACQUIRED ]" 88 CurrentTarget
                        endif
                        overhead " ¼ " 88 CurrentTarget
                    endif
                    settimer TargetTimer 0
                    break
                endif
            elseif cooldown "Stealth"
                if timer TargetTimer > 3000
                    if "Paragon" in descTarget
                        if EnableOverheadMessages = 1
                            overhead "[ PARAGON! ]" 12 CurrentTarget
                        endif
                        overhead " ¼ " 12 CurrentTarget
                    else
                        if EnableOverheadMessages = 1
                            overhead "[ TARGET ACQUIRED ]" 88 CurrentTarget
                        endif
                        overhead " ¼ " 88 CurrentTarget
                    endif
                    settimer TargetTimer 0
                    break
                endif
            else
                if timer TargetTimer > 3000
                    if "Paragon" in descTarget
                        if EnableOverheadMessages = 1
                            overhead "[ PARAGON! ]" 12 CurrentTarget
                        endif
                        overhead " ¼ " 12 CurrentTarget
                    else
                        if EnableOverheadMessages = 1
                            overhead "[ TARGET ACQUIRED ]" 88 CurrentTarget
                        endif
                        overhead " ¼ " 88 CurrentTarget
                    endif
                    settimer TargetTimer 0
                    break
                endif
            endif
        endif

        if TargetAcquired = 1
            break
        endif

        if insysmsg 'You have been revealed'
            if EnableOverheadMessages = 1
                overhead '[ !! REVEALED !! ]' 37
            else 
                overhead ' Ï ' 37
            endif
            clearsysmsg 
            hotkey 'Toggle War Only' 
            @setvar! Stealthing 0
            @setvar! KeepOnTrucking 0
            cooldown 'Hiding' 5000
            replay
        endif

        if not hidden
            @setvar! Stealthing 0
            @setvar! KeepOnTrucking 0
            hotkey 'Toggle War Only'
            replay
        endif

        if insysmsg "world is saving"
            settimer "WorldSaveTimer" 0
            if EnableOverheadMessages = 1
                overhead "[ WORLD SAVING... ]" 253
            endif
            while timer "WorldSaveTimer" < 4500
                if insysmsg "save complete"
                    break
                endif
                wait 100
            endwhile
            if EnableOverheadMessages = 1
                overhead "[ SAVE COMPLETE! ]" 253
            endif
        endif

        if skill 'Tracking' > 50
            if not findbuff 'tracking'
                while not gumpexists 4267467659
                    useskill 'tracking'
                    wait 250
                endwhile
                if gumpexists 4267467659
                    while not insysmsg "You will now hunt all hostile players."
                        gumpresponse 8 4267467659
                        waitforgump 4267467659 5000
                    endwhile
                    gumpresponse 6 4267467659
                    wait 500
                    clearsysmsg
                endif
                gumpclose 4267467659
                if EnableOverheadMessages = 1
                    overhead "[ TRACKING ACTIVATED! ]" 334
                endif
            endif
        endif

        if insysmsg 'You begin to move quietly.'
            clearsysmsg
            @setvar! KeepOnTrucking 0
            cooldown 'Stealth' 10000
        endif

        if insysmsg 'You feel ready to continue stealthing.'
            if timer KeepOnTruckingTimer > 500
                if EnableOverheadMessages = 1
                    overhead '[ KEEP GOING! ]' 69
                else
                    overhead ' Ï ' 69
                endif
                settimer NoTargetTimer 0
                settimer KeepOnTruckingTimer 0
            endif
            clearsysmsg
            @setvar! KeepOnTrucking 1
            wait 250
            cooldown 'Stealth' 10000
        endif

        if insysmsg 'You will automatically stealth when out of steps.'
            @setvar! KeepOnTrucking 1
            wait 250
            getlabel backpack backpacklabel
            clearsysmsg
        endif

        if insysmsg 'You have 3 stealth steps remaining.' and KeepOnTrucking = 0
            if EnableOverheadMessages = 1
                overhead '[ 3 STEPS REMAINING ]' 153
            else
                overhead ' Ï ' 153
            endif
            settimer NoTargetTimer 0
        endif

        if insysmsg 'You have 2 stealth steps remaining.'
            if KeepOnTrucking = 1
                if timer KeepOnTruckingTimer > 2500
                    if EnableOverheadMessages = 1
                        overhead '[ KEEP GOING! ]' 69
                    else
                        overhead ' Ï ' 69
                    endif
                    settimer NoTargetTimer 0
                    settimer KeepOnTruckingTimer 0
                endif
            elseif insysmsg 'You feel ready to continue stealthing.'
                if timer KeepOnTruckingTimer > 2500
                    if EnableOverheadMessages = 1
                        overhead '[ KEEP GOING! ]' 69
                    else
                        overhead ' Ï ' 69
                    endif
                    settimer NoTargetTimer 0
                    settimer KeepOnTruckingTimer 0
                endif
            else
                if EnableOverheadMessages = 1
                    overhead '[ 2 STEPS REMAINING ]' 44
                else
                    overhead ' Ï ' 44
                endif
                settimer NoTargetTimer 0
            endif
        endif

        if insysmsg 'You have 1 stealth steps remaining.'
            if KeepOnTrucking = 1
                if timer KeepOnTruckingTimer > 2500
                    if EnableOverheadMessages = 1
                        overhead '[ KEEP GOING! ]' 69
                    else
                        overhead ' Ï ' 69
                    endif
                    settimer NoTargetTimer 0
                    settimer KeepOnTruckingTimer 0
                endif
            elseif insysmsg 'You feel ready to continue stealthing.'
                if timer KeepOnTruckingTimer > 2500
                    if EnableOverheadMessages = 1
                        overhead '[ KEEP GOING! ]' 69
                    else
                        overhead ' Ï ' 69
                    endif
                    settimer NoTargetTimer 0
                    settimer KeepOnTruckingTimer 0
                endif
            else
                if EnableOverheadMessages = 1
                    overhead '[ 1 STEP REMAINING ]' 333
                else
                    overhead ' Ï ' 333
                endif
                settimer NoTargetTimer 0
            endif
        endif

        if insysmsg 'You have 0 stealth steps remaining.'
            if KeepOnTrucking = 1
                if timer KeepOnTruckingTimer > 2500
                    if EnableOverheadMessages = 1
                        overhead '[ KEEP GOING! ]' 69
                    else
                        overhead ' Ï ' 69
                    endif
                    settimer NoTargetTimer 0
                    settimer KeepOnTruckingTimer 0
                endif
            elseif insysmsg 'You feel ready to continue stealthing.'
                if timer KeepOnTruckingTimer > 2500
                    if EnableOverheadMessages = 1
                        overhead '[ KEEP GOING! ]' 69
                    else
                        overhead ' Ï ' 69
                    endif
                    settimer NoTargetTimer 0
                    settimer KeepOnTruckingTimer 0
                endif
            else
                while not insysmsg 'You feel ready to continue stealthing.'
                    if timer DoNotMoveTimer > 500
                        if EnableOverheadMessages = 1
                            overhead '[ !!! STOP !!! ]' 37
                        else
                            overhead ' Ï ' 37
                        endif
                        settimer NoTargetTimer 0
                        settimer DoNotMoveTimer 0
                    endif
                    wait 250
                    if insysmsg 'You feel ready to continue stealthing.'
                        if timer KeepOnTruckingTimer > 500
                            if EnableOverheadMessages = 1
                                overhead '[ KEEP GOING! ]' 69
                            else
                                overhead ' Ï ' 69
                            endif
                            settimer NoTargetTimer 0
                            settimer KeepOnTruckingTimer 0
                        endif
                        cooldown 'Stealth' 10000
                        break
                    endif
                    
                    if not hidden
                        if EnableOverheadMessages = 1
                            overhead '[ STEALTH ENDED! ]' 2117
                        else
                            overhead ' Ï ' 2117
                        endif
                        settimer NoTargetTimer 0
                        @setvar! Stealthing 0
                        @setvar! KeepOnTrucking 0
                        hotkey 'Toggle War Only'
                        replay
                    endif
                endwhile
            endif
        endif

        if insysmsg 'You have been revealed'
            if EnableOverheadMessages = 1
                overhead '[ !! REVEALED !! ]' 37
            else 
                overhead ' Ï ' 37
            endif
            clearsysmsg 
            hotkey 'Toggle War Only' 
            @setvar! Stealthing 0
            @setvar! KeepOnTrucking 0
            cooldown 'Hiding' 5000
            replay
        endif

        if not hidden
            @setvar! Stealthing 0
            @setvar! KeepOnTrucking 0
            hotkey 'Toggle War Only'
            replay
        endif

        if insysmsg "world is saving"
            settimer "WorldSaveTimer" 0
            if EnableOverheadMessages = 1
                overhead "[ WORLD SAVING... ]" 253
            endif
            while timer "WorldSaveTimer" < 4500
                if insysmsg "save complete"
                    break
                endif
                wait 100
            endwhile
            if EnableOverheadMessages = 1
                overhead "[ SAVE COMPLETE! ]" 253
            endif
            clearsysmsg
        endif

        if EnablePKRadar = 1
            if insysmsg "Now tracking"
                clearsysmsg
                if EnableRedAlertOverhead = 1
                    overhead "[ !! RED ALERT !! ]" 337
                    wait 500
                endif

                if not hidden
                    if not cooldown 'Hiding'
                        if targetexists
                            hotkey 'Cancel Current Target'
                        endif

                        useskill "Hiding"
                        wait 500

                        while insysmsg 'You must wait'
                            clearsysmsg
                            wait 250
                            skill 'Hiding'
                        endwhile

                        if hidden
                            // Do nothing
                        else
                            if counttype 52149 self > 0
                                if not cooldown 'Smoke Bomb'
                                    clearsysmsg
                                    hotkey 'Smoke Bomb'
                                    wait 500
                                    if insysmsg 'You must wait another'
                                        if EnableOverheadMessages = 1
                                            overhead '[ SMOKE BOMB UNAVAILABLE ]' 333
                                        endif
                                        hotkey 'Toggle War Only'
                                        replay
                                    else
                                        if hidden
                                            if EnableOverheadMessages = 1
                                                overhead '[ SMOKE BOMB! ]' 1790
                                            endif
                                            @setvar! Stealthing 1
                                            cooldown 'Hiding' 0
                                            cooldown 'Stealth' 10000
                                            cooldown 'Smoke Bomb' SmokeBombCooldown
                                        endif
                                        replay
                                    endif
                                else
                                    if EnableOverheadMessages = 1
                                        overhead '[ SMOKE ON COOLDOWN! ]' 33
                                    endif
                                    hotkey 'Toggle War Only'
                                    replay
                                endif
                            else
                                if EnableOverheadMessages = 1
                                    overhead '[ NO SMOKE BOMBS ]' 337
                                endif
                                replay
                            endif
                        endif
                    endif
                else
                    if EnableOverheadMessages = 1
                        wait 500
                        overhead "[ ALREADY HIDDEN! ]" 11
                    endif
                    wait 500
                endif
                wait 500
            endif
        endif

        if EnableArcheryWarningMessage = 1 and skill 'Archery' >= 50
            if findtype 'stubnose crossbow|tower guard crossbow|balestra|heavy crossbow|crossbow' hand
                @setvar! AMMO 1
            elseif findtype 'long bow|bow|recurve bow|composite bow' hand
                @setvar! AMMO 2
            endif

            if counttype "crossbow bolt" self < ArcheryLowAmmoWarningAmount and timer "AmmunitionTimer" > 6000 and AMMO = 1
                overhead "[ AMMO LOW! ]" 37
                settimer 'AmmunitionTimer' 0
            endif

            if counttype "arrow" self < ArcheryLowAmmoWarningAmount and timer 'AmmunitionTimer' > 6000 and AMMO = 2
                overhead "[ AMMO LOW! ]" 37
                settimer 'AmmunitionTimer' 0
            endif
        endif

        if EnableWeightWarningMessage = 1
            if diffweight < GreenWarningDiffWeight and diffweight > YellowWarningDiffWeight and timer WeightTimer > 6000
                if EnableOverheadMessages = 1
                    overhead "[ WEIGHT WARNING... ]" 77
                    settimer "WeightTimer" 0
                else
                    overhead "  " 77
                    settimer "WeightTimer" 0
                endif
            elseif diffweight < YellowWarningDiffWeight and diffweight > RedWeightLimitDiffWeight and timer WeightTimer > 6000
                if EnableOverheadMessages = 1
                    overhead "[ WEIGHT WARNING! ]" 153
                    settimer "WeightTimer" 0
                else
                    overhead "  " 153
                    settimer "WeightTimer" 0
                endif
            elseif diffweight < RedWeightLimitDiffWeight and timer WeightTimer > 6000
                if EnableOverheadMessages = 1
                    overhead "[ WEIGHT LIMIT REACHED! ]" 37
                    settimer "WeightTimer" 0
                    wait 500
                else
                    overhead " Ï " 37
                    settimer "WeightTimer" 0
                endif

                wait 500

                if weight > maxweight
                    if EnableDropGoldWhenOverweight = 1
                        if EnableOverheadMessages = 1
                            wait 1000
                            overhead "[ OVERWEIGHT! ]" 337
                        endif
                        replay
                    else
                        if EnableOverheadMessages = 1
                            overhead "[ OVERWEIGHT! ]" 337
                            wait 2000
                        endif
                        overhead "[ STOPPING SCRIPT! ]" 88
                    endif
                endif
            endif
        endif

        if EnableGoldVacuum = 1 and DisableVacuums != 1
            if findtype "gold coin" ground -1 -1 12 as droppedmoney and timer "GoldRadar" > 3500
                overhead " ¼ " 149 droppedmoney
                settimer "GoldRadar" 0
            endif
            
            while findtype "gold coin" ground -1 -1 2 as droppedmoney
                if diffhits > 30
                    break
                endif
                overhead " ² " 149
                hotkey "Grab Item"
                wft 2500
                target droppedmoney
                wait 250
                if insysmsg "Invalid or inaccessible item"
                    wait 500
                    @ignore droppedmoney
                endif
                wait 250
            endwhile
        endif

        if EnableArrowCleanup = 1 and skill 'Archery' > 50 and DisableVacuums != 1
            while findtype 7163|3903 ground -1 -1 2 as item and diffhits < 30
                if timer "ArrowCleanupTimer" > 3500
                    if EnableOverheadMessages = 1
                        overhead '[ CLEANUP... ]' 93
                        settimer "ArrowCleanupTimer" 0
                    else
                        overhead ' ² ' 93
                        settimer "ArrowCleanupTimer" 0
                    endif
                endif
                hotkey "Grab Item"
                wft 1000
                target item
                wait 250
            endwhile

            if findtype "quiver" self as MyQuiver and timer "QuiverTimer" > 30000
                while findtype "quiver" self as MyQuiver
                    getlabel MyQuiver MyQuiverdesc
                    wait 250
                    if 'decorative' in MyQuiverdesc
                        @ignore MyQuiver
                        wait 500
                    else
                        break
                    endif
                endwhile
                settimer "QuiverTimer" 0
                menu MyQuiver 0
                wait 250
            endif

            if findtype 7163 ground -1 -1 10 as bolt and timer "BoltCleanupRadar" > 3500
                overhead "¼" 93 bolt
                settimer "BoltCleanupRadar" 0
            endif

            if findtype 3903 ground -1 -1 10 as arrow and timer "ArrowCleanupRadar" > 3500
                overhead "¼" 37 arrow
                settimer "ArrowCleanupRadar" 0
            endif
        endif

        if EnableDungeonCleanup = 1 and DisableVacuums != 1
            while findtype "iron ingot%s|board%s|cut up leather|3972|3962|3963|3980|3976|3973|3974|3981" ground -1 -1 2 as item and diffhits < 35
            if diffhits > 35
                    break
                endif
                if EnableOverheadMessages = 1
                    if timer "DungeonCleanup" > 1500
                        overhead '[ CLEANUP... ]' 420
                        settimer "DungeonCleanup" 0
                    endif
                else
                    if timer "DungeonCleanup" > 1500
                        overhead ' ² ' 420
                        settimer "DungeonCleanup" 0
                    endif
                endif
                hotkey "Grab Item"
                wft 1000
                target item
                wait 250
            endwhile

            if findtype "iron ingot%s|board%s|cut up leather|3972|3962|3963|3980|3976|3973|3974|3981" ground -1 -1 15 as dungeonjunk and timer "DungeonCleanupRadar" > 3500
                overhead " ¼ " 420 dungeonjunk
                settimer "DungeonCleanupRadar" 0
            endif
        endif

        if EnableDropGoldWhenOverweight = 1
            if weight > maxweight
                if timer overweightMessageTimer > 4500
                    overhead "[ OVERWEIGHT! ]" 34
                    settimer overweightMessageTimer 0
                endif

                if DropGoldAmount != 0
                    clearignore
                    @setvar! DisableVacuums 1
                    wait 250

                    if EnablePutLootinLockBox = 1
                        if findtype "wooden box" self as lockbox
                            if findtype "copper key" self as key
                                clearignore
                                getlabel lockbox lockboxlabel
                                wait 100
                                if "items" in lockboxlabel
                                    // Do nothing
                                else
                                    dclick key
                                    wft 1500
                                    target lockbox
                                    if EnableOverheadMessages = 1
                                        overhead "[loot box unlocked]" 2114
                                    endif
                                    wait 500
                                    if insysmsg "It appears to be locked."
                                        dclick key
                                        wft 1500
                                        target lockbox
                                        wait 250
                                    endif
                                endif
                            elseif EnableOverheadMessages = 1
                                overhead "[ NO LOCKBOX KEY! ]" 337
                            endif
                        endif
                    endif

                    while weight > maxweight
                        if findtype "gold coin" self as easycomeeasygo
                            lift easycomeeasygo DropGoldAmount
                            droprelloc 0 0
                            getlabel backpack packdesc
                            if EnableOverheadMessages = 1
                                overhead "[ DROPPING GOLD... ]" 149
                            endif
                            wait 250
                            if insysmsg "cannot drop anything"
                                drop backpack -1 -1 -1
                                break
                            endif
                            wait 250
                        else
                            break
                        endif
                        if diffhits > 30
                            break
                        endif
                    endwhile
                endif
            endif
        endif

        if EnableWizardHatStealthTrick = 1
            if findtype 5912 self and not varexist MagicWizardHat and findlayer self head as MyCurrentHelmet
                getlabel MyCurrentHelmet MyCurrentHelmetdesc
                if 'magical' in MyCurrentHelmetdesc
                    @setvar! MyMagicHat MyCurrentHelmet
                elseif 'aspect' in MyCurrentHelmetdesc
                    @setvar! MyHelmet MyCurrentHelmet
                endif
            endif

            if not find MagicWizardHat self and findtype 5912 backpack as MyMagicHat
                for 4
                getlabel MyMagicHat MyHatdesc
                if 'restyled' in MyHatdesc or 'unidentified' in MyHatdesc
                    @ignore MyMagicHat
                elseif 'armored' in MyHatdesc or 'magical' in MyHatdesc
                    @setvar! MagicWizardHat MyMagicHat
                    break
                endif
                wait 250
                endfor
            endif

            if varexist MagicWizardHat and find MagicWizardHat backpack
                if not find MyHelmet self and findlayer self head as helm
                    @setvar! MyHelmet helm
                endif

                if not varexist MyHelmet
                    overhead '[ SELECT HELMET... ]' 153
                    @setvar! MyHelmet
                    wft 1500
                    while targetexists
                        wait 100
                    endwhile
                endif
            endif

            if varexist MagicWizardHat and find MagicWizardHat backpack and find MyHelmet self and skill 'Stealth' >= 80
                if not targetexists and not casting and hidden and Stealthing = 1 and stam = maxstam
                    while queued
                        // Do Nothing
                    endwhile

                    dclick MagicWizardHat

                    while queued
                        // Do Nothing
                    endwhile

                    wait 100
                    dclick MyHelmet
                    getlabel backpack backpacklabel
                    wait 250
                endif

                if not targetexists and not casting and not findlayer self head and find MyHelmet self
                    while queued
                        // Do Nothing
                    endwhile
                    dclick MyHelmet
                    getlabel backpack backpacklabel
                    wait 250
                endif
            endif

            if varexist MagicWizardHat and find MyHelmet self and skill 'Stealth' >= 80
                if not targetexists and not casting and not find MagicWizardHat backpack
                    while queued
                        // Do Nothing
                    endwhile
                    dclick MyHelmet
                    getlabel backpack backpacklabel
                    wait 250
                endif
            endif
        endif

        if EnableIDandRecycleMagicItems = 1 and not findtype "3997|4148|4032|7864" self
            @setvar! DisableRecycler 0
        else
            @setvar! DisableRecycler 0
        endif

        if EnableIDandRecycleMagicItems = 1 and DisableRecycler != 1 and diffweight < IDandRecycleWeightdiff and timer MagicRecyclerCooldown > 30000
            if findtype "3997|4148|4032|7864" self as RecyclingTool
                hotkey "Cancel Current Target"
                settimer MagicRecyclerCooldown 0
                
                if not find MyContainerIDWand self and findtype 20495 self as NewContainterIDWand
                    @setvar! MyContainerIDWand NewContainterIDWand
                endif

                if skill "Item ID" = 120 or find MyContainerIDWand self
                    clearsysmsg
                    clearignore

                    if EnablePutLootinLockBox = 1 and EnablePutLootinLockBoxFailed != 1
                        if findtype "wooden box" self as lockbox
                            if findtype "copper key" self as key
                                getlabel lockbox lockboxlabel
                                wait 250
                                @setvar! EnablePutLootinLockBoxFailed 0
                                if 'items' in lockboxlabel
                                    // Do nothing
                                else
                                    dclick key
                                    wft 1500
                                    target lockbox
                                    wait 250
                                    overhead '[loot box unlocked]' 2114
                                endif
                            else
                                if EnableOverheadMessages = 1
                                    overhead '[ KEY IS MISSING! ]' 337
                                    @setvar! EnablePutLootinLockBox 0
                                    wait 250
                                endif
                            endif
                        else
                            if EnableOverheadMessages = 1
                                overhead '[ NO LOCKBOX FOUND! ]' 337
                                @setvar! EnablePutLootinLockBoxFailed 1
                                wait 250
                            endif
                        endif
                    endif

                    if skill "Item ID" = 120
                        skill "Item ID"
                        wait 500
                    elseif find MyContainerIDWand self
                        dclick MyContainerIDWand
                        wait 500
                    endif

                    if insysmsg 'What do you wish to appraise and identify?'
                        if EnablePutLootinLockBox = 1
                            if findtype 'wooden box' self as lockbox
                                target lockbox
                            else 
                                overhead '[ NO LOCKBOX FOUND ]' 337
                                @setvar! EnablePutLootinLockBoxFailed 1
                            endif
                            wait 500
                        elseif EnablePutLootinLockBox = 0
                            overhead "[ SELECT CONTAINER TO ID... ]" 88
                            while targetexists
                                wait 100
                            endwhile
                        endif
                    endif

                    wait 500

                    if EnableOverheadMessages = 1
                        overhead "[ IDENTIFYING ITEMS... ]" 88
                    endif

                    if insysmsg "No unidentified items found."
                        if EnableOverheadMessages = 1
                            wait 1000
                            overhead "[ NO ITEMS TO ID ]" 337
                        endif
                    elseif insysmsg "That is not a container."
                        if EnableOverheadMessages = 1
                            wait 1000
                            overhead "[ INVALID CONTAINER ]" 337
                        endif
                    elseif insysmsg "You must wait a few moments to use another skill"
                        if EnableOverheadMessages = 1
                            wait 1000
                            overhead "[ SKILL COOLDOWN... ]" 2117
                        endif
                    else
                        wait 500
                    endif

                    while findtype 5056|5059|5060|5061|5063|5070|5074|5075|5076|5078|5085|5089|5090|5101|5103|5105|5106|5129|5131|5132|5135|5138|5139|5142|5143|5144|5146|5201|5203|5204|5205|5207|7169|7170|7173|7175|7177|7179|7181|7610|7947|31003|31004|31005|31006|31007|31008|31009|31010|31011|31012|31015|31191|31017|31019|31021|31023|31025|31027|31029|31031|31033|31035|31037|31038|31041|31043|31045|31047|31049|31051|31053|31055|3834|3740|3742|3762|3763|10245|20006|20008|20010|20012|20014|20016|7026|7027|7029|7031|7033|7034|7035|7107|7109|31002|31130|3920|5042|5117|30990|30993|30994|30995|31184|31186|3719|3938|5121|5123|5125|30989|30992|30996|30997|30998|31176|31188|3568|3713|3721|3932|5040|5044|5112|5127|5177|5179|5181|30991|30999|31000|31001|31014|31178|31180|31182|3909|3911|3913|3915|3917|3934|3937|5046|5049|5115|5119|5182|5185|5187|30988|31128|31190|22187|31141|31142|31169|31172 backpack as UnidentifiedItem
                        getlabel UnidentifiedItem UnidentifiedItemlabel
                        if "aspect" in UnidentifiedItemlabel or "training" in UnidentifiedItemlabel or "vanquishing" in UnidentifiedItemlabel or "supremely" in UnidentifiedItemlabel or "slaying" in UnidentifiedItemlabel or "enticement" in UnidentifiedItemlabel or "invulnerability" in UnidentifiedItemlabel or "power" in UnidentifiedItemlabel or "exceedingly accurate force" in UnidentifiedItemlabel or "exceedingly potent" in UnidentifiedItemlabel or "valorite" in UnidentifiedItemlabel or "valehide" in UnidentifiedItemlabel or "valewood" in UnidentifiedItemlabel or "avarite" in UnidentifiedItemlabel or "avarhide" in UnidentifiedItemlabel or "avarwood" in UnidentifiedItemlabel or "verite" in UnidentifiedItemlabel or "verehide" in UnidentifiedItemlabel or "verewood" in UnidentifiedItemlabel or "agapite" in UnidentifiedItemlabel or "rosehide" in UnidentifiedItemlabel or "rosewood" in UnidentifiedItemlabel or "fortification" in UnidentifiedItemlabel
                            @ignore UnidentifiedItem
                        elseif "durable" in UnidentifiedItemlabel or "substantial" in UnidentifiedItemlabel or "massive" in UnidentifiedItemlabel or "fortified" in UnidentifiedItemlabel or "indestructible" in UnidentifiedItemlabel or "exceptional" in UnidentifiedItemlabel or "accurate" in UnidentifiedItemlabel or "surpassingly" in UnidentifiedItemlabel or "eminently" in UnidentifiedItemlabel or "exceedingly" in UnidentifiedItemlabel or "ruin" in UnidentifiedItemlabel or "might" in UnidentifiedItemlabel or "force" in UnidentifiedItemlabel or "power" in UnidentifiedItemlabel or "mastercrafted" in UnidentifiedItemlabel or "defense" in UnidentifiedItemlabel or "guarding" in UnidentifiedItemlabel or "hardening" in UnidentifiedItemlabel or "potent" in UnidentifiedItemlabel or "melodious" in UnidentifiedItemlabel
                            while not gumpexists 949095101
                                while queued
                                    // Do nothing
                                endwhile
                                dclick RecyclingTool
                                waitforgump 949095101 1000
                            endwhile

                            while not ingump "Recycle Single Item" 949095101
                                gumpresponse 2
                                waitforgump 949095101 1000
                            endwhile

                            if EnableOverheadMessages = 1
                                if timer RecyclingJunkTimer > 3500
                                    overhead '[ RECYCLING JUNK... ]' 1182
                                    settimer RecyclingJunkTimer 0
                                endif
                            endif

                            gumpresponse 3
                            waitforgump 949095101 1000
                            target UnidentifiedItem
                            getlabel backpack backpacklabel
                            wait 250
                            gumpclose 949095101
                        else
                            @ignore UnidentifiedItem
                        endif

                        if skill "Item ID" = 120
                            // Do nothing
                        elseif not find MyContainerIDWand self
                            break
                        endif
                    endwhile

                    if gumpexists 949095101
                        gumpclose 949095101
                    endif
                else
                    if EnableOverheadMessages = 1
                        overhead '[ NO CONTAINER ID WAND ]' 337
                    endif
                endif

                if targetexists
                    hotkey "Cancel Current Target"
                endif

                if EnableAutoConsumeArcaneEssence = 1 and findtype 3901 self as MyArcaneEssence
                    dclick MyArcaneEssence
                    wft 1500
                    target self
                    if EnableOverheadMessages = 1
                        overhead '[ CONSUMING ESSENCE... ]' 12
                    endif
                    wait 500
                endif

                if DropResourcesAfterRecycle = 1
                    while findtype "iron ingot%s|board%s|cut up leather|cut%s% of raw ribs|raw chicken leg%s%|feather%s" self as ResourcestoDrop
                        if diffhits > 30
                            break
                        endif
                        if EnableOverheadMessages = 1
                            if timer "DungeonCleanup" > 2500
                                overhead '[ DROPPING RESOURCES... ]' 420
                                settimer "DungeonCleanup" 0
                            endif
                        endif
                        lift ResourcestoDrop 60000
                        drop 0
                        wait 500
                        while queued
                            // Do nothing
                        endwhile
                    endwhile
                endif

                if EnableOverheadMessages = 1
                    overhead '[ RECYCLE COMPLETE! ]' 2114
                endif
                
                settimer MagicRecyclerCooldown 0
                hotkey "Cancel Current Target"

                if EnablePutLootinLockBox = 1
                    if findtype "wooden box" self as lockbox
                        if findtype "copper key" self as key
                            getlabel lockbox lockboxlabel
                            wait 250
                            if 'items' in lockboxlabel
                                dclick key
                                wft 1500
                                target lockbox
                                wait 250
                                overhead '[loot box locked]' 2117
                            else
                                // Do nothing
                            endif
                        else
                            if EnableOverheadMessages = 1
                                overhead '[ KEY IS MISSING! ]' 337
                                @setvar! EnablePutLootinLockBox 0
                                wait 250
                            endif
                        endif
                    else
                        if EnableOverheadMessages = 1
                            overhead '[ NO LOCKBOX FOUND! ]' 337
                            @setvar! EnablePutLootinLockBox 0
                            wait 250
                        endif
                    endif
                endif

                @clearignore
            else
                if EnableOverheadMessages = 1
                    overhead '[ NO RECYCLING TOOL! ]' 337
                endif
                @setvar! DisableRecycler 1
            endif
        endif

        if EnableUsePotionKegs = 1 and findtype 'empty bottle%s%' self and findtype 'keg' self and timer 'PotionKegPVPCooldown' > 30000 and not warmode
            if not timerexists PotionKegTimer
                createtimer PotionKegTimer
                settimer PotionKegTimer 5000
            endif

            @setvar! PotionStockCheck 0

            while PotionStockCheck < 8 and findtype 'empty bottle%s%' self and not warmode
                if warmode
                    break
                endif

                if PotionStockCheck = 0 and HealingPotionAmount != 0
                    @setvar! PotionType 3852
                    @setvar! KegColour 253
                    @setvar! PotionAmounttoFill HealingPotionAmount
                    @setvar! PotionStockCheck 1
                elseif PotionStockCheck = 1 and CurePotionAmount != 0
                    @setvar! PotionType 3847
                    @setvar! KegColour 44
                    @setvar! PotionAmounttoFill CurePotionAmount
                    @setvar! PotionStockCheck 2
                elseif PotionStockCheck = 2 and RefreshPotionAmount != 0
                    @setvar! PotionType 3851
                    @setvar! KegColour 37
                    @setvar! PotionAmounttoFill RefreshPotionAmount
                    @setvar! PotionStockCheck 3
                elseif PotionStockCheck = 3 and StrengthPotionAmount != 0
                    @setvar! PotionType 3849
                    @setvar! KegColour 956
                    @setvar! PotionAmounttoFill StrengthPotionAmount
                    @setvar! PotionStockCheck 4
                elseif PotionStockCheck = 4 and AgilityPotionAmount != 0
                    @setvar! PotionType 3848
                    @setvar! KegColour 93
                    @setvar! PotionAmounttoFill AgilityPotionAmount
                    @setvar! PotionStockCheck 5
                elseif PotionStockCheck = 5 and ResistPotionAmount != 0
                    @setvar! PotionType 3846
                    @setvar! KegColour 1109
                    @setvar! PotionAmounttoFill ResistPotionAmount
                    @setvar! PotionStockCheck 6
                elseif PotionStockCheck = 6 and PoisonPotionAmount != 0
                    @setvar! PotionType 3850
                    @setvar! KegColour 363
                    @setvar! PotionAmounttoFill PoisonPotionAmount
                    @setvar! PotionStockCheck 7
                elseif PotionStockCheck = 7 and ExplosionPotionAmount != 0
                    @setvar! PotionType 3853
                    @setvar! KegColour 419
                    @setvar! PotionAmounttoFill ExplosionPotionAmount
                    @setvar! PotionStockCheck 8
                else
                    break
                endif

                while counttype PotionType self < PotionAmounttoFill and not warmode
                    if warmode
                        break
                    endif

                    if not findtype 'empty bottle%s%' self
                        if EnableOverheadMessages = 1 and timer 'PotionKegTimer' > 5000
                            overhead "[ NO EMPTY BOTTLES... ]" 337
                            settimer 'PotionKegTimer' 0
                        endif
                        break
                    endif

                    if findtype 'keg' self KegColour as myKeg
                        dclick myKeg
                        wait 250
                        if EnableOverheadMessages = 1
                            if timer 'PotionKegTimer' > 2000
                                overhead '[ FILLING POTS... ]' KegColour
                                settimer 'PotionKegTimer' 0
                            endif
                        endif
                    else
                        if EnableOverheadMessages = 1 and timer 'PotionKegTimer' > 5000
                            overhead "[ NO KEG TO USE... ]" KegColour
                            settimer 'PotionKegTimer' 0
                        endif
                        break
                    endif
                    if insysmsg "You have been in combat with another player"
                        settimer "PotionKegPVPCooldown" 0
                        break
                    endif
                endwhile

                if counttype PotionType self < PotionAmounttoFill and not findtype 'empty bottle%s%' self
                    if EnableOverheadMessages = 1 and timer 'PotionKegTimer' > 5000
                        overhead "[ NO EMPTY BOTTLES... ]" 337
                        settimer 'PotionKegTimer' 0
                    endif
                    break
                endif
            endwhile
        endif
    endwhile

    ////////////////////////
    //  END STEALTH LOOP  //
    ////////////////////////


    getlabel CurrentTarget descTarget


    ////////////////////
    //  TARGET LOOP:  //
    ////////////////////

    while not dead CurrentTarget and find CurrentTarget ground -1 -1 12 and TargetAcquired = 1 and Stealthing = 1
        if insysmsg 'You have been revealed'
            if EnableOverheadMessages = 1
                overhead '[ !! REVEALED !! ]' 37
            else 
                overhead ' Ï ' 37
            endif
            clearsysmsg 
            hotkey 'Toggle War Only' 
            @setvar! Stealthing 0
            @setvar! KeepOnTrucking 0
            cooldown 'Hiding' 5000
            replay
        endif

        if not hidden
            @setvar! Stealthing 0
            @setvar! KeepOnTrucking 0
            hotkey 'Toggle War Only'
            replay
        endif

        if insysmsg "world is saving"
            settimer "WorldSaveTimer" 0
            if EnableOverheadMessages = 1
                overhead "[ WORLD SAVING... ]" 253
            endif
            while timer "WorldSaveTimer" < 4500
                if insysmsg "save complete"
                    break
                endif
                wait 100
            endwhile
            if EnableOverheadMessages = 1
                overhead "[ SAVE COMPLETE! ]" 253
            endif
        endif

        if insysmsg 'You begin to move quietly.'
            clearsysmsg
            @setvar! KeepOnTrucking 0
            cooldown 'Stealth' 10000
        endif

        if insysmsg 'You feel ready to continue stealthing.'
            if timer KeepOnTruckingTimer > 500
                if EnableOverheadMessages = 1
                    overhead '[ KEEP GOING! ]' 69
                else
                    overhead ' Ï ' 69
                endif
                settimer KeepOnTruckingTimer 0
            endif
            clearsysmsg
            settimer NoTargetTimer 0
            @setvar! KeepOnTrucking 1
            wait 250
            cooldown 'Stealth' 10000
        endif

        if insysmsg 'You will automatically stealth when out of steps.'
            if timer KeepOnTruckingTimer > 2000
                if EnableOverheadMessages = 1
                    overhead '[ STEALTH RENEWED ]' 69
                else
                    overhead ' Ï ' 69
                endif
                settimer KeepOnTruckingTimer 0
            endif
            settimer NoTargetTimer 0
            @setvar! KeepOnTrucking 1
            wait 250
            getlabel backpack backpacklabel
            clearsysmsg
        endif

        if insysmsg 'You have 3 stealth steps remaining.'
            if KeepOnTrucking = 0
                if EnableOverheadMessages = 1
                    overhead '[ 3 STEPS REMAINING ]' 153
                    settimer NoTargetTimer 0
                endif
            endif
        endif

        if insysmsg 'You have 2 stealth steps remaining.'
            if KeepOnTrucking = 1
                if timer KeepOnTruckingTimer > 2500
                    if EnableOverheadMessages = 1
                        overhead '[ KEEP GOING! ]' 69
                        settimer NoTargetTimer 0
                    else
                        overhead ' Ï ' 69
                        settimer NoTargetTimer 0
                    endif
                    settimer KeepOnTruckingTimer 0
                endif
            elseif insysmsg 'You feel ready to continue stealthing.'
                if timer KeepOnTruckingTimer > 2500
                    if EnableOverheadMessages = 1
                        overhead '[ KEEP GOING! ]' 69
                        settimer NoTargetTimer 0
                    else
                        overhead ' Ï ' 69
                        settimer NoTargetTimer 0
                    endif
                    settimer KeepOnTruckingTimer 0
                endif
            else
                if EnableOverheadMessages = 1
                    overhead '[ 2 STEPS REMAINING ]' 44
                    settimer NoTargetTimer 0
                endif
            endif
        endif

        if insysmsg 'You have 1 stealth steps remaining.'
            if KeepOnTrucking = 1
                if timer KeepOnTruckingTimer > 2500
                    if EnableOverheadMessages = 1
                        overhead '[ KEEP GOING! ]' 69
                        settimer NoTargetTimer 0
                    else
                        overhead ' Ï ' 69
                        settimer NoTargetTimer 0
                    endif
                    settimer KeepOnTruckingTimer 0
                endif
            elseif insysmsg 'You feel ready to continue stealthing.'
                if timer KeepOnTruckingTimer > 2500
                    if EnableOverheadMessages = 1
                        overhead '[ KEEP GOING! ]' 69
                        settimer NoTargetTimer 0
                    else
                        overhead ' Ï ' 69
                        settimer NoTargetTimer 0
                    endif
                    settimer KeepOnTruckingTimer 0
                endif
            else
                if EnableOverheadMessages = 1
                    overhead '[ 1 STEP REMAINING ]' 333
                    settimer NoTargetTimer 0
                endif
            endif
        endif

        if insysmsg 'You have 0 stealth steps remaining.'
            if KeepOnTrucking = 1
                if timer KeepOnTruckingTimer > 2500
                    if EnableOverheadMessages = 1
                        overhead '[ KEEP GOING! ]' 69
                        settimer NoTargetTimer 0
                    else
                        overhead ' Ï ' 69
                        settimer NoTargetTimer 0
                    endif
                    settimer KeepOnTruckingTimer 0
                endif
            elseif insysmsg 'You feel ready to continue stealthing.'
                if timer KeepOnTruckingTimer > 2500
                    if EnableOverheadMessages = 1
                        overhead '[ KEEP GOING! ]' 69
                        settimer NoTargetTimer 0
                    else
                        overhead ' Ï ' 69
                        settimer NoTargetTimer 0
                    endif
                    settimer KeepOnTruckingTimer 0
                endif
            else
                while not insysmsg 'You feel ready to continue stealthing.'
                    if timer DoNotMoveTimer > 500
                        if EnableOverheadMessages = 1
                            overhead '[ !!! STOP !!! ]' 37
                        else
                            overhead ' Ï ' 37
                        endif
                        settimer DoNotMoveTimer 0
                        settimer NoTargetTimer 0
                    endif
                    
                    wait 250
                    
                    if insysmsg 'You feel ready to continue stealthing.'
                        if timer KeepOnTruckingTimer > 500
                            if EnableOverheadMessages = 1
                                overhead '[ KEEP GOING! ]' 69
                            else
                                overhead ' Ï ' 69
                            endif
                            settimer KeepOnTruckingTimer 0
                            settimer NoTargetTimer 0
                        endif
                        cooldown 'Stealth' 10000
                        clearsysmsg 
                        break
                    endif
                    
                    if not hidden
                        if EnableOverheadMessages = 1
                            overhead '[ STEALTH ENDED! ]' 2117
                        endif
                        settimer NoTargetTimer 0
                        @setvar! Stealthing 0
                        @setvar! KeepOnTrucking 0
                        hotkey 'Toggle War Only'
                        replay
                    endif
                endwhile
            endif
        endif

        if timer CheckTargetTimer > 1000
            settimer CheckTargetTimer 0
            hotkey "Target Closest Grey Monster"
            wait 500
            @setvar! TargetCheck lasttarget
            if insysmsg "no one matching" or TargetCheck != CurrentTarget
                clearsysmsg
                replay
            endif
        endif

        if skill 'Archery' >= 50
            while find CurrentTarget ground -1 -1 TargetAttackRange and hidden and Stealthing = 1
                getlabel CurrentTarget descTarget
                if find CurrentTarget ground -1 -1 TargetAttackRange
                    if cooldown "Hiding"
                        if timer TargetTimer > 3000
                            if "Paragon" in descTarget
                                if EnableOverheadMessages = 1
                                    overhead "[ PARAGON! ]" 12 CurrentTarget
                                endif
                                overhead " ¼ " 12 CurrentTarget
                            else
                                if EnableOverheadMessages = 1
                                    overhead "[ TARGET ]" 333 CurrentTarget
                                endif
                                overhead " ¼ " 333 CurrentTarget
                            endif
                            settimer TargetTimer 0
                        endif
                    elseif cooldown "Stealth"
                        if timer TargetTimer > 3000
                            if "Paragon" in descTarget
                                if EnableOverheadMessages = 1
                                    overhead "[ PARAGON! ]" 12 CurrentTarget
                                endif
                                overhead " ¼ " 12 CurrentTarget
                            else
                                if EnableOverheadMessages = 1
                                    overhead "[ TARGET ]" 44 CurrentTarget
                                endif
                                overhead " ¼ " 44 CurrentTarget
                            endif
                            settimer TargetTimer 0
                        endif
                    else
                        if timer TargetTimer > 3000
                            if "Paragon" in descTarget
                                if EnableOverheadMessages = 1
                                    overhead "[ PARAGON! ]" 12 CurrentTarget
                                endif
                                overhead " ¼ " 12 CurrentTarget
                            else
                                if EnableOverheadMessages = 1
                                overhead "[ TARGET ]" 69 CurrentTarget
                                endif
                                overhead " ¼ " 69 CurrentTarget
                            endif
                            settimer TargetTimer 0
                        endif
                    endif
                else 
                    if timer TargetTimer > 3000
                        if "Paragon" in descTarget
                            if EnableOverheadMessages = 1
                                overhead "[ PARAGON! ]" 12 CurrentTarget
                            endif
                            overhead " ¼ " 12 CurrentTarget
                        else
                            if EnableOverheadMessages = 1
                                overhead "[ TARGET ]" 153 CurrentTarget
                            endif
                            overhead " ¼ " 153 CurrentTarget
                        endif
                        settimer TargetTimer 0
                    endif
                endif

                if timer CheckTargetTimer > 2000
                    settimer CheckTargetTimer 0
                    hotkey "Target Closest Grey Monster"
                    wait 500
                    @setvar! TargetCheck lasttarget
                    if insysmsg "no one matching" or TargetCheck != CurrentTarget
                        clearsysmsg
                        replay
                    endif
                endif

                if timer StabDistanceTimer > 1500
                    if find CurrentTarget ground -1 -1 TargetAttackRange and not warmode
                        if not cooldown "Hiding"
                            if EnableOverheadMessages = 1 and timer StabDistanceTimer > 2800
                                overhead "[ TAB TO STAB! ]" 69
                                settimer StabDistanceTimer 0
                            endif
                        else
                            if timer StealthCooldownTimer > 3500
                                if EnableOverheadMessages = 1
                                    overhead "[ WAITING FOR STEALTH... ]" 153
                                    settimer StealthCooldownTimer 0
                                else
                                    overhead " Ï " 153
                                    settimer StealthCooldownTimer 0
                                endif
                            endif
                        endif
                    endif
                endif

                if dead CurrentTarget or not find CurrentTarget ground -1 -1 TargetAttackRange
                    replay
                endif

                if insysmsg 'You have been revealed'
                    if EnableOverheadMessages = 1
                        overhead '[ !! REVEALED !! ]' 37
                    else 
                        overhead ' Ï ' 37
                    endif
                    clearsysmsg 
                    hotkey 'Toggle War Only' 
                    @setvar! Stealthing 0
                    @setvar! KeepOnTrucking 0
                    cooldown 'Hiding' 5000
                    replay
                endif

                if not hidden
                    @setvar! Stealthing 0
                    @setvar! KeepOnTrucking 0
                    hotkey 'Toggle War Only'
                    replay
                endif

                if insysmsg "world is saving"
                    settimer "WorldSaveTimer" 0
                    if EnableOverheadMessages = 1
                        overhead "[ WORLD SAVING... ]" 253
                    endif
                    while timer "WorldSaveTimer" < 4500
                        if insysmsg "save complete"
                            break
                        endif
                        wait 100
                    endwhile
                    if EnableOverheadMessages = 1
                        overhead "[ SAVE COMPLETE! ]" 253
                    endif
                endif

                if EnableGoldVacuum = 1 and DisableVacuums != 1
                    if findtype "gold coin" ground -1 -1 12 as droppedmoney and timer "GoldRadar" > 3500
                        overhead " ¼ " 149 droppedmoney
                        settimer "GoldRadar" 0
                    endif
                    
                    while findtype "gold coin" ground -1 -1 2 as droppedmoney
                        if diffhits > 30
                            break
                        endif
                        overhead " ² " 149
                        hotkey "Grab Item"
                        wft 2500
                        target droppedmoney
                        wait 250
                        if insysmsg "Invalid or inaccessible item"
                            wait 500
                            @ignore droppedmoney
                        endif
                        wait 250
                    endwhile
                endif

                if EnableArrowCleanup = 1 and skill 'Archery' > 50 and DisableVacuums != 1
                    while findtype 7163|3903 ground -1 -1 2 as item and diffhits < 30
                        if timer "ArrowCleanupTimer" > 3500
                            if EnableOverheadMessages = 1
                                overhead '[ CLEANUP... ]' 93
                                settimer "ArrowCleanupTimer" 0
                            else
                                overhead ' ² ' 93
                                settimer "ArrowCleanupTimer" 0
                            endif
                        endif
                        hotkey "Grab Item"
                        wft 1000
                        target item
                        wait 250
                    endwhile

                    if findtype "quiver" self as MyQuiver and timer "QuiverTimer" > 30000
                        while findtype "quiver" self as MyQuiver
                            getlabel MyQuiver MyQuiverdesc
                            wait 250
                            if 'decorative' in MyQuiverdesc
                                @ignore MyQuiver
                                wait 500
                            else
                                break
                            endif
                        endwhile
                        settimer "QuiverTimer" 0
                        menu MyQuiver 0
                        wait 250
                    endif

                    if findtype 7163 ground -1 -1 10 as bolt and timer "BoltCleanupRadar" > 3500
                        overhead "¼" 93 bolt
                        settimer "BoltCleanupRadar" 0
                    endif

                    if findtype 3903 ground -1 -1 10 as arrow and timer "ArrowCleanupRadar" > 3500
                        overhead "¼" 37 arrow
                        settimer "ArrowCleanupRadar" 0
                    endif
                endif

                if EnableDungeonCleanup = 1 and DisableVacuums != 1
                    while findtype "iron ingot%s|board%s|cut up leather|3972|3962|3963|3980|3976|3973|3974|3981" ground -1 -1 2 as item and diffhits < 35
                    if diffhits > 35
                            break
                        endif
                        if EnableOverheadMessages = 1
                            if timer "DungeonCleanup" > 1500
                                overhead '[ CLEANUP... ]' 420
                                settimer "DungeonCleanup" 0
                            endif
                        else
                            if timer "DungeonCleanup" > 1500
                                overhead ' ² ' 420
                                settimer "DungeonCleanup" 0
                            endif
                        endif
                        hotkey "Grab Item"
                        wft 1000
                        target item
                        wait 250
                    endwhile

                    if findtype "iron ingot%s|board%s|cut up leather|3972|3962|3963|3980|3976|3973|3974|3981" ground -1 -1 15 as dungeonjunk and timer "DungeonCleanupRadar" > 3500
                        overhead " ¼ " 420 dungeonjunk
                        settimer "DungeonCleanupRadar" 0
                    endif
                endif

                if EnablePKRadar = 1
                    if insysmsg "Now tracking"
                        clearsysmsg
                        if EnableRedAlertOverhead = 1
                            overhead "[ !! RED ALERT !! ]" 337
                            wait 500
                        endif

                        if not hidden
                            if not cooldown 'Hiding'
                                if targetexists
                                    hotkey 'Cancel Current Target'
                                endif

                                useskill "Hiding"
                                wait 500

                                while insysmsg 'You must wait'
                                    clearsysmsg
                                    wait 250
                                    skill 'Hiding'
                                endwhile

                                if hidden
                                    // Do nothing
                                else
                                    if counttype 52149 self > 0
                                        if not cooldown 'Smoke Bomb'
                                            clearsysmsg
                                            hotkey 'Smoke Bomb'
                                            wait 500
                                            if insysmsg 'You must wait another'
                                                if EnableOverheadMessages = 1
                                                    overhead '[ SMOKE BOMB UNAVAILABLE ]' 333
                                                endif
                                                hotkey 'Toggle War Only'
                                                replay
                                            else
                                                if hidden
                                                    if EnableOverheadMessages = 1
                                                        overhead '[ SMOKE BOMB! ]' 1790
                                                    endif
                                                    @setvar! Stealthing 1
                                                    cooldown 'Hiding' 0
                                                    cooldown 'Stealth' 10000
                                                    cooldown 'Smoke Bomb' SmokeBombCooldown
                                                endif
                                                replay
                                            endif
                                        else
                                            if EnableOverheadMessages = 1
                                                overhead '[ SMOKE ON COOLDOWN! ]' 33
                                            endif
                                            hotkey 'Toggle War Only'
                                            replay
                                        endif
                                    else
                                        if EnableOverheadMessages = 1
                                            overhead '[ NO SMOKE BOMBS ]' 337
                                        endif
                                        replay
                                    endif
                                endif
                            endif
                        else
                            if EnableOverheadMessages = 1
                                wait 500
                                overhead "[ ALREADY HIDDEN! ]" 11
                            endif
                            wait 500
                        endif
                        wait 500
                    endif
                endif

                if insysmsg 'You begin to move quietly.'
                    clearsysmsg
                    @setvar! KeepOnTrucking 0
                    cooldown 'Stealth' 10000
                endif

                if insysmsg 'You feel ready to continue stealthing.'
                    if timer KeepOnTruckingTimer > 500
                        if EnableOverheadMessages = 1
                            overhead '[ KEEP GOING! ]' 69
                        else
                            overhead ' Ï ' 69
                        endif
                        settimer KeepOnTruckingTimer 0
                    endif
                    clearsysmsg
                    settimer NoTargetTimer 0
                    @setvar! KeepOnTrucking 1
                    wait 250
                    cooldown 'Stealth' 10000
                endif

                if insysmsg 'You will automatically stealth when out of steps.'
                    if timer KeepOnTruckingTimer > 2000
                        if EnableOverheadMessages = 1
                            overhead '[ STEALTH RENEWED ]' 69
                        else
                            overhead ' Ï ' 69
                        endif
                        settimer KeepOnTruckingTimer 0
                    endif
                    settimer NoTargetTimer 0
                    @setvar! KeepOnTrucking 1
                    wait 250
                    getlabel backpack backpacklabel
                    clearsysmsg
                endif

                if insysmsg 'You have 3 stealth steps remaining.'
                    if KeepOnTrucking = 0
                        if EnableOverheadMessages = 1
                            overhead '[ 3 STEPS REMAINING ]' 153
                            settimer NoTargetTimer 0
                        endif
                    endif
                endif

                if insysmsg 'You have 2 stealth steps remaining.'
                    if KeepOnTrucking = 1
                        if timer KeepOnTruckingTimer > 2500
                            if EnableOverheadMessages = 1
                                overhead '[ KEEP GOING! ]' 69
                                settimer NoTargetTimer 0
                            else
                                overhead ' Ï ' 69
                                settimer NoTargetTimer 0
                            endif
                            settimer KeepOnTruckingTimer 0
                        endif
                    elseif insysmsg 'You feel ready to continue stealthing.'
                        if timer KeepOnTruckingTimer > 2500
                            if EnableOverheadMessages = 1
                                overhead '[ KEEP GOING! ]' 69
                                settimer NoTargetTimer 0
                            else
                                overhead ' Ï ' 69
                                settimer NoTargetTimer 0
                            endif
                            settimer KeepOnTruckingTimer 0
                        endif
                    else
                        if EnableOverheadMessages = 1
                            overhead '[ 2 STEPS REMAINING ]' 44
                            settimer NoTargetTimer 0
                        endif
                    endif
                endif

                if insysmsg 'You have 1 stealth steps remaining.'
                    if KeepOnTrucking = 1
                        if timer KeepOnTruckingTimer > 2500
                            if EnableOverheadMessages = 1
                                overhead '[ KEEP GOING! ]' 69
                                settimer NoTargetTimer 0
                            else
                                overhead ' Ï ' 69
                                settimer NoTargetTimer 0
                            endif
                            settimer KeepOnTruckingTimer 0
                        endif
                    elseif insysmsg 'You feel ready to continue stealthing.'
                        if timer KeepOnTruckingTimer > 2500
                            if EnableOverheadMessages = 1
                                overhead '[ KEEP GOING! ]' 69
                                settimer NoTargetTimer 0
                            else
                                overhead ' Ï ' 69
                                settimer NoTargetTimer 0
                            endif
                            settimer KeepOnTruckingTimer 0
                        endif
                    else
                        if EnableOverheadMessages = 1
                            overhead '[ 1 STEP REMAINING ]' 333
                            settimer NoTargetTimer 0
                        endif
                    endif
                endif

                if insysmsg 'You have 0 stealth steps remaining.'
                    if KeepOnTrucking = 1
                        if timer KeepOnTruckingTimer > 2500
                            if EnableOverheadMessages = 1
                                overhead '[ KEEP GOING! ]' 69
                                settimer NoTargetTimer 0
                            else
                                overhead ' Ï ' 69
                                settimer NoTargetTimer 0
                            endif
                            settimer KeepOnTruckingTimer 0
                        endif
                    elseif insysmsg 'You feel ready to continue stealthing.'
                        if timer KeepOnTruckingTimer > 2500
                            if EnableOverheadMessages = 1
                                overhead '[ KEEP GOING! ]' 69
                                settimer NoTargetTimer 0
                            else
                                overhead ' Ï ' 69
                                settimer NoTargetTimer 0
                            endif
                            settimer KeepOnTruckingTimer 0
                        endif
                    else
                        while not insysmsg 'You feel ready to continue stealthing.'
                            if timer DoNotMoveTimer > 500
                                if EnableOverheadMessages = 1
                                    overhead '[ !!! STOP !!! ]' 37
                                else
                                    overhead ' Ï ' 37
                                endif
                                settimer DoNotMoveTimer 0
                                settimer NoTargetTimer 0
                            endif
                            
                            wait 250
                            
                            if insysmsg 'You feel ready to continue stealthing.'
                                if timer KeepOnTruckingTimer > 500
                                    if EnableOverheadMessages = 1
                                        overhead '[ KEEP GOING! ]' 69
                                    else
                                        overhead ' Ï ' 69
                                    endif
                                    settimer KeepOnTruckingTimer 0
                                    settimer NoTargetTimer 0
                                endif
                                cooldown 'Stealth' 10000
                                break
                            endif
                            
                            if not hidden
                                if EnableOverheadMessages = 1
                                    overhead '[ STEALTH ENDED! ]' 2117
                                endif
                                settimer NoTargetTimer 0
                                @setvar! Stealthing 0
                                @setvar! KeepOnTrucking 0
                                hotkey 'Toggle War Only'
                                replay
                            endif
                        endwhile
                    endif
                endif

                if EnableWeaponStances != 0 and findtype "archery codex" self as MyCodex
                    if not gumpexists 2016719803 and EnableWeaponCodexHotbar = 1
                        while not gumpexists 1066647553
                            say "[CodexHotBar"
                            wait 250
                            if gumpexists 2016719803
                                break
                            endif
                        endwhile
                    endif

                    getlabel MyCodex MyCodexDesc
                    wait 250

                    if SwitchToArcaneStance = 1 and timer "WeaponCodexTimer" > SwitchWeaponCodexCooldown
                        if "Arcane" in MyCodexDesc
                            // Do nothing
                        else
                            yell "[ArcheryAmmunition1"
                            settimer "WeaponCodexTimer" 0
                            wait 250
                        endif
                    elseif SwitchToFowlingStance = 1
                        if "Fowling" in MyCodexDesc
                            // Do nothing
                        else
                            yell "[ArcheryAmmunition2"
                            settimer "WeaponCodexTimer" 0
                            wait 250
                        endif
                    elseif SwitchToIncendiaryStance = 1 and timer "WeaponCodexTimer" > SwitchWeaponCodexCooldown
                        if "Incendiary" in MyCodexDesc
                            // Do nothing
                        else
                            yell "[ArcheryAmmunition3"
                            settimer "WeaponCodexTimer" 0
                            wait 250
                        endif
                    elseif SwitchToLongshotStance = 1 and timer "WeaponCodexTimer" > SwitchWeaponCodexCooldown
                        if "Longshot" in MyCodexDesc
                            // Do nothing
                        else
                            yell "[ArcheryAmmunition4"
                            settimer "WeaponCodexTimer" 0
                            wait 250
                        endif
                    elseif SwitchToMaimingStance = 1 and timer "WeaponCodexTimer" > SwitchWeaponCodexCooldown
                        if "Maiming" in MyCodexDesc
                            // Do nothing
                        else
                            yell "[ArcheryAmmunition5"
                            settimer "WeaponCodexTimer" 0
                            wait 250
                        endif
                    endif
                endif

                if EnableArcheryWarningMessage = 1 and skill 'Archery' >= 50
                    if findtype 'stubnose crossbow|tower guard crossbow|balestra|heavy crossbow|crossbow' hand
                        @setvar! AMMO 1
                    elseif findtype 'long bow|bow|recurve bow|composite bow' hand
                        @setvar! AMMO 2
                    endif

                    if counttype "crossbow bolt" self < ArcheryLowAmmoWarningAmount and timer "AmmunitionTimer" > 6000 and AMMO = 1
                        overhead "[ AMMO LOW! ]" 37
                        settimer 'AmmunitionTimer' 0
                    endif

                    if counttype "arrow" self < ArcheryLowAmmoWarningAmount and timer 'AmmunitionTimer' > 6000 and AMMO = 2
                        overhead "[ AMMO LOW! ]" 37
                        settimer 'AmmunitionTimer' 0
                    endif
                endif

                if EnableWeightWarningMessage = 1
                    if diffweight < GreenWarningDiffWeight and diffweight > YellowWarningDiffWeight and timer WeightTimer > 6000
                        if EnableOverheadMessages = 1
                            overhead "[ WEIGHT WARNING... ]" 77
                            settimer "WeightTimer" 0
                        else
                            overhead "  " 77
                            settimer "WeightTimer" 0
                        endif
                    elseif diffweight < YellowWarningDiffWeight and diffweight > RedWeightLimitDiffWeight and timer WeightTimer > 6000
                        if EnableOverheadMessages = 1
                            overhead "[ WEIGHT WARNING! ]" 153
                            settimer "WeightTimer" 0
                        else
                            overhead "  " 153
                            settimer "WeightTimer" 0
                        endif
                    elseif diffweight < RedWeightLimitDiffWeight and timer WeightTimer > 6000
                        if EnableOverheadMessages = 1
                            overhead "[ WEIGHT LIMIT REACHED! ]" 37
                            settimer "WeightTimer" 0
                            wait 500
                        else
                            overhead " Ï " 37
                            settimer "WeightTimer" 0
                        endif

                        wait 500

                        if weight > maxweight
                            if EnableDropGoldWhenOverweight = 1
                                if EnableOverheadMessages = 1
                                    wait 1000
                                    overhead "[ OVERWEIGHT! ]" 337
                                endif
                                replay
                            else
                                if EnableOverheadMessages = 1
                                    overhead "[ OVERWEIGHT! ]" 337
                                    wait 2000
                                endif
                                overhead "[ STOPPING SCRIPT! ]" 88
                            endif
                        endif
                    endif
                endif

                if EnableWizardHatStealthTrick = 1
                    if findtype 5912 self and not varexist MagicWizardHat and findlayer self head as MyCurrentHelmet
                        getlabel MyCurrentHelmet MyCurrentHelmetdesc
                        if 'magical' in MyCurrentHelmetdesc
                            @setvar! MyMagicHat MyCurrentHelmet
                        elseif 'aspect' in MyCurrentHelmetdesc
                            @setvar! MyHelmet MyCurrentHelmet
                        endif
                    endif

                    if not find MagicWizardHat self and findtype 5912 backpack as MyMagicHat
                        for 4
                        getlabel MyMagicHat MyHatdesc
                        if 'restyled' in MyHatdesc or 'unidentified' in MyHatdesc
                            @ignore MyMagicHat
                        elseif 'armored' in MyHatdesc or 'magical' in MyHatdesc
                            @setvar! MagicWizardHat MyMagicHat
                            break
                        endif
                        wait 250
                        endfor
                    endif

                    if varexist MagicWizardHat and find MagicWizardHat backpack
                        if not find MyHelmet self and findlayer self head as helm
                            @setvar! MyHelmet helm
                        endif

                        if not varexist MyHelmet
                            overhead '[ SELECT HELMET... ]' 153
                            @setvar! MyHelmet
                            wft 1500
                            while targetexists
                                wait 100
                            endwhile
                        endif
                    endif

                    if varexist MagicWizardHat and find MagicWizardHat backpack and find MyHelmet self and skill 'Stealth' >= 80
                        if not targetexists and not casting and hidden and Stealthing = 1 and stam = maxstam
                            while queued
                                // Do Nothing
                            endwhile

                            dclick MagicWizardHat

                            while queued
                                // Do Nothing
                            endwhile

                            wait 100
                            dclick MyHelmet
                            getlabel backpack backpacklabel
                            wait 250
                        endif

                        if not targetexists and not casting and not findlayer self head and find MyHelmet self
                            while queued
                                // Do Nothing
                            endwhile
                            dclick MyHelmet
                            getlabel backpack backpacklabel
                            wait 250
                        endif
                    endif

                    if varexist MagicWizardHat and find MyHelmet self and skill 'Stealth' >= 80
                        if not targetexists and not casting and not find MagicWizardHat backpack
                            while queued
                                // Do Nothing
                            endwhile
                            dclick MyHelmet
                            getlabel backpack backpacklabel
                            wait 250
                        endif
                    endif
                endif

                if EnableWeaponCheck = 1 and not find MySlowWeapon hand
                    clearignore
                    if not findtype 'heavy crossbow|long bow|tower guard crossbow' self
                        if timer NoWeaponOverheadTimer > 5000
                            overhead "[ NO WEAPON! ]" 337
                            settimer NoWeaponOverheadTimer 0
                        endif
                    else
                        if not findtype 'heavy crossbow|long bow|tower guard crossbow' hand
                            if findtype 'heavy crossbow|long bow|tower guard crossbow' backpack as  MySlowWeapon
                                for 10
                                getlabel  MySlowWeapon WeaponLabel
                                wait 250
                                if "aspect" in WeaponLabel
                                    break
                                elseif "unidentified" in WeaponLabel
                                    @ignore  MySlowWeapon
                                    wait 250
                                else
                                    @ignore  MySlowWeapon
                                    wait 250
                                endif
                                if findtype 'heavy crossbow|long bow|tower guard crossbow' backpack as  MySlowWeapon
                                    getlabel  MySlowWeapon WeaponLabel
                                    wait 250
                                endif
                                endfor
                                wait 250
                                dclick  MySlowWeapon
                                wait 500
                            endif
                        endif
                    endif
                endif

                if find CurrentTarget ground -1 -1 TargetAttackRange and warmode
                    if EnableInstantHide = 1
                        while cooldown Stealth or cooldown Hiding
                            wait 100
                            if not cooldown Stealth and not cooldown Hiding
                                break
                            endif
                            if timer HidingOverheadTimer > 2500 and EnableOverheadMessages = 1 
                                overhead "[ WAITING FOR COOLDOWN... ]" 13
                                settimer HidingOverheadTimer 0
                                wait 500
                            elseif timer HidingOverheadTimer > 2500
                                overhead " Ï " 13
                                settimer HidingOverheadTimer 0
                                wait 500
                            endif
                        endwhile
                    endif

                    attack CurrentTarget
                    wait 500
                    @setvar! Stealthing 0
                    
                    if insysmsg 'You strike your target from the shadows!' 
                        if EnableOverheadMessages = 1
                            overhead "[ BACKSTAB!! ]" 1790 CurrentTarget
                        endif 
                        overhead " ¼ " 1790 CurrentTarget
                    endif

                    if insysmsg 'Vanish activated'
                        if EnableOverheadMessages = 1
                            overhead '[ VANISHED!! ]' 2114
                        endif
                        wait 500
                        @setvar! Stealthing 1
                        if EnableSmokeBombDoubleTap = 1
                            hotkey 'Toggle War Only'
                        else 
                            hotkey 'Toggle Peace Only'
                        endif
                        clearsysmsg
                        cooldown 'Stealth' 0
                        cooldown "Hiding" 0
                        replay
                    endif

                    if EnableExplosionPotion = 1 and not hidden and not dead CurrentTarget
                        if skill 'Alchemy' >= 80
                            if findtype 'purple potion' self as explotPot
                                getlabel explotPot potLabel
                                if "(" in potLabel
                                    if timer PurplePotionTimer > PurplePotionCooldown
                                        @setvar! PurplePotionReady 1
                                        wait 250 
                                    else
                                        @setvar! PurplePotionReady 0
                                    endif
                                else
                                    @setvar! PurplePotionReady 1
                                    wait 250
                                endif
                            else
                                if EnableOverheadMessages = 1 and timer purpleMessageTimer > 15000
                                    overhead '[ NO PURPLE POTIONS ]' 337
                                    settimer purpleMessageTimer 0
                                endif
                            endif

                            if targetexists
                                hotkey 'cancel current target'
                            endif
                            
                            @setvar! Interrupted 0 
                            
                            if PurplePotionReady = 1 and not dead CurrentTarget and find CurrentTarget ground -1 -1 TargetAttackRange
                                while not insysmsg "Where should i throw this potion?"
                                    potion 'explosion'
                                endwhile

                                @setvar! PurplePotionReady 0
                                settimer PurplePotionTimer 0

                                while not targetexists
                                    if dead CurrentTarget and not find CurrentTarget ground -1 -1 TargetAttackRange
                                        @setvar! Interrupted 1
                                        hotkey 'cancel current target'
                                        break
                                    endif
                                endwhile

                                if Interrupted = 0
                                    target CurrentTarget
                                    if EnableOverheadMessages = 1
                                        overhead '[ EXPLOSION POT... ]' 419
                                    endif
                                    cooldown "Purple Potion" 15000
                                    getlabel backpack packdesc
                                    wait 250
                                endif
                            endif
                        endif
                    endif 
                    
                    if EnableFastSecondHit = 1 and not hidden and not dead CurrentTarget
                        if EnableWeaponAbilities = 1
                            if timer WeaponAbilityTimer > WeaponAbilityCooldown and UseSkirmishAbility = 1
                                clearsysmsg
                                yell "[WeaponAbility1"
                                wait 250
                                if insysmsg "You cannot"
                                    settimer WeaponAbilityTimer 25000
                                    clearsysmsg
                                else
                                    if EnableOverheadMessages = 1
                                        overhead "[ SKIRMISH! ]" 37
                                    endif
                                    cooldown "Weapon Ability" WeaponAbilityCooldown
                                    cooldown "Skirmish Ability" 15000
                                    settimer WeaponAbilityTimer 0
                                endif
                            elseif timer WeaponAbilityTimer > WeaponAbilityCooldown and UseFullDrawAbility = 1
                                clearsysmsg
                                yell "[WeaponAbility2"
                                wait 250
                                if insysmsg "You cannot"
                                    settimer WeaponAbilityTimer 25000
                                    clearsysmsg
                                else
                                    if EnableOverheadMessages = 1
                                        overhead "[ FULL DRAW! ]" 37
                                    endif
                                    cooldown "Weapon Ability" WeaponAbilityCooldown
                                    cooldown "Full Draw Ability" 15000
                                    settimer WeaponAbilityTimer 0
                                endif
                            elseif timer WeaponAbilityTimer > WeaponAbilityCooldown and UseRepeaterAbility = 1
                                clearsysmsg
                                yell "[WeaponAbility3"
                                wait 250
                                if insysmsg "You cannot"
                                    settimer WeaponAbilityTimer 25000
                                    clearsysmsg
                                else
                                    if EnableOverheadMessages = 1
                                        overhead "[ REPEATER! ]" 37
                                    endif
                                    cooldown "Weapon Ability" WeaponAbilityCooldown
                                    cooldown "Repeater Ability" 5000
                                    settimer WeaponAbilityTimer 0
                                endif
                            endif
                        endif

                        wait 500

                        if find MyFastWeapon self
                            dclick MyFastWeapon
                            getlabel backpack backpacklabel
                            wait 250
                            attack CurrentTarget
                            wait 1000
                        else
                            if EnableOverheadMessages = 1
                                overhead '[ NO FAST WEAPON! ]' 333
                            endif
                        endif

                        if find MySlowWeapon self
                            dclick MySlowWeapon
                            getlabel backpack backpacklabel
                            wait 250
                        else
                            if EnableOverheadMessages = 1
                            overhead '[ NO SLOW WEAPON! ]' 333
                            endif
                        endif
                    endif

                    wait 250 
                    
                    if not dead CurrentTarget
                        if EnableSmokeBombDoubleTap = 1
                            while cooldown Hiding or cooldown Stealth
                                if EnableHealPotion = 1 and diffhits >= HealPotionHPdiff and not hidden
                                    if findtype "Yellow Potion" self as HealPot
                                        getlabel HealPot HealPotlabel
                                        if "next" in HealPotlabel
                                            // Do nothing
                                        else
                                            @setvar! HealPotionCheck 0

                                            if counttype 3852 self as HealPotCount
                                                @setvar! HealPotionCheck HealPotCount
                                            endif

                                            clearsysmsg
                                            dclicktype 3852
                                            getlabel backpack backpackdesc
                                            wait 250

                                            if HealPotionCheck != counttype 3852 self or insysmsg "potion satchel used"
                                                settimer 'HealPotionTimer' 0
                                                cooldown "Healing Potion" 10000
                                                if EnableOverheadMessages = 1
                                                    if insysmsg "potion satchel used"
                                                        overhead '[ FREE HEAL POTION ]' 253
                                                    else
                                                        overhead "[ HEAL POTION ]" 253
                                                    endif
                                                endif
                                                clearsysmsg
                                            endif
                                        endif
                                    else
                                        if timer 'yellowMessageTimer' > 4500
                                            overhead "[ NO HEAL POTS! ]" 337
                                            settimer 'yellowMessageTimer' 0
                                        endif
                                    endif
                                endif

                                if EnablePanaceaPotion = 1
                                    if findbuff "bleed" or findbuff "diseased" and skill 'Alchemy' >= 80
                                        if not findbuff "panacea potion cooldown"
                                            if findtype "Orange Potion" self
                                                dclicktype "Orange Potion"
                                                wait 500
                                                if findbuff "panacea potion cooldown" and EnableOverheadMessages = 1
                                                    overhead "[ PANACEA POTION ]" 2117
                                                endif
                                                cooldown 'Panacea Potion' 30000
                                            else 
                                                if timer 'orangeMessageTimer' > 15000
                                                    overhead "[ NO CURE POTS! ]" 337
                                                    settimer 'orangeMessageTimer' 0
                                                endif
                                            endif
                                        else 
                                            if EnableOverheadMessages = 1 and timer PanaceaOverheadTimer > 15000
                                                overhead '[ PANACEA ON COOLDOWN! ]' 37
                                                settimer PanaceaOverheadTimer 0
                                            endif
                                        endif
                                    endif
                                endif

                                if EnableCleansingBrews = 1
                                    if findbuff "Disease" or findbuff "Bleed"
                                        if timer CleansingBrewTimer > 120000
                                            if findtype 50675 self 2935 as CleansingBrew
                                                dclick CleansingBrew
                                                if EnableOverheadMessages = 1
                                                    overhead '[ CLEANSING BREW ]' 2117
                                                endif
                                                cooldown 'Cleansing Brew' 120000
                                                settimer CleansingBrewTimer 0
                                                wait 250
                                            else
                                                if timer CleansingBrewOverhead > 15000
                                                    overhead "[ NO CLEANSING BREWS! ]" 337
                                                    settimer CleansingBrewOverhead 0
                                                    settimer CleansingBrewTimer 0
                                                endif
                                            endif
                                        else 
                                            if EnableOverheadMessages = 1 and timer CleansingBrewOverhead > 15000
                                                overhead '[ BREW ON COOLDOWN! ]' 37
                                                settimer CleansingBrewOverhead 0
                                            endif
                                        endif
                                    endif
                                endif

                                if EnableCurePotion = 1
                                    while poisoned
                                        if findtype "Orange Potion" self
                                            dclicktype "Orange Potion"
                                            if EnableOverheadMessages = 1 and timer 'orangeMessageTimer' > 3500
                                                overhead "[ CURE POTION ]" 44
                                                settimer 'orangeMessageTimer' 0
                                            endif
                                            wait 250
                                        else
                                            if timer 'orangeMessageTimer' > 5000
                                                overhead "[ NO CURE POTS! ]" 337
                                                settimer 'orangeMessageTimer' 0
                                            endif
                                        endif
                                        if diffhits > 40
                                            break
                                        endif
                                    endwhile
                                endif

                                if diffhits > 0 and not bandaging and not hidden and skill 'healing' > 0
                                    if findtype 'clean bandage%s%' self
                                        if targetexists
                                            hotkey 'cancel current target'
                                        endif
                                        hotkey 'Bandage Self'
                                        if EnableOverheadMessages = 1
                                            if timer aidsMessageTimer > 5000
                                                overhead "[ BANDAGING... ]" 88
                                                settimer aidsMessageTimer 0
                                            endif
                                        endif
                                        wait 500
                                    else
                                        if timer aidsMessageTimer > 5000 and EnableOverheadMessages = 1
                                            overhead "[ OUT OF BANDAGES! ]" 337
                                            settimer aidsMessageTimer 0
                                        endif
                                    endif
                                endif

                                if EnableRefreshPotion = 1 and diffstam >= RefreshPotionSPdiff and not hidden
                                    if findtype "Red Potion" self
                                        dclicktype "Red Potion"
                                        if EnableOverheadMessages = 1
                                            overhead "[ REFRESH POTION ]" 37
                                        endif
                                        wait 500
                                    else
                                        if timer redMessageTimer > 4500
                                            overhead "[ NO REFRESH POTS! ]" 337
                                            settimer redMessageTimer 0
                                        endif
                                    endif
                                    wait 500
                                endif
                            
                                wait 100
                                
                                if not cooldown Hiding
                                    break
                                endif
                            endwhile
                            
                            getlabel backpack backpacklabel
                            
                            if counttype 52149 self > 0
                                if not cooldown 'Smoke Bomb'
                                    hotkey 'Smoke Bomb'
                                    wait 500
                                    if insysmsg 'You must wait another'
                                        if EnableOverheadMessages = 1
                                            overhead '[ SMOKE BOMB UNAVAILABLE ]' 333
                                        endif
                                        wait 1000
                                        if not cooldown 'Hiding'
                                            skill 'Hiding'
                                            wait 500
                                        endif
                                        if hidden
                                            replay
                                        else
                                            clearsysmsg
                                            hotkey 'Toggle War Only'
                                            replay
                                        endif
                                    else
                                        if hidden
                                            if EnableOverheadMessages = 1
                                                overhead '[ SMOKE BOMB! ]' 1790
                                            endif
                                            @setvar! Stealthing 1
                                            cooldown 'Hiding' 0
                                            cooldown 'Stealth' 10000
                                            cooldown 'Smoke Bomb' SmokeBombCooldown
                                            hotkey 'Toggle War Only'
                                            if find CurrentTarget ground -1 -1 TargetAttackRange and not dead CurrentTarget
                                                attack CurrentTarget
                                                wait 250
                                            endif
                                        endif

                                        if dead CurrentTarget
                                            hotkey 'Toggle Peace Only'
                                        else
                                            hotkey 'Toggle War Only'
                                        endif
                                        replay
                                    endif
                                else
                                    if EnableOverheadMessages = 1
                                        overhead '[ SMOKE ON COOLDOWN! ]' 333
                                    endif
                                    
                                    wait 500
                                    
                                    if not cooldown 'Hiding'
                                        skill 'Hiding'
                                        wait 500
                                    endif
                                    
                                    if hidden
                                        replay
                                    endif
                                endif
                            else
                                if EnableOverheadMessages = 1
                                    overhead '[ NO SMOKE BOMBS ]' 333
                                endif
                                
                                if not cooldown 'Hiding'
                                    skill 'Hiding'
                                    wait 500
                                endif
                                
                                if hidden
                                    replay
                                endif
                            endif

                            if dead CurrentTarget
                                wait 1500
                                settimer STORELOOT 0
                            endif

                            if not hidden 
                                if EnableSmokeBombWhenAggro = 1
                                    if counttype 52149 self > 0
                                        if not cooldown 'Smoke Bomb'
                                            clearsysmsg
                                            hotkey 'Smoke Bomb'
                                            wait 500
                                            if insysmsg 'You must wait another'
                                                if EnableOverheadMessages = 1
                                                    overhead '[ SMOKE BOMB UNAVAILABLE ]' 333
                                                endif
                                                hotkey 'Toggle War Only'
                                                replay
                                            else
                                                if hidden
                                                    if EnableOverheadMessages = 1
                                                        overhead '[ SMOKE BOMB! ]' 1790
                                                    endif
                                                        @setvar! Stealthing 1
                                                        cooldown 'Hiding' 0
                                                        cooldown 'Stealth' 10000
                                                    cooldown 'Smoke Bomb' SmokeBombCooldown
                                                endif
                                                replay
                                            endif
                                        else
                                            if EnableOverheadMessages = 1
                                                overhead '[ SMOKE ON COOLDOWN! ]' 33
                                            endif
                                            hotkey 'Toggle War Only'
                                            replay
                                        endif
                                    else
                                        if EnableOverheadMessages = 1
                                            overhead '[ NO SMOKE BOMBS ]' 337
                                        endif
                                        cooldown 'Hiding' 1000
                                        if not hidden
                                            hotkey 'Toggle War Only'
                                            replay
                                        endif
                                    endif
                                else 
                                    hotkey 'Toggle War Only'
                                    @setvar! Stealthing 0
                                    @setvar! KeepOnTruckin 0
                                    clearsysmsg 
                                    replay
                                endif
                            endif

                            if dead CurrentTarget
                                wait 1500
                                settimer STORELOOT 0
                            endif
                        endif
                    else 
                        hotkey 'Toggle Peace Only'

                        if EnableAutoCarving = 1 and findtype 11552 self and not hidden and dead CurrentTarget
                            while findtype "corpse" ground -1 -1 2 as deadbody
                                if findtype 11552 self
                                    if targetexists
                                        hotkey 'cancel current target'
                                    endif
                                    while not targetexists
                                        skill 'forensicevaluation'
                                    endwhile
                                    if targetexists and find deadbody ground -1 -1 2
                                        target 'self'
                                        @ignore deadbody
                                        wait 500
                                    endif
                                    if insysmsg "You dont see anything nearby"
                                        clearsysmsg
                                        break
                                    else
                                        if EnableOverheadMessages = 1 and timer SkinningTimer > 3000
                                            overhead "[ SKINNING... ]" 333
                                            settimer SkinningTimer 0
                                        endif
                                    endif
                                else
                                    if EnableOverheadMessages = 1 and timer SkinningTimer > 15000
                                        overhead "[ NO SKINNING KNIFE ]" 337
                                        settimer SkinningTimer 0
                                        break
                                    endif
                                endif
                            endwhile
                        endif

                        wait LootDelayTimer

                        while cooldown Hiding or cooldown Stealth
                            if timer HidingOverheadTimer > 2500 and EnableOverheadMessages = 1
                                overhead "[ WAITING FOR COOLDOWN... ]" 13
                                settimer HidingOverheadTimer 0
                                wait 500
                            elseif timer HidingOverheadTimer > 2500
                                overhead " Ï " 13
                                settimer HidingOverheadTimer 0
                                wait 500
                            endif

                            wait 100

                            if not cooldown Hiding and not cooldown Stealth
                                break
                            endif
                            
                            if warmode 
                                replay
                            endif
                            
                            if EnableHealPotion = 1 and diffhits >= HealPotionHPdiff and not hidden
                                if findtype "Yellow Potion" self as HealPot
                                    getlabel HealPot HealPotlabel
                                    if "next" in HealPotlabel
                                        // Do nothing
                                    else
                                        @setvar! HealPotionCheck 0

                                        if counttype 3852 self as HealPotCount
                                            @setvar! HealPotionCheck HealPotCount
                                        endif

                                        clearsysmsg
                                        dclicktype 3852
                                        getlabel backpack backpackdesc
                                        wait 250

                                        if HealPotionCheck != counttype 3852 self or insysmsg "potion satchel used"
                                            settimer 'HealPotionTimer' 0
                                            cooldown "Healing Potion" 10000
                                            if EnableOverheadMessages = 1
                                                if insysmsg "potion satchel used"
                                                    overhead '[ FREE HEAL POTION ]' 253
                                                else
                                                    overhead "[ HEAL POTION ]" 253
                                                endif
                                            endif
                                            clearsysmsg
                                        endif
                                    endif
                                else
                                    if timer 'yellowMessageTimer' > 4500
                                        overhead "[ NO HEAL POTS! ]" 337
                                        settimer 'yellowMessageTimer' 0
                                    endif
                                endif
                            endif

                            if EnablePanaceaPotion = 1
                                if findbuff "bleed" or findbuff "diseased" and skill 'Alchemy' >= 80
                                    if not findbuff "panacea potion cooldown"
                                        if findtype "Orange Potion" self
                                            dclicktype "Orange Potion"
                                            wait 500
                                            if findbuff "panacea potion cooldown" and EnableOverheadMessages = 1
                                                overhead "[ PANACEA POTION ]" 2117
                                            endif
                                            cooldown 'Panacea Potion' 30000
                                        else 
                                            if timer 'orangeMessageTimer' > 15000
                                                overhead "[ NO CURE POTS! ]" 337
                                                settimer 'orangeMessageTimer' 0
                                            endif
                                        endif
                                    else 
                                        if EnableOverheadMessages = 1 and timer PanaceaOverheadTimer > 15000
                                            overhead '[ PANACEA ON COOLDOWN! ]' 37
                                            settimer PanaceaOverheadTimer 0
                                        endif
                                    endif
                                endif
                            endif

                            if EnableCleansingBrews = 1
                                if findbuff "Disease" or findbuff "Bleed"
                                    if timer CleansingBrewTimer > 120000
                                        if findtype 50675 self 2935 as CleansingBrew
                                            dclick CleansingBrew
                                            if EnableOverheadMessages = 1
                                                overhead '[ CLEANSING BREW ]' 2117
                                            endif
                                            cooldown 'Cleansing Brew' 120000
                                            settimer CleansingBrewTimer 0
                                            wait 250
                                        else
                                            if timer CleansingBrewOverhead > 15000
                                                overhead "[ NO CLEANSING BREWS! ]" 337
                                                settimer CleansingBrewOverhead 0
                                                settimer CleansingBrewTimer 0
                                            endif
                                        endif
                                    else 
                                        if EnableOverheadMessages = 1 and timer CleansingBrewOverhead > 15000
                                            overhead '[ BREW ON COOLDOWN! ]' 37
                                            settimer CleansingBrewOverhead 0
                                        endif
                                    endif
                                endif
                            endif

                            if EnableCurePotion = 1
                                while poisoned
                                    if findtype "Orange Potion" self
                                        dclicktype "Orange Potion"
                                        if EnableOverheadMessages = 1 and timer 'orangeMessageTimer' > 3500
                                            overhead "[ CURE POTION ]" 44
                                            settimer 'orangeMessageTimer' 0
                                        endif
                                        wait 250
                                    else
                                        if timer 'orangeMessageTimer' > 5000
                                            overhead "[ NO CURE POTS! ]" 337
                                            settimer 'orangeMessageTimer' 0
                                        endif
                                    endif
                                    if diffhits > 40
                                        break
                                    endif
                                endwhile
                            endif

                            if diffhits > 0 and not bandaging and not hidden and skill 'healing' > 0
                                if findtype 'clean bandage%s%' self
                                    if targetexists
                                        hotkey 'cancel current target'
                                    endif
                                    hotkey 'Bandage Self'
                                    if EnableOverheadMessages = 1
                                        if timer aidsMessageTimer > 5000
                                            overhead "[ BANDAGING... ]" 88
                                            settimer aidsMessageTimer 0
                                        endif
                                    endif
                                    wait 500
                                else
                                    if timer aidsMessageTimer > 5000 and EnableOverheadMessages = 1
                                        overhead "[ OUT OF BANDAGES! ]" 337
                                        settimer aidsMessageTimer 0
                                    endif
                                endif
                            endif

                            if EnableRefreshPotion = 1 and diffstam >= RefreshPotionSPdiff and not hidden
                                if findtype "Red Potion" self
                                    dclicktype "Red Potion"
                                    if EnableOverheadMessages = 1
                                        overhead "[ REFRESH POTION ]" 37
                                    endif
                                    wait 500
                                else
                                    if timer redMessageTimer > 4500
                                        overhead "[ NO REFRESH POTS! ]" 337
                                        settimer redMessageTimer 0
                                    endif
                                endif
                                wait 500
                            endif
                        endwhile

                        clearsysmsg 
                        useskill 'Hiding'
                        wait 250
                        hotkey 'Toggle Peace Only'
                        wait 250

                        while insysmsg 'You must wait'
                            if timer HidingOverheadTimer > 2500 and EnableOverheadMessages = 1 and not hidden
                                overhead "[ WAITING TO HIDE... ]" 13
                                settimer HidingOverheadTimer 0
                                wait 500
                            elseif timer HidingOverheadTimer > 2500 and not hidden
                                overhead " Ï " 37
                                settimer HidingOverheadTimer 0
                                wait 500
                            endif
                            
                            clearsysmsg
                            skill 'Hiding'
                            wait 500
                            
                            if hidden
                                break
                            endif
                            
                            if warmode 
                                replay
                            endif
                            
                            if EnableHealPotion = 1 and diffhits >= HealPotionHPdiff and not hidden
                                if findtype "Yellow Potion" self as HealPot
                                    getlabel HealPot HealPotlabel
                                    if "next" in HealPotlabel
                                        // Do nothing
                                    else
                                        @setvar! HealPotionCheck 0

                                        if counttype 3852 self as HealPotCount
                                            @setvar! HealPotionCheck HealPotCount
                                        endif

                                        clearsysmsg
                                        dclicktype 3852
                                        getlabel backpack backpackdesc
                                        wait 250

                                        if HealPotionCheck != counttype 3852 self or insysmsg "potion satchel used"
                                            settimer 'HealPotionTimer' 0
                                            cooldown "Healing Potion" 10000
                                            if EnableOverheadMessages = 1
                                                if insysmsg "potion satchel used"
                                                    overhead '[ FREE HEAL POTION ]' 253
                                                else
                                                    overhead "[ HEAL POTION ]" 253
                                                endif
                                            endif
                                            clearsysmsg
                                        endif
                                    endif
                                else
                                    if timer 'yellowMessageTimer' > 4500
                                        overhead "[ NO HEAL POTS! ]" 337
                                        settimer 'yellowMessageTimer' 0
                                    endif
                                endif
                            endif

                            if EnablePanaceaPotion = 1
                                if findbuff "bleed" or findbuff "diseased" and skill 'Alchemy' >= 80
                                    if not findbuff "panacea potion cooldown"
                                        if findtype "Orange Potion" self
                                            dclicktype "Orange Potion"
                                            wait 500
                                            if findbuff "panacea potion cooldown" and EnableOverheadMessages = 1
                                                overhead "[ PANACEA POTION ]" 2117
                                            endif
                                            cooldown 'Panacea Potion' 30000
                                        else 
                                            if timer 'orangeMessageTimer' > 15000
                                                overhead "[ NO CURE POTS! ]" 337
                                                settimer 'orangeMessageTimer' 0
                                            endif
                                        endif
                                    else 
                                        if EnableOverheadMessages = 1 and timer PanaceaOverheadTimer > 15000
                                            overhead '[ PANACEA ON COOLDOWN! ]' 37
                                            settimer PanaceaOverheadTimer 0
                                        endif
                                    endif
                                endif
                            endif

                            if EnableCleansingBrews = 1
                                if findbuff "Disease" or findbuff "Bleed"
                                    if timer CleansingBrewTimer > 120000
                                        if findtype 50675 self 2935 as CleansingBrew
                                            dclick CleansingBrew
                                            if EnableOverheadMessages = 1
                                                overhead '[ CLEANSING BREW ]' 2117
                                            endif
                                            cooldown 'Cleansing Brew' 120000
                                            settimer CleansingBrewTimer 0
                                            wait 250
                                        else
                                            if timer CleansingBrewOverhead > 15000
                                                overhead "[ NO CLEANSING BREWS! ]" 337
                                                settimer CleansingBrewOverhead 0
                                                settimer CleansingBrewTimer 0
                                            endif
                                        endif
                                    else 
                                        if EnableOverheadMessages = 1 and timer CleansingBrewOverhead > 15000
                                            overhead '[ BREW ON COOLDOWN! ]' 37
                                            settimer CleansingBrewOverhead 0
                                        endif
                                    endif
                                endif
                            endif

                            if EnableCurePotion = 1
                                while poisoned
                                    if findtype "Orange Potion" self
                                        dclicktype "Orange Potion"
                                        if EnableOverheadMessages = 1 and timer 'orangeMessageTimer' > 3500
                                            overhead "[ CURE POTION ]" 44
                                            settimer 'orangeMessageTimer' 0
                                        endif
                                        wait 250
                                    else
                                        if timer 'orangeMessageTimer' > 5000
                                            overhead "[ NO CURE POTS! ]" 337
                                            settimer 'orangeMessageTimer' 0
                                        endif
                                    endif
                                    if diffhits > 40
                                        break
                                    endif
                                endwhile
                            endif

                            if diffhits > 0 and not bandaging and not hidden and skill 'healing' > 0
                                if findtype 'clean bandage%s%' self
                                    if targetexists
                                        hotkey 'cancel current target'
                                    endif
                                    hotkey 'Bandage Self'
                                    if EnableOverheadMessages = 1
                                        if timer aidsMessageTimer > 5000
                                            overhead "[ BANDAGING... ]" 88
                                            settimer aidsMessageTimer 0
                                        endif
                                    endif
                                    wait 500
                                else
                                    if timer aidsMessageTimer > 5000 and EnableOverheadMessages = 1
                                        overhead "[ OUT OF BANDAGES! ]" 337
                                        settimer aidsMessageTimer 0
                                    endif
                                endif
                            endif

                            if EnableRefreshPotion = 1 and diffstam >= RefreshPotionSPdiff and not hidden
                                if findtype "Red Potion" self
                                    dclicktype "Red Potion"
                                    if EnableOverheadMessages = 1
                                        overhead "[ REFRESH POTION ]" 37
                                    endif
                                    wait 500
                                else
                                    if timer redMessageTimer > 4500
                                        overhead "[ NO REFRESH POTS! ]" 337
                                        settimer redMessageTimer 0
                                    endif
                                endif
                                wait 500
                            endif
                        endwhile
                        
                        wait 500

                        if hidden
                            hotkey 'Toggle Peace Only'
                            clearsysmsg 
                            replay
                        elseif not hidden
                            if EnableSmokeBombWhenAggro = 1
                                if counttype 52149 self > 0
                                    if not cooldown 'Smoke Bomb'
                                        clearsysmsg
                                        hotkey 'Smoke Bomb'
                                        wait 500
                                        if insysmsg 'You must wait another'
                                            if EnableOverheadMessages = 1
                                                overhead '[ SMOKE BOMB UNAVAILABLE ]' 333
                                            endif
                                            hotkey 'Toggle War Only'
                                            replay
                                        else
                                            if hidden
                                                if EnableOverheadMessages = 1
                                                    overhead '[ SMOKE BOMB! ]' 1790
                                                endif
                                                    @setvar! Stealthing 1
                                                    cooldown 'Hiding' 0
                                                    cooldown 'Stealth' 10000
                                                cooldown 'Smoke Bomb' SmokeBombCooldown
                                            endif
                                            replay
                                        endif
                                    else
                                        if EnableOverheadMessages = 1
                                            overhead '[ SMOKE ON COOLDOWN! ]' 33
                                        endif
                                        hotkey 'Toggle War Only'
                                        replay
                                    endif
                                else
                                    if EnableOverheadMessages = 1
                                        overhead '[ NO SMOKE BOMBS ]' 337
                                    endif
                                    cooldown 'Hiding' 1000
                                    if not hidden
                                        hotkey 'Toggle War Only'
                                        replay
                                    endif
                                endif
                            else 
                                hotkey 'Toggle War Only'
                                @setvar! Stealthing 0
                                @setvar! KeepOnTruckin 0
                                clearsysmsg 
                            endif
                            replay
                        endif

                        if dead CurrentTarget
                            wait 1500
                            settimer STORELOOT 0
                        endif
                        replay
                    endif
                endif
            endwhile
        elseif skill 'Mace Fighting' > 50 
            while find CurrentTarget ground -1 -1 12 and hidden and TargetAcquired = 1
                getlabel CurrentTarget descTarget
                wait 250
                if find CurrentTarget ground -1 -1 TargetAttackRange
                    if cooldown "Hiding"
                        if timer TargetTimer > 3000
                            if "Paragon" in descTarget
                                if EnableOverheadMessages = 1
                                    overhead "[ PARAGON! ]" 12 CurrentTarget
                                endif
                                overhead " ¼ " 12 CurrentTarget
                            else
                                if EnableOverheadMessages = 1
                                    overhead "[ TARGET ]" 333 CurrentTarget
                                endif
                                overhead " ¼ " 333 CurrentTarget
                            endif
                            settimer TargetTimer 0
                        endif
                    elseif cooldown "Stealth"
                        if timer TargetTimer > 3000
                            if "Paragon" in descTarget
                                if EnableOverheadMessages = 1
                                    overhead "[ PARAGON! ]" 12 CurrentTarget
                                endif
                                overhead " ¼ " 12 CurrentTarget
                            else
                                if EnableOverheadMessages = 1
                                    overhead "[ TARGET ]" 44 CurrentTarget
                                endif
                                overhead " ¼ " 44 CurrentTarget
                            endif
                            settimer TargetTimer 0
                        endif
                    else
                        if timer TargetTimer > 3000
                            if "Paragon" in descTarget
                                if EnableOverheadMessages = 1
                                    overhead "[ PARAGON! ]" 12 CurrentTarget
                                endif
                                overhead " ¼ " 12 CurrentTarget
                            else
                                if EnableOverheadMessages = 1
                                overhead "[ TARGET ]" 69 CurrentTarget
                                endif
                                overhead " ¼ " 69 CurrentTarget
                            endif
                            settimer TargetTimer 0
                        endif
                    endif
                else 
                    if timer TargetTimer > 3000
                        if "Paragon" in descTarget
                            if EnableOverheadMessages = 1
                                overhead "[ PARAGON! ]" 12 CurrentTarget
                            endif
                            overhead " ¼ " 12 CurrentTarget
                        else
                            if EnableOverheadMessages = 1
                                overhead "[ TARGET ]" 153 CurrentTarget
                            endif
                            overhead " ¼ " 153 CurrentTarget
                        endif
                        settimer TargetTimer 0
                    endif
                endif

                if timer CheckTargetTimer > 1000
                    settimer CheckTargetTimer 0
                    hotkey "Target Closest Grey Monster"
                    wait 500
                    @setvar! TargetCheck lasttarget
                    if insysmsg "no one matching" or TargetCheck != CurrentTarget
                        clearsysmsg
                        replay
                    endif
                endif

                if timer StabDistanceTimer > 1000
                    if find CurrentTarget ground -1 -1 TargetAttackRange and not warmode
                        if not cooldown "Hiding"
                            if timer StabDistanceTimer > 1500
                                if EnableOverheadMessages = 1
                                    overhead "[ TAB TO STAB! ]" 69
                                endif
                                settimer StabDistanceTimer 0
                            endif
                        else
                            if timer StealthCooldownTimer > 3500
                                if EnableOverheadMessages = 1
                                    overhead "[ WAITING FOR STEALTH... ]" 153
                                    settimer StealthCooldownTimer 0
                                else
                                    overhead " Ï " 153
                                    settimer StealthCooldownTimer 0
                                endif
                            endif
                        endif
                    elseif find CurrentTarget ground -1 -1 2
                        if timer StabDistanceTimer > 500
                            if EnableOverheadMesages = 1
                                overhead "[ 2 TILES AWAY... ]" 149 CurrentTarget
                            endif
                            settimer StabDistanceTimer 0
                        endif
                    elseif find CurrentTarget ground -1 -1 3
                        if timer StabDistanceTimer > 500
                            if EnableOverheadMesages = 1
                                overhead "[ 3 TILES AWAY... ]" 149 CurrentTarget
                            endif
                            settimer StabDistanceTimer 0
                        endif
                    endif
                endif

                if dead CurrentTarget or not find CurrentTarget ground -1 -1 12
                    @setvar! TargetAcquired 0
                    replay
                endif

                if insysmsg 'You have been revealed'
                    if EnableOverheadMessages = 1
                        overhead '[ !! REVEALED !! ]' 37
                    else 
                        overhead ' Ï ' 37
                    endif
                    clearsysmsg 
                    hotkey 'Toggle War Only' 
                    @setvar! Stealthing 0
                    @setvar! KeepOnTrucking 0
                    cooldown 'Hiding' 5000
                    replay
                endif

                if not hidden
                    @setvar! Stealthing 0
                    @setvar! KeepOnTrucking 0
                    hotkey 'Toggle War Only'
                    replay
                endif

                if insysmsg "world is saving"
                    settimer "WorldSaveTimer" 0
                    if EnableOverheadMessages = 1
                        overhead "[ WORLD SAVING... ]" 253
                    endif
                    while timer "WorldSaveTimer" < 4500
                        if insysmsg "save complete"
                            break
                        endif
                        wait 100
                    endwhile
                    if EnableOverheadMessages = 1
                        overhead "[ SAVE COMPLETE! ]" 253
                    endif
                endif

                if insysmsg 'You begin to move quietly.'
                    clearsysmsg
                    @setvar! KeepOnTrucking 0
                    cooldown 'Stealth' 10000
                endif

                if insysmsg 'You feel ready to continue stealthing.'
                    if timer KeepOnTruckingTimer > 2500
                        if EnableOverheadMessages = 1
                            overhead '[ KEEP GOING! ]' 69
                        else
                            overhead ' Ï ' 69
                        endif
                        settimer KeepOnTruckingTimer 0
                    endif
                    clearsysmsg
                    settimer NoTargetTimer 0
                    @setvar! KeepOnTrucking 1
                    wait 250
                    cooldown 'Stealth' 10000
                endif

                if insysmsg 'You will automatically stealth when out of steps.'
                    if timer KeepOnTruckingTimer > 2500
                        if EnableOverheadMessages = 1
                            overhead '[ STEALTH RENEWED ]' 69
                        else
                            overhead ' Ï ' 69
                        endif
                        settimer KeepOnTruckingTimer 0
                    endif
                    settimer NoTargetTimer 0
                    @setvar! KeepOnTrucking 1
                    wait 250
                    getlabel backpack backpacklabel
                    clearsysmsg
                endif

                if insysmsg 'You have 3 stealth steps remaining.'
                    if KeepOnTrucking = 0
                        if EnableOverheadMessages = 1
                            overhead '[ 3 STEPS REMAINING ]' 153
                            settimer NoTargetTimer 0
                        endif
                    endif
                endif

                if insysmsg 'You have 2 stealth steps remaining.'
                    if KeepOnTrucking = 1
                        if timer KeepOnTruckingTimer > 2500
                            if EnableOverheadMessages = 1
                                overhead '[ KEEP GOING! ]' 69
                                settimer NoTargetTimer 0
                            else
                                overhead ' Ï ' 69
                                settimer NoTargetTimer 0
                            endif
                            settimer KeepOnTruckingTimer 0
                        endif
                    elseif insysmsg 'You feel ready to continue stealthing.'
                        if timer KeepOnTruckingTimer > 2500
                            if EnableOverheadMessages = 1
                                overhead '[ KEEP GOING! ]' 69
                                settimer NoTargetTimer 0
                            else
                                overhead ' Ï ' 69
                                settimer NoTargetTimer 0
                            endif
                            settimer KeepOnTruckingTimer 0
                        endif
                    else
                        if EnableOverheadMessages = 1
                            overhead '[ 2 STEPS REMAINING ]' 44
                            settimer NoTargetTimer 0
                        endif
                    endif
                endif

                if insysmsg 'You have 1 stealth steps remaining.'
                    if KeepOnTrucking = 1
                        if timer KeepOnTruckingTimer > 2500
                            if EnableOverheadMessages = 1
                                overhead '[ KEEP GOING! ]' 69
                                settimer NoTargetTimer 0
                            else
                                overhead ' Ï ' 69
                                settimer NoTargetTimer 0
                            endif
                            settimer KeepOnTruckingTimer 0
                        endif
                    elseif insysmsg 'You feel ready to continue stealthing.'
                        if timer KeepOnTruckingTimer > 2500
                            if EnableOverheadMessages = 1
                                overhead '[ KEEP GOING! ]' 69
                                settimer NoTargetTimer 0
                            else
                                overhead ' Ï ' 69
                                settimer NoTargetTimer 0
                            endif
                            settimer KeepOnTruckingTimer 0
                        endif
                    else
                        if EnableOverheadMessages = 1
                            overhead '[ 1 STEP REMAINING ]' 333
                            settimer NoTargetTimer 0
                        endif
                    endif
                endif

                if insysmsg 'You have 0 stealth steps remaining.'
                    if KeepOnTrucking = 1
                        if timer KeepOnTruckingTimer > 2500
                            if EnableOverheadMessages = 1
                                overhead '[ KEEP GOING! ]' 69
                                settimer NoTargetTimer 0
                            else
                                overhead ' Ï ' 69
                                settimer NoTargetTimer 0
                            endif
                            settimer KeepOnTruckingTimer 0
                        endif
                    elseif insysmsg 'You feel ready to continue stealthing.'
                        if timer KeepOnTruckingTimer > 2500
                            if EnableOverheadMessages = 1
                                overhead '[ KEEP GOING! ]' 69
                                settimer NoTargetTimer 0
                            else
                                overhead ' Ï ' 69
                                settimer NoTargetTimer 0
                            endif
                            settimer KeepOnTruckingTimer 0
                        endif
                    else
                        while not insysmsg 'You feel ready to continue stealthing.'
                            if timer DoNotMoveTimer > 500
                                if EnableOverheadMessages = 1
                                    overhead '[ !!! STOP !!! ]' 37
                                else
                                    overhead ' Ï ' 37
                                endif
                                settimer DoNotMoveTimer 0
                                settimer NoTargetTimer 0
                            endif
                            
                            wait 250
                            
                            if insysmsg 'You feel ready to continue stealthing.'
                                if timer KeepOnTruckingTimer > 500
                                    if EnableOverheadMessages = 1
                                        overhead '[ KEEP GOING! ]' 69
                                    else
                                        overhead ' Ï ' 69
                                    endif
                                    settimer KeepOnTruckingTimer 0
                                    settimer NoTargetTimer 0
                                endif
                                cooldown 'Stealth' 10000
                                break
                            endif
                            
                            if not hidden
                                if EnableOverheadMessages = 1
                                    overhead '[ STEALTH ENDED! ]' 2117
                                endif
                                settimer NoTargetTimer 0
                                @setvar! Stealthing 0
                                @setvar! KeepOnTrucking 0
                                hotkey 'Toggle War Only'
                                replay
                            endif
                        endwhile
                    endif
                endif

                if EnableWeaponStances != 0 and findtype "macing codex" self as MyCodex
                    if not gumpexists 2016719803 and EnableWeaponCodexHotbar = 1
                        while not gumpexists 1066647553
                            say "[CodexHotBar"
                            wait 250
                            if gumpexists 2016719803
                                break
                            endif
                        endwhile
                    endif

                    getlabel MyCodex MyCodexDesc
                    wait 250

                    if SwitchToAggressiveStance = 1
                        if "Aggressive" in MyCodexDesc
                            // Do nothing
                        else
                            yell '[MacingStance1'
                            settimer "WeaponCodexTimer" 0
                            wait 250
                        endif
                    elseif SwitchToDefensiveStance = 1
                        if "Defensive" in MyCodexDesc
                            // Do nothing
                        else
                            yell '[MacingStance2'
                            settimer "WeaponCodexTimer" 0
                            wait 250
                        endif
                    elseif SwitchToCleaveStance = 1
                        if "Cleave" in MyCodexDesc
                            // Do nothing
                        else
                            yell '[MacingStance3'
                            settimer "WeaponCodexTimer" 0
                            wait 250
                        endif
                    elseif SwitchToWildSwingStance = 1
                        if "Wild Swing" in MyCodexDesc
                            // Do nothing
                        else
                            yell '[MacingStance4'
                            settimer "WeaponCodexTimer" 0
                            wait 250
                        endif
                    elseif SwitchToSunderStance = 1
                        if "Sunder" in MyCodexDesc
                            // Do nothing
                        else
                            yell '[MacingStance5'
                            settimer "WeaponCodexTimer" 0
                            wait 250
                        endif
                    endif
                endif

                if EnableGoldVacuum = 1 and DisableVacuums != 1
                    if findtype "gold coin" ground -1 -1 12 as droppedmoney and timer "GoldRadar" > 3500
                        overhead " ¼ " 149 droppedmoney
                        settimer "GoldRadar" 0
                    endif
                    
                    while findtype "gold coin" ground -1 -1 2 as droppedmoney
                        if diffhits > 30
                            break
                        endif
                        overhead " ² " 149
                        hotkey "Grab Item"
                        wft 2500
                        target droppedmoney
                        wait 250
                        if insysmsg "Invalid or inaccessible item"
                            wait 500
                            @ignore droppedmoney
                        endif
                        wait 250
                    endwhile
                endif

                if EnableArrowCleanup = 1 and skill 'Archery' > 50 and DisableVacuums != 1
                    while findtype 7163|3903 ground -1 -1 2 as item and diffhits < 30
                        if timer "ArrowCleanupTimer" > 3500
                            if EnableOverheadMessages = 1
                                overhead '[ CLEANUP... ]' 93
                                settimer "ArrowCleanupTimer" 0
                            else
                                overhead ' ² ' 93
                                settimer "ArrowCleanupTimer" 0
                            endif
                        endif
                        hotkey "Grab Item"
                        wft 1000
                        target item
                        wait 250
                    endwhile

                    if findtype "quiver" self as MyQuiver and timer "QuiverTimer" > 30000
                        while findtype "quiver" self as MyQuiver
                            getlabel MyQuiver MyQuiverdesc
                            wait 250
                            if 'decorative' in MyQuiverdesc
                                @ignore MyQuiver
                                wait 500
                            else
                                break
                            endif
                        endwhile
                        settimer "QuiverTimer" 0
                        menu MyQuiver 0
                        wait 250
                    endif

                    if findtype 7163 ground -1 -1 10 as bolt and timer "BoltCleanupRadar" > 3500
                        overhead "¼" 93 bolt
                        settimer "BoltCleanupRadar" 0
                    endif

                    if findtype 3903 ground -1 -1 10 as arrow and timer "ArrowCleanupRadar" > 3500
                        overhead "¼" 37 arrow
                        settimer "ArrowCleanupRadar" 0
                    endif
                endif

                if EnableDungeonCleanup = 1 and DisableVacuums != 1
                    while findtype "iron ingot%s|board%s|cut up leather|3972|3962|3963|3980|3976|3973|3974|3981" ground -1 -1 2 as item and diffhits < 35
                    if diffhits > 35
                            break
                        endif
                        if EnableOverheadMessages = 1
                            if timer "DungeonCleanup" > 1500
                                overhead '[ CLEANUP... ]' 420
                                settimer "DungeonCleanup" 0
                            endif
                        else
                            if timer "DungeonCleanup" > 1500
                                overhead ' ² ' 420
                                settimer "DungeonCleanup" 0
                            endif
                        endif
                        hotkey "Grab Item"
                        wft 1000
                        target item
                        wait 250
                    endwhile

                    if findtype "iron ingot%s|board%s|cut up leather|3972|3962|3963|3980|3976|3973|3974|3981" ground -1 -1 15 as dungeonjunk and timer "DungeonCleanupRadar" > 3500
                        overhead " ¼ " 420 dungeonjunk
                        settimer "DungeonCleanupRadar" 0
                    endif
                endif

                if EnablePKRadar = 1
                    if insysmsg "Now tracking"
                        clearsysmsg
                        if EnableRedAlertOverhead = 1
                            overhead "[ !! RED ALERT !! ]" 337
                            wait 500
                        endif

                        if not hidden
                            if not cooldown 'Hiding'
                                if targetexists
                                    hotkey 'Cancel Current Target'
                                endif

                                useskill "Hiding"
                                wait 500

                                while insysmsg 'You must wait'
                                    clearsysmsg
                                    wait 250
                                    skill 'Hiding'
                                endwhile

                                if hidden
                                    // Do nothing
                                else
                                    if counttype 52149 self > 0
                                        if not cooldown 'Smoke Bomb'
                                            clearsysmsg
                                            hotkey 'Smoke Bomb'
                                            wait 500
                                            if insysmsg 'You must wait another'
                                                if EnableOverheadMessages = 1
                                                    overhead '[ SMOKE BOMB UNAVAILABLE ]' 333
                                                endif
                                                hotkey 'Toggle War Only'
                                                replay
                                            else
                                                if hidden
                                                    if EnableOverheadMessages = 1
                                                        overhead '[ SMOKE BOMB! ]' 1790
                                                    endif
                                                    @setvar! Stealthing 1
                                                    cooldown 'Hiding' 0
                                                    cooldown 'Stealth' 10000
                                                    cooldown 'Smoke Bomb' SmokeBombCooldown
                                                endif
                                                replay
                                            endif
                                        else
                                            if EnableOverheadMessages = 1
                                                overhead '[ SMOKE ON COOLDOWN! ]' 33
                                            endif
                                            hotkey 'Toggle War Only'
                                            replay
                                        endif
                                    else
                                        if EnableOverheadMessages = 1
                                            overhead '[ NO SMOKE BOMBS ]' 337
                                        endif
                                        replay
                                    endif
                                endif
                            endif
                        else
                            if EnableOverheadMessages = 1
                                wait 500
                                overhead "[ ALREADY HIDDEN! ]" 11
                            endif
                            wait 500
                        endif
                        wait 500
                    endif
                endif

                if EnableWeightWarningMessage = 1
                    if diffweight < GreenWarningDiffWeight and diffweight > YellowWarningDiffWeight and timer WeightTimer > 6000
                        if EnableOverheadMessages = 1
                            overhead "[ WEIGHT WARNING... ]" 77
                            settimer "WeightTimer" 0
                        else
                            overhead "  " 77
                            settimer "WeightTimer" 0
                        endif
                    elseif diffweight < YellowWarningDiffWeight and diffweight > RedWeightLimitDiffWeight and timer WeightTimer > 6000
                        if EnableOverheadMessages = 1
                            overhead "[ WEIGHT WARNING! ]" 153
                            settimer "WeightTimer" 0
                        else
                            overhead "  " 153
                            settimer "WeightTimer" 0
                        endif
                    elseif diffweight < RedWeightLimitDiffWeight and timer WeightTimer > 6000
                        if EnableOverheadMessages = 1
                            overhead "[ WEIGHT LIMIT REACHED! ]" 37
                            settimer "WeightTimer" 0
                            wait 500
                        else
                            overhead " Ï " 37
                            settimer "WeightTimer" 0
                        endif

                        wait 500

                        if weight > maxweight
                            if EnableDropGoldWhenOverweight = 1
                                if EnableOverheadMessages = 1
                                    wait 1000
                                    overhead "[ OVERWEIGHT! ]" 337
                                endif
                                replay
                            else
                                if EnableOverheadMessages = 1
                                    overhead "[ OVERWEIGHT! ]" 337
                                    wait 2000
                                endif
                                overhead "[ STOPPING SCRIPT! ]" 88
                            endif
                        endif
                    endif
                endif

                if EnableWizardHatStealthTrick = 1
                    if findtype 5912 self and not varexist MagicWizardHat and findlayer self head as MyCurrentHelmet
                        getlabel MyCurrentHelmet MyCurrentHelmetdesc
                        if 'magical' in MyCurrentHelmetdesc
                            @setvar! MyMagicHat MyCurrentHelmet
                        elseif 'aspect' in MyCurrentHelmetdesc
                            @setvar! MyHelmet MyCurrentHelmet
                        endif
                    endif

                    if not find MagicWizardHat self and findtype 5912 backpack as MyMagicHat
                        for 4
                        getlabel MyMagicHat MyHatdesc
                        if 'restyled' in MyHatdesc or 'unidentified' in MyHatdesc
                            @ignore MyMagicHat
                        elseif 'armored' in MyHatdesc or 'magical' in MyHatdesc
                            @setvar! MagicWizardHat MyMagicHat
                            break
                        endif
                        wait 250
                        endfor
                    endif

                    if varexist MagicWizardHat and find MagicWizardHat backpack
                        if not find MyHelmet self and findlayer self head as helm
                            @setvar! MyHelmet helm
                        endif

                        if not varexist MyHelmet
                            overhead '[ SELECT HELMET... ]' 153
                            @setvar! MyHelmet
                            wft 1500
                            while targetexists
                                wait 100
                            endwhile
                        endif
                    endif

                    if varexist MagicWizardHat and find MagicWizardHat backpack and find MyHelmet self and skill 'Stealth' >= 80
                        if not targetexists and not casting and hidden and Stealthing = 1 and stam = maxstam
                            while queued
                                // Do Nothing
                            endwhile

                            dclick MagicWizardHat

                            while queued
                                // Do Nothing
                            endwhile

                            wait 100
                            dclick MyHelmet
                            getlabel backpack backpacklabel
                            wait 250
                        endif

                        if not targetexists and not casting and not findlayer self head and find MyHelmet self
                            while queued
                                // Do Nothing
                            endwhile
                            dclick MyHelmet
                            getlabel backpack backpacklabel
                            wait 250
                        endif
                    endif

                    if varexist MagicWizardHat and find MyHelmet self and skill 'Stealth' >= 80
                        if not targetexists and not casting and not find MagicWizardHat backpack
                            while queued
                                // Do Nothing
                            endwhile
                            dclick MyHelmet
                            getlabel backpack backpacklabel
                            wait 250
                        endif
                    endif
                endif

                if EnableWeaponCheck = 1 and not find MySlowWeapon hand
                    clearignore
                    if not findtype 'great mace|giant club|giant spiked club|sledgehammer' self
                        if timer NoWeaponOverheadTimer > 5000
                            overhead "[ NO WEAPON! ]" 337
                            settimer NoWeaponOverheadTimer 0
                        endif
                    else
                        if not findtype 'great mace|giant club|giant spiked club|sledgehammer' hand
                            if findtype 'great mace|giant club|giant spiked club|sledgehammer' backpack as  MySlowWeapon
                                for 10
                                getlabel  MySlowWeapon WeaponLabel
                                wait 250
                                if "aspect" in WeaponLabel
                                    break
                                elseif "unidentified" in WeaponLabel
                                    @ignore  MySlowWeapon
                                    wait 250
                                else
                                    @ignore  MySlowWeapon
                                    wait 250
                                endif
                                if findtype 'great mace|giant club|giant spiked club|sledgehammer' backpack as  MySlowWeapon
                                    getlabel  MySlowWeapon WeaponLabel
                                    wait 250
                                endif
                                endfor
                                wait 250
                                dclick  MySlowWeapon
                                wait 500
                            endif
                        endif
                    endif
                endif

                if find CurrentTarget ground -1 -1 TargetAttackRange and warmode
                    if EnableInstantHide = 1
                        while cooldown Stealth or cooldown Hiding
                            wait 100
                            if not cooldown Stealth and not cooldown Hiding
                                break
                            endif
                            if timer HidingOverheadTimer > 2500 and EnableOverheadMessages = 1 
                                overhead "[ INSTA-HIDE DELAY... ]" 13
                                settimer HidingOverheadTimer 0
                                wait 500
                            elseif timer HidingOverheadTimer > 2500
                                overhead " Ï " 13
                                settimer HidingOverheadTimer 0
                                wait 500
                            endif
                        endwhile
                    endif

                    attack CurrentTarget
                    wait 500
                    @setvar! Stealthing 0
                    
                    if insysmsg 'You strike your target from the shadows!' 
                        if EnableOverheadMessages = 1
                            overhead "[ BACKSTAB!! ]" 1790 CurrentTarget
                        endif 
                        overhead " ¼ " 1790 CurrentTarget
                    endif

                    if insysmsg 'Vanish activated'
                        if EnableOverheadMessages = 1
                            overhead '[ VANISHED!! ]' 2114
                        endif
                        wait 500
                        @setvar! Stealthing 1
                        if EnableSmokeBombDoubleTap = 1
                            hotkey 'Toggle War Only'
                        else 
                            hotkey 'Toggle Peace Only'
                        endif
                        clearsysmsg
                        cooldown 'Stealth' 0
                        cooldown "Hiding" 0
                        replay
                    endif

                    if EnableExplosionPotion = 1 and not hidden and not dead CurrentTarget
                        if skill 'Alchemy' >= 80
                            if findtype 'purple potion' self as explotPot
                                getlabel explotPot potLabel
                                if "(" in potLabel
                                    if timer PurplePotionTimer > PurplePotionCooldown
                                        @setvar! PurplePotionReady 1
                                        wait 250 
                                    else
                                        @setvar! PurplePotionReady 0
                                    endif
                                else
                                    @setvar! PurplePotionReady 1
                                    wait 250
                                endif
                            else
                                if EnableOverheadMessages = 1 and timer purpleMessageTimer > 15000
                                    overhead '[ NO PURPLE POTIONS ]' 337
                                    settimer purpleMessageTimer 0
                                endif
                            endif

                            if targetexists
                                hotkey 'cancel current target'
                            endif
                            
                            @setvar! Interrupted 0 
                            
                            if PurplePotionReady = 1 and not dead CurrentTarget and find CurrentTarget ground -1 -1 TargetAttackRange
                                while not insysmsg "Where should i throw this potion?"
                                    potion 'explosion'
                                endwhile

                                @setvar! PurplePotionReady 0
                                settimer PurplePotionTimer 0

                                while not targetexists
                                    if dead CurrentTarget and not find CurrentTarget ground -1 -1 TargetAttackRange
                                        @setvar! Interrupted 1
                                        hotkey 'cancel current target'
                                        break
                                    endif
                                endwhile

                                if Interrupted = 0
                                    target CurrentTarget
                                    if EnableOverheadMessages = 1
                                        overhead '[ EXPLOSION POT... ]' 419
                                    endif
                                    cooldown "Purple Potion" 15000
                                    getlabel backpack packdesc
                                    wait 250
                                endif
                            endif
                        endif
                    endif 

                    if EnableFastSecondHit = 1 and not hidden and not dead CurrentTarget
                        if EnableWeaponAbilities = 1
                            if timer WeaponAbilityTimer > WeaponAbilityCooldown and UsePummelAbility = 1
                                clearsysmsg
                                yell "[WeaponAbility1"
                                wait 250
                                if insysmsg "You cannot"
                                    settimer WeaponAbilityTimer 25000
                                    clearsysmsg
                                else
                                    if EnableOverheadMessages = 1
                                        overhead "[ PUMMEL! ]" 37
                                    endif
                                    cooldown "Weapon Ability" WeaponAbilityCooldown
                                    cooldown "Pummel Ability" 15000
                                    settimer WeaponAbilityTimer 0
                                endif
                            elseif timer WeaponAbilityTimer > WeaponAbilityCooldown and UseStunAbility = 1
                                clearsysmsg
                                yell "[WeaponAbility2"
                                wait 250
                                if insysmsg "You cannot"
                                    settimer WeaponAbilityTimer 25000
                                    clearsysmsg
                                else
                                    if EnableOverheadMessages = 1
                                        overhead "[ STUN! ]" 37
                                    endif
                                    cooldown "Weapon Ability" WeaponAbilityCooldown
                                    cooldown "Stun Ability" 15000
                                    settimer WeaponAbilityTimer 0
                                endif
                            elseif timer WeaponAbilityTimer > WeaponAbilityCooldown and UseSmashAbility = 1
                                clearsysmsg
                                yell "[WeaponAbility3"
                                wait 250
                                if insysmsg "You cannot"
                                    settimer WeaponAbilityTimer 25000
                                    clearsysmsg
                                else
                                    if EnableOverheadMessages = 1
                                        overhead "[ SMASH! ]" 37
                                    endif
                                    cooldown "Weapon Ability" WeaponAbilityCooldown
                                    cooldown "Smash Ability" 5000
                                    settimer WeaponAbilityTimer 0
                                endif
                                wait 500
                            endif
                        endif

                        wait 500

                        if find MyFastWeapon self
                            dclick MyFastWeapon
                            getlabel backpack backpacklabel
                            wait 250
                            attack CurrentTarget
                            wait 1000
                        else
                            if EnableOverheadMessages = 1
                                overhead '[ NO FAST WEAPON! ]' 333
                            endif
                        endif

                        if find MySlowWeapon self
                            dclick MySlowWeapon
                            getlabel backpack backpacklabel
                            wait 250
                        else
                            if EnableOverheadMessages = 1
                            overhead '[ NO SLOW WEAPON! ]' 333
                            endif
                        endif
                    endif

                    wait 250 
                    
                    if not dead CurrentTarget
                        if EnableSmokeBombDoubleTap = 1
                            while cooldown Hiding or cooldown Stealth
                                if EnableHealPotion = 1 and diffhits >= HealPotionHPdiff and not hidden
                                    if findtype "Yellow Potion" self as HealPot
                                        getlabel HealPot HealPotlabel
                                        if "next" in HealPotlabel
                                            // Do nothing
                                        else
                                            @setvar! HealPotionCheck 0

                                            if counttype 3852 self as HealPotCount
                                                @setvar! HealPotionCheck HealPotCount
                                            endif

                                            clearsysmsg
                                            dclicktype 3852
                                            getlabel backpack backpackdesc
                                            wait 250

                                            if HealPotionCheck != counttype 3852 self or insysmsg "potion satchel used"
                                                settimer 'HealPotionTimer' 0
                                                cooldown "Healing Potion" 10000
                                                if EnableOverheadMessages = 1
                                                    if insysmsg "potion satchel used"
                                                        overhead '[ FREE HEAL POTION ]' 253
                                                    else
                                                        overhead "[ HEAL POTION ]" 253
                                                    endif
                                                endif
                                                clearsysmsg
                                            endif
                                        endif
                                    else
                                        if timer 'yellowMessageTimer' > 4500
                                            overhead "[ NO HEAL POTS! ]" 337
                                            settimer 'yellowMessageTimer' 0
                                        endif
                                    endif
                                endif

                                if EnablePanaceaPotion = 1
                                    if findbuff "bleed" or findbuff "diseased" and skill 'Alchemy' >= 80
                                        if not findbuff "panacea potion cooldown"
                                            if findtype "Orange Potion" self
                                                dclicktype "Orange Potion"
                                                wait 500
                                                if findbuff "panacea potion cooldown" and EnableOverheadMessages = 1
                                                    overhead "[ PANACEA POTION ]" 2117
                                                endif
                                                cooldown 'Panacea Potion' 30000
                                            else 
                                                if timer 'orangeMessageTimer' > 15000
                                                    overhead "[ NO CURE POTS! ]" 337
                                                    settimer 'orangeMessageTimer' 0
                                                endif
                                            endif
                                        else 
                                            if EnableOverheadMessages = 1 and timer PanaceaOverheadTimer > 15000
                                                overhead '[ PANACEA ON COOLDOWN! ]' 37
                                                settimer PanaceaOverheadTimer 0
                                            endif
                                        endif
                                    endif
                                endif

                                if EnableCleansingBrews = 1
                                    if findbuff "Disease" or findbuff "Bleed"
                                        if timer CleansingBrewTimer > 120000
                                            if findtype 50675 self 2935 as CleansingBrew
                                                dclick CleansingBrew
                                                if EnableOverheadMessages = 1
                                                    overhead '[ CLEANSING BREW ]' 2117
                                                endif
                                                cooldown 'Cleansing Brew' 120000
                                                settimer CleansingBrewTimer 0
                                                wait 250
                                            else
                                                if timer CleansingBrewOverhead > 15000
                                                    overhead "[ NO CLEANSING BREWS! ]" 337
                                                    settimer CleansingBrewOverhead 0
                                                    settimer CleansingBrewTimer 0
                                                endif
                                            endif
                                        else 
                                            if EnableOverheadMessages = 1 and timer CleansingBrewOverhead > 15000
                                                overhead '[ BREW ON COOLDOWN! ]' 37
                                                settimer CleansingBrewOverhead 0
                                            endif
                                        endif
                                    endif
                                endif

                                if EnableCurePotion = 1
                                    while poisoned
                                        if findtype "Orange Potion" self
                                            dclicktype "Orange Potion"
                                            if EnableOverheadMessages = 1 and timer 'orangeMessageTimer' > 3500
                                                overhead "[ CURE POTION ]" 44
                                                settimer 'orangeMessageTimer' 0
                                            endif
                                            wait 250
                                        else
                                            if timer 'orangeMessageTimer' > 5000
                                                overhead "[ NO CURE POTS! ]" 337
                                                settimer 'orangeMessageTimer' 0
                                            endif
                                        endif
                                        if diffhits > 40
                                            break
                                        endif
                                    endwhile
                                endif

                                if diffhits > 0 and not bandaging and not hidden and skill 'healing' > 0
                                    if findtype 'clean bandage%s%' self
                                        if targetexists
                                            hotkey 'cancel current target'
                                        endif
                                        hotkey 'Bandage Self'
                                        if EnableOverheadMessages = 1
                                            if timer aidsMessageTimer > 5000
                                                overhead "[ BANDAGING... ]" 88
                                                settimer aidsMessageTimer 0
                                            endif
                                        endif
                                        wait 500
                                    else
                                        if timer aidsMessageTimer > 5000 and EnableOverheadMessages = 1
                                            overhead "[ OUT OF BANDAGES! ]" 337
                                            settimer aidsMessageTimer 0
                                        endif
                                    endif
                                endif

                                if EnableRefreshPotion = 1 and diffstam >= RefreshPotionSPdiff and not hidden
                                    if findtype "Red Potion" self
                                        dclicktype "Red Potion"
                                        if EnableOverheadMessages = 1
                                            overhead "[ REFRESH POTION ]" 37
                                        endif
                                        wait 500
                                    else
                                        if timer redMessageTimer > 4500
                                            overhead "[ NO REFRESH POTS! ]" 337
                                            settimer redMessageTimer 0
                                        endif
                                    endif
                                    wait 500
                                endif
                            
                                wait 100
                                
                                if not cooldown Hiding
                                    break
                                endif
                            endwhile
                            
                            getlabel backpack backpacklabel
                            
                            if counttype 52149 self > 0
                                if not cooldown 'Smoke Bomb'
                                    hotkey 'Smoke Bomb'
                                    wait 500
                                    if insysmsg 'You must wait another'
                                        if EnableOverheadMessages = 1
                                            overhead '[ SMOKE BOMB UNAVAILABLE ]' 333
                                        endif
                                        wait 1000
                                        if not cooldown 'Hiding'
                                            skill 'Hiding'
                                            wait 500
                                        endif
                                        if hidden
                                            replay
                                        else
                                            clearsysmsg
                                            hotkey 'Toggle War Only'
                                            replay
                                        endif
                                    else
                                        if hidden
                                            if EnableOverheadMessages = 1
                                                overhead '[ SMOKE BOMB! ]' 1790
                                            endif
                                            @setvar! Stealthing 1
                                            cooldown 'Hiding' 0
                                            cooldown 'Stealth' 10000
                                            cooldown 'Smoke Bomb' SmokeBombCooldown
                                            hotkey 'Toggle War Only'
                                            if find CurrentTarget ground -1 -1 TargetAttackRange and not dead CurrentTarget
                                                attack CurrentTarget
                                                wait 250
                                            endif
                                        endif

                                        if dead CurrentTarget
                                            hotkey 'Toggle Peace Only'
                                        else
                                            hotkey 'Toggle War Only'
                                        endif
                                        replay
                                    endif
                                else
                                    if EnableOverheadMessages = 1
                                        overhead '[ SMOKE ON COOLDOWN! ]' 333
                                    endif
                                    
                                    wait 500
                                    
                                    if not cooldown 'Hiding'
                                        skill 'Hiding'
                                        wait 500
                                    endif
                                    
                                    if hidden
                                        replay
                                    endif
                                endif
                            else
                                if EnableOverheadMessages = 1
                                    overhead '[ NO SMOKE BOMBS ]' 333
                                endif
                                
                                if not cooldown 'Hiding'
                                    skill 'Hiding'
                                    wait 500
                                endif
                                
                                if hidden
                                    replay
                                endif
                            endif

                            if dead CurrentTarget
                                wait 1500
                                settimer STORELOOT 0
                            endif

                            if not hidden 
                                if EnableSmokeBombWhenAggro = 1
                                    if counttype 52149 self > 0
                                        if not cooldown 'Smoke Bomb'
                                            clearsysmsg
                                            hotkey 'Smoke Bomb'
                                            wait 500
                                            if insysmsg 'You must wait another'
                                                if EnableOverheadMessages = 1
                                                    overhead '[ SMOKE BOMB UNAVAILABLE ]' 333
                                                endif
                                                hotkey 'Toggle War Only'
                                                replay
                                            else
                                                if hidden
                                                    if EnableOverheadMessages = 1
                                                        overhead '[ SMOKE BOMB! ]' 1790
                                                    endif
                                                        @setvar! Stealthing 1
                                                        cooldown 'Hiding' 0
                                                        cooldown 'Stealth' 10000
                                                    cooldown 'Smoke Bomb' SmokeBombCooldown
                                                endif
                                                replay
                                            endif
                                        else
                                            if EnableOverheadMessages = 1
                                                overhead '[ SMOKE ON COOLDOWN! ]' 33
                                            endif
                                            hotkey 'Toggle War Only'
                                            replay
                                        endif
                                    else
                                        if EnableOverheadMessages = 1
                                            overhead '[ NO SMOKE BOMBS ]' 337
                                        endif
                                        cooldown 'Hiding' 1000
                                        if not hidden
                                            hotkey 'Toggle War Only'
                                            replay
                                        endif
                                    endif
                                else 
                                    hotkey 'Toggle War Only'
                                    @setvar! Stealthing 0
                                    @setvar! KeepOnTruckin 0
                                    clearsysmsg 
                                    replay
                                endif
                            endif

                            if dead CurrentTarget
                                wait 1500
                                settimer STORELOOT 0
                            endif
                        endif
                    else 
                        hotkey 'Toggle Peace Only'

                        if EnableAutoCarving = 1 and findtype 11552 self and not hidden and dead CurrentTarget
                            while findtype "corpse" ground -1 -1 2 as deadbody
                                if findtype 11552 self
                                    if targetexists
                                        hotkey 'cancel current target'
                                    endif
                                    while not targetexists
                                        skill 'forensicevaluation'
                                    endwhile
                                    if targetexists and find deadbody ground -1 -1 2
                                        target 'self'
                                        @ignore deadbody
                                        wait 500
                                    endif
                                    if insysmsg "You dont see anything nearby"
                                        clearsysmsg
                                        break
                                    else
                                        if EnableOverheadMessages = 1 and timer SkinningTimer > 3000
                                            overhead "[ SKINNING... ]" 333
                                            settimer SkinningTimer 0
                                        endif
                                    endif
                                else
                                    if EnableOverheadMessages = 1 and timer SkinningTimer > 15000
                                        overhead "[ NO SKINNING KNIFE ]" 337
                                        settimer SkinningTimer 0
                                        break
                                    endif
                                endif
                            endwhile
                        endif

                        wait LootDelayTimer

                        while cooldown Hiding or cooldown Stealth
                            if timer HidingOverheadTimer > 2500 and EnableOverheadMessages = 1
                                overhead "[ WAITING FOR COOLDOWN... ]" 13
                                settimer HidingOverheadTimer 0
                                wait 500
                            elseif timer HidingOverheadTimer > 2500
                                overhead " Ï " 13
                                settimer HidingOverheadTimer 0
                                wait 500
                            endif

                            wait 100

                            if not cooldown Hiding and not cooldown Stealth
                                break
                            endif
                            
                            if warmode 
                                replay
                            endif
                            
                            if EnableHealPotion = 1 and diffhits >= HealPotionHPdiff and not hidden
                                if findtype "Yellow Potion" self as HealPot
                                    getlabel HealPot HealPotlabel
                                    if "next" in HealPotlabel
                                        // Do nothing
                                    else
                                        @setvar! HealPotionCheck 0

                                        if counttype 3852 self as HealPotCount
                                            @setvar! HealPotionCheck HealPotCount
                                        endif

                                        clearsysmsg
                                        dclicktype 3852
                                        getlabel backpack backpackdesc
                                        wait 250

                                        if HealPotionCheck != counttype 3852 self or insysmsg "potion satchel used"
                                            settimer 'HealPotionTimer' 0
                                            cooldown "Healing Potion" 10000
                                            if EnableOverheadMessages = 1
                                                if insysmsg "potion satchel used"
                                                    overhead '[ FREE HEAL POTION ]' 253
                                                else
                                                    overhead "[ HEAL POTION ]" 253
                                                endif
                                            endif
                                            clearsysmsg
                                        endif
                                    endif
                                else
                                    if timer 'yellowMessageTimer' > 4500
                                        overhead "[ NO HEAL POTS! ]" 337
                                        settimer 'yellowMessageTimer' 0
                                    endif
                                endif
                            endif

                            if EnablePanaceaPotion = 1
                                if findbuff "bleed" or findbuff "diseased" and skill 'Alchemy' >= 80
                                    if not findbuff "panacea potion cooldown"
                                        if findtype "Orange Potion" self
                                            dclicktype "Orange Potion"
                                            wait 500
                                            if findbuff "panacea potion cooldown" and EnableOverheadMessages = 1
                                                overhead "[ PANACEA POTION ]" 2117
                                            endif
                                            cooldown 'Panacea Potion' 30000
                                        else 
                                            if timer 'orangeMessageTimer' > 15000
                                                overhead "[ NO CURE POTS! ]" 337
                                                settimer 'orangeMessageTimer' 0
                                            endif
                                        endif
                                    else 
                                        if EnableOverheadMessages = 1 and timer PanaceaOverheadTimer > 15000
                                            overhead '[ PANACEA ON COOLDOWN! ]' 37
                                            settimer PanaceaOverheadTimer 0
                                        endif
                                    endif
                                endif
                            endif

                            if EnableCleansingBrews = 1
                                if findbuff "Disease" or findbuff "Bleed"
                                    if timer CleansingBrewTimer > 120000
                                        if findtype 50675 self 2935 as CleansingBrew
                                            dclick CleansingBrew
                                            if EnableOverheadMessages = 1
                                                overhead '[ CLEANSING BREW ]' 2117
                                            endif
                                            cooldown 'Cleansing Brew' 120000
                                            settimer CleansingBrewTimer 0
                                            wait 250
                                        else
                                            if timer CleansingBrewOverhead > 15000
                                                overhead "[ NO CLEANSING BREWS! ]" 337
                                                settimer CleansingBrewOverhead 0
                                                settimer CleansingBrewTimer 0
                                            endif
                                        endif
                                    else 
                                        if EnableOverheadMessages = 1 and timer CleansingBrewOverhead > 15000
                                            overhead '[ BREW ON COOLDOWN! ]' 37
                                            settimer CleansingBrewOverhead 0
                                        endif
                                    endif
                                endif
                            endif

                            if EnableCurePotion = 1
                                while poisoned
                                    if findtype "Orange Potion" self
                                        dclicktype "Orange Potion"
                                        if EnableOverheadMessages = 1 and timer 'orangeMessageTimer' > 3500
                                            overhead "[ CURE POTION ]" 44
                                            settimer 'orangeMessageTimer' 0
                                        endif
                                        wait 250
                                    else
                                        if timer 'orangeMessageTimer' > 5000
                                            overhead "[ NO CURE POTS! ]" 337
                                            settimer 'orangeMessageTimer' 0
                                        endif
                                    endif
                                    if diffhits > 40
                                        break
                                    endif
                                endwhile
                            endif

                            if diffhits > 0 and not bandaging and not hidden and skill 'healing' > 0
                                if findtype 'clean bandage%s%' self
                                    if targetexists
                                        hotkey 'cancel current target'
                                    endif
                                    hotkey 'Bandage Self'
                                    if EnableOverheadMessages = 1
                                        if timer aidsMessageTimer > 5000
                                            overhead "[ BANDAGING... ]" 88
                                            settimer aidsMessageTimer 0
                                        endif
                                    endif
                                    wait 500
                                else
                                    if timer aidsMessageTimer > 5000 and EnableOverheadMessages = 1
                                        overhead "[ OUT OF BANDAGES! ]" 337
                                        settimer aidsMessageTimer 0
                                    endif
                                endif
                            endif

                            if EnableRefreshPotion = 1 and diffstam >= RefreshPotionSPdiff and not hidden
                                if findtype "Red Potion" self
                                    dclicktype "Red Potion"
                                    if EnableOverheadMessages = 1
                                        overhead "[ REFRESH POTION ]" 37
                                    endif
                                    wait 500
                                else
                                    if timer redMessageTimer > 4500
                                        overhead "[ NO REFRESH POTS! ]" 337
                                        settimer redMessageTimer 0
                                    endif
                                endif
                                wait 500
                            endif
                        endwhile

                        clearsysmsg 
                        useskill 'Hiding'
                        wait 250
                        hotkey 'Toggle Peace Only'
                        wait 250

                        while insysmsg 'You must wait'
                            if timer HidingOverheadTimer > 2500 and EnableOverheadMessages = 1 and not hidden
                                overhead "[ WAITING TO HIDE... ]" 13
                                settimer HidingOverheadTimer 0
                                wait 500
                            elseif timer HidingOverheadTimer > 2500 and not hidden
                                overhead " Ï " 37
                                settimer HidingOverheadTimer 0
                                wait 500
                            endif
                            
                            clearsysmsg
                            skill 'Hiding'
                            wait 500
                            
                            if hidden
                                break
                            endif
                            
                            if warmode 
                                replay
                            endif
                            
                            if EnableHealPotion = 1 and diffhits >= HealPotionHPdiff and not hidden
                                if findtype "Yellow Potion" self as HealPot
                                    getlabel HealPot HealPotlabel
                                    if "next" in HealPotlabel
                                        // Do nothing
                                    else
                                        @setvar! HealPotionCheck 0

                                        if counttype 3852 self as HealPotCount
                                            @setvar! HealPotionCheck HealPotCount
                                        endif

                                        clearsysmsg
                                        dclicktype 3852
                                        getlabel backpack backpackdesc
                                        wait 250

                                        if HealPotionCheck != counttype 3852 self or insysmsg "potion satchel used"
                                            settimer 'HealPotionTimer' 0
                                            cooldown "Healing Potion" 10000
                                            if EnableOverheadMessages = 1
                                                if insysmsg "potion satchel used"
                                                    overhead '[ FREE HEAL POTION ]' 253
                                                else
                                                    overhead "[ HEAL POTION ]" 253
                                                endif
                                            endif
                                            clearsysmsg
                                        endif
                                    endif
                                else
                                    if timer 'yellowMessageTimer' > 4500
                                        overhead "[ NO HEAL POTS! ]" 337
                                        settimer 'yellowMessageTimer' 0
                                    endif
                                endif
                            endif

                            if EnablePanaceaPotion = 1
                                if findbuff "bleed" or findbuff "diseased" and skill 'Alchemy' >= 80
                                    if not findbuff "panacea potion cooldown"
                                        if findtype "Orange Potion" self
                                            dclicktype "Orange Potion"
                                            wait 500
                                            if findbuff "panacea potion cooldown" and EnableOverheadMessages = 1
                                                overhead "[ PANACEA POTION ]" 2117
                                            endif
                                            cooldown 'Panacea Potion' 30000
                                        else 
                                            if timer 'orangeMessageTimer' > 15000
                                                overhead "[ NO CURE POTS! ]" 337
                                                settimer 'orangeMessageTimer' 0
                                            endif
                                        endif
                                    else 
                                        if EnableOverheadMessages = 1 and timer PanaceaOverheadTimer > 15000
                                            overhead '[ PANACEA ON COOLDOWN! ]' 37
                                            settimer PanaceaOverheadTimer 0
                                        endif
                                    endif
                                endif
                            endif

                            if EnableCleansingBrews = 1
                                if findbuff "Disease" or findbuff "Bleed"
                                    if timer CleansingBrewTimer > 120000
                                        if findtype 50675 self 2935 as CleansingBrew
                                            dclick CleansingBrew
                                            if EnableOverheadMessages = 1
                                                overhead '[ CLEANSING BREW ]' 2117
                                            endif
                                            cooldown 'Cleansing Brew' 120000
                                            settimer CleansingBrewTimer 0
                                            wait 250
                                        else
                                            if timer CleansingBrewOverhead > 15000
                                                overhead "[ NO CLEANSING BREWS! ]" 337
                                                settimer CleansingBrewOverhead 0
                                                settimer CleansingBrewTimer 0
                                            endif
                                        endif
                                    else 
                                        if EnableOverheadMessages = 1 and timer CleansingBrewOverhead > 15000
                                            overhead '[ BREW ON COOLDOWN! ]' 37
                                            settimer CleansingBrewOverhead 0
                                        endif
                                    endif
                                endif
                            endif

                            if EnableCurePotion = 1
                                while poisoned
                                    if findtype "Orange Potion" self
                                        dclicktype "Orange Potion"
                                        if EnableOverheadMessages = 1 and timer 'orangeMessageTimer' > 3500
                                            overhead "[ CURE POTION ]" 44
                                            settimer 'orangeMessageTimer' 0
                                        endif
                                        wait 250
                                    else
                                        if timer 'orangeMessageTimer' > 5000
                                            overhead "[ NO CURE POTS! ]" 337
                                            settimer 'orangeMessageTimer' 0
                                        endif
                                    endif
                                    if diffhits > 40
                                        break
                                    endif
                                endwhile
                            endif

                            if diffhits > 0 and not bandaging and not hidden and skill 'healing' > 0
                                if findtype 'clean bandage%s%' self
                                    if targetexists
                                        hotkey 'cancel current target'
                                    endif
                                    hotkey 'Bandage Self'
                                    if EnableOverheadMessages = 1
                                        if timer aidsMessageTimer > 5000
                                            overhead "[ BANDAGING... ]" 88
                                            settimer aidsMessageTimer 0
                                        endif
                                    endif
                                    wait 500
                                else
                                    if timer aidsMessageTimer > 5000 and EnableOverheadMessages = 1
                                        overhead "[ OUT OF BANDAGES! ]" 337
                                        settimer aidsMessageTimer 0
                                    endif
                                endif
                            endif

                            if EnableRefreshPotion = 1 and diffstam >= RefreshPotionSPdiff and not hidden
                                if findtype "Red Potion" self
                                    dclicktype "Red Potion"
                                    if EnableOverheadMessages = 1
                                        overhead "[ REFRESH POTION ]" 37
                                    endif
                                    wait 500
                                else
                                    if timer redMessageTimer > 4500
                                        overhead "[ NO REFRESH POTS! ]" 337
                                        settimer redMessageTimer 0
                                    endif
                                endif
                                wait 500
                            endif
                        endwhile
                        
                        wait 500

                        if hidden
                            hotkey 'Toggle Peace Only'
                            clearsysmsg 
                            replay
                        elseif not hidden
                            if EnableSmokeBombWhenAggro = 1
                                if counttype 52149 self > 0
                                    if not cooldown 'Smoke Bomb'
                                        clearsysmsg
                                        hotkey 'Smoke Bomb'
                                        wait 500
                                        if insysmsg 'You must wait another'
                                            if EnableOverheadMessages = 1
                                                overhead '[ SMOKE BOMB UNAVAILABLE ]' 333
                                            endif
                                            hotkey 'Toggle War Only'
                                            replay
                                        else
                                            if hidden
                                                if EnableOverheadMessages = 1
                                                    overhead '[ SMOKE BOMB! ]' 1790
                                                endif
                                                    @setvar! Stealthing 1
                                                    cooldown 'Hiding' 0
                                                    cooldown 'Stealth' 10000
                                                cooldown 'Smoke Bomb' SmokeBombCooldown
                                            endif
                                            replay
                                        endif
                                    else
                                        if EnableOverheadMessages = 1
                                            overhead '[ SMOKE ON COOLDOWN! ]' 33
                                        endif
                                        hotkey 'Toggle War Only'
                                        replay
                                    endif
                                else
                                    if EnableOverheadMessages = 1
                                        overhead '[ NO SMOKE BOMBS ]' 337
                                    endif
                                    cooldown 'Hiding' 1000
                                    if not hidden
                                        hotkey 'Toggle War Only'
                                        replay
                                    endif
                                endif
                            else 
                                hotkey 'Toggle War Only'
                                @setvar! Stealthing 0
                                @setvar! KeepOnTruckin 0
                                clearsysmsg 
                            endif
                            replay
                        endif

                        if dead CurrentTarget
                            wait 1500
                            settimer STORELOOT 0
                        endif
                        replay
                    endif
                endif
            endwhile
        endif
        replay
    endwhile

    ///////////////////////
    //  END TARGET LOOP  //
    ///////////////////////

    replay
endwhile

//////////////////////
//  END ALIVE LOOP  //
//////////////////////


/////////////////////////
//  BEGIN DEATH LOOP:  //
/////////////////////////

if dead 
    overhead "[ R.I.P. ]" 337
    wait 1500
    if EnableDeathLoop = 1
        while dead
            if insysmsg "world is saving"
                settimer "WorldSaveTimer" 0
                if EnableOverheadMessages = 1
                    overhead "[ WORLD SAVING... ]" 253
                endif
                while timer "WorldSaveTimer" < 4500
                    if insysmsg "save complete"
                        break
                    endif
                    wait 100
                endwhile
                if EnableOverheadMessages = 1
                    overhead "[ SAVE COMPLETE! ]" 253
                endif
            endif

            if timer "HEALERSEARCH" > 4000
                overhead "[ FIND A HEALER! ]" 0
                settimer "HEALERSEARCH" 0
            endif

            if findtype "blue moongate|30528|moongate" ground -1 -1 12 as EscapeGate
                if timer "GATEHERE" > 2000
                    overhead " ¼ " 253 EscapeGate
                    settimer "GATEHERE" 0
                endif
            endif

            while not gumpexists 3773199800 and findtype "blue moongate|30528|moongate" ground 0 1 2 as EscapeGate
                dclick EscapeGate
                wait 500
            endwhile

            while gumpexists 3773199800
                gumpresponse 16
                wait 500
                waitforgump 3773199800
                gumpresponse 2
                overhead "[ GATING TO TOWN... ]" 88
                break
            endwhile

            while gumpexists 2957810225
                overhead "[ HEALED! ]" 84
                gumpresponse 1
                wait 1000
                gumpclose 2957810225
                while not dead and not hidden and EnableHideAfterResurrection = 1
                    if targetexists
                        hotkey 'Cancel Current Target'
                    endif
                    wait 500
                    useskill 'Hiding'
                    wait 500
                    if hidden
                        break
                    endif
                endwhile
                break
            endwhile

            if not dead
               break
            endif
        endwhile
    else 
        wait 1000
        overhead "[ STOPPING SCRIPT! ]" 88
        stop     
    endif
endif

if not dead
    if EnableDressAfterResurrection = 1
        if EnableOverheadMessages = 1
            overhead '[ DRESSING... ]' 1790
        endif
        wait 500
        dress 'UltimateBackstabber'
        wait 500
        while queued
            wait 100
        endwhile
        wait 1000
        dress 'UltimateBackstabber'
        while queued
            wait 100
        endwhile
        wait 1000
        dress 'UltimateBackstabber'
        while queued
            wait 100
        endwhile
    endif
    wait 1000
    overhead "[ STOPPING SCRIPT! ]" 88
    stop
else 
    replay
endif 
replay

//////////////////////
//  END DEATH LOOP  //
//////////////////////






                                                                            #############################
                                                                           ###    SCRIPT ENDS HERE!    ###
                                                                            #############################






// Thank you for using my scripts!  I can be contacted via email here: dan@danstockman.com
// Good luck out there and say hello if you see me in Avadon (Lord Glacier) - please don't PK me lol




