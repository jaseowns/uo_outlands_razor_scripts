# This is an automated backup - check out https://outlands.uorazorscripts.com/script/dfd1dbf7-6d9f-433b-8543-830a3868a605 for latest
# Automation by Jaseowns
## Script: Flu Lumber
## Created by: flutschi#0
#############################################

#its basescript is jasonowns one, just edited for my taste

#create the cooldown 'summons' for keeping up the elementals!

clearsysmsg 

#this is when u want to summon something
while casting 
    overhead 'casting..'
    pause 1000
endwhile


if lhandempty ?? 0 
    if findtype "hatchet" backpack
        dclicktype 'hatchet' backpack
        wait 200
    endif
endif
            
if lhandempty ?? 0 
    overhead "No more hatchets!" 34
    replay
endif


# flu stuff

if name == 'Flu Miner'
    @setvar! woodBag 0x4458D226
endif
if name == 'Flu Logger'
    @setvar! woodBag 0x44CC0C8C
endif
if name == 'Flutschi'
    @setvar! woodBag 0x5852DB48
endif
if name == 'Flu Log'
    @setvar! woodBag 0x59674D2A
endif
    
if findtype 7133 backpack as log
    lift log 999
    drop woodBag -1 -1 -1
    pause 200
endif

if findtype 7133 woodBag as log
    dclick log
endif

if counttype 3705 backpack 38 < 10
    overhead 'not 10 trapped pouches anymore..'
endif

# check for summons

#casttime with summoners tome is 2500, else put 5000
@setvar! castTime 2500

if followers < 1 or cooldown 'summons' < 180000
    cast 'Earth Elemental'
    pause castTime
    pause 200
    say 'all guard me'
    cooldown 'summons' 600000
endif

stop

# moving stuff

clearignore 

if counttype 7127 woodBag 0 > 50
    overhead 'sorting..'
    while findtype 3705 backpack 38 as pouch
        if findtype 7127 woodBag 0 as log
            lift log 10
            drop pouch -1 -1 -1
            pause 700
        endif
        ignore pouch
    endwhile
endif

clearignore

if counttype 7127 woodBag 2419 > 50
    overhead 'sorting..'
    while findtype 3705 backpack 38 as pouch
        if findtype 7127 woodBag 2419 as log
            lift log 10
            drop pouch -1 -1 -1
            pause 700
        endif
        ignore pouch
    endwhile
endif

clearignore

if counttype 7127 woodBag 2406 > 50
    overhead 'sorting..'
    while findtype 3705 backpack 38 as pouch
        if findtype 7127 woodBag 2406 as log
            lift log 10
            drop pouch -1 -1 -1
            pause 700
        endif
        ignore pouch
    endwhile
endif

clearignore

if counttype 7127 woodBag 2413 > 50
    overhead 'sorting..'
    while findtype 3705 backpack 38 as pouch
        if findtype 7127 woodBag 2413 as log
            lift log 10
            drop pouch -1 -1 -1
            pause 700
        endif
        ignore pouch
    endwhile
endif

clearignore

if counttype 7127 woodBag 2418 > 50
    overhead 'sorting..'
    while findtype 3705 backpack 38 as pouch
        if findtype 7127 woodBag 2418 as log
            lift log 10
            drop pouch -1 -1 -1
            pause 700
        endif
        ignore pouch
    endwhile
endif

clearignore

if counttype 7127 woodBag 2213 > 50
    overhead 'sorting..'
    while findtype 3705 backpack 38 as pouch
        if findtype 7127 woodBag 2213 as log
            lift log 10
            drop pouch -1 -1 -1
            pause 700
        endif
        ignore pouch
    endwhile
endif

clearignore

if counttype 7127 woodBag 2425 > 50
    overhead 'sorting..'
    while findtype 3705 backpack 38 as pouch
        if findtype 7127 woodBag 2425 as log
            lift log 10
            drop pouch -1 -1 -1
            pause 700
        endif
        ignore pouch
    endwhile
endif

clearignore

if counttype 7127 woodBag 2207 > 50
    overhead 'sorting..'
    while findtype 3705 backpack 38 as pouch
        if findtype 7127 woodBag 2207 as log
            lift log 10
            drop pouch -1 -1 -1
            pause 700
        endif
        ignore pouch
    endwhile
endif

clearignore

if counttype 7127 woodBag 2219 > 50
    overhead 'sorting..'
    while findtype 3705 backpack 38 as pouch
        if findtype 7127 woodBag 2219 as log
            lift log 10
            drop pouch -1 -1 -1
            pause 700
        endif
        ignore pouch
    endwhile
endif

clearignore

if counttype 7127 woodBag 1763 > 50
    overhead 'sorting..'
    while findtype 3705 backpack 38 as pouch
        if findtype 7127 woodBag 1763 as log
            lift log 10
            drop pouch -1 -1 -1
            pause 700
        endif
        ignore pouch
    endwhile
endif

clearignore

#tracking!


if not findbuff 'tracking'
    overhead 'i should track..'

    while not gumpexists 4267467659
        useskill 'tracking'
        wait 250
    endwhile
    
    if gumpexists 4267467659
        while not insysmsg "You will now hunt all hostile players."
            gumpresponse 8 4267467659
            waitforgump 4267467659 5000
        endwhile
        gumpresponse 6 4267467659
        wait 1000
        clearsysmsg                     
    endif
    gumpclose 4267467659
endif

wait 500
overhead 'Lumberjacking' 0
hotkey 'Use item in hand'
wft 1000
hotkey 'Target Self'
for 75
    wait 100
    
    if insysmsg 'Now tracking' or insysmsg 'Distance'
        guild 'pk coming..'
        #xy
        script 'recallHome'
        stop
    endif
  
    if insysmsg 'world is saving'
        for 30
            overhead 'Waiting for world save...'
            wait 1000
            if insysmsg 'save complete'
                overhead 'Save complete - continue on!' 88
                clearsysmsg 
                wait 250
                replay
            endif
        endfor
    elseif lhandempty ?? 0 
        overhead "Broke axe" 34
        replay
    elseif insysmsg 'You do not see any' or insysmsg 'You cannot produce any wood'
        overhead 'Move to next spot' 88
        wait 250
        replay
    elseif insysmsg "travel"
        overhead 'Waiting for travel...'
        wait 1000
        replay
    else
        if insysmsg "any harvestable"
            overhead 'Move to next spot' 88
            replay
        elseif insysmsg "skillgain" or insysmsg "harvesting is not allowed"
            replay
        elseif insysmsg "world is saving" or insysmsg 'World save complete'
            replay
        elseif insysmsg "You hack"
            replay
        elseif insysmsg "You chop"
            replay
        elseif insysmsg "You must wait"
            overhead 'You must wait..' 34
            wait 500
            replay
        endif
    endif
endfor

if insysmsg "You must wait"
    wait 500
    replay
endif

overhead 'Captcha break!' 34
for 20
    overhead 'Awaiting Captcha...' 34
    wait 1000
    if insysmsg 'Captcha successful'
        overhead 'Success - continue on!' 88
        wait 1000
        replay
    endif
endfor

overhead 'Stopping script' 34