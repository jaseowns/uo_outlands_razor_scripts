# This is an automated backup - check out https://outlands.uorazorscripts.com/script/6ae1aaca-119b-410f-9e6b-fc1e629539aa for latest
# Automation by Jaseowns
## Script: Train Magery Fast & Efficient 80 to 120
## Created by: pedromarthon#0
#############################################

@setvar! "restock_method" 0
if findtype "storage shelf" ground 0 1 2 as storageShelf
    overhead "Container found."
    @setvar! "restock_method" storageShelf
else
    overhead "No storage shelf nearby"
    overhead "Target your restock container."
    @setvar! "restock_container"
endif
while skill 'Magery' < 120
    if counttype "Sulfurous Ash" < 10 or counttype "Spider's Silk" < 10
        overhead "Restocking..."
        if "restock_method" = 0
            restock 10
            wft 200
            target "restock_container"
        else
            menu "restock_method" 1
        endif
    endif
    if mana < 40
        overhead "Waiting for mana."
        if not findbuff "meditating"
            overhead "Meditating"
            hotkey 'Meditation'
        endif
        if not timerexists 'mushroom'
            createtimer 'mushroom'
            settimer 'mushroom' 61000
        endif

        if timer 'mushroom' > 60000 and findtype '29012' backpack and mana < 75
            overhead "Trying to eat shrooms"
            dclicktype '29012'
            wait 250
            if insysmsg 'restore some mana'
                settimer 'mushroom' 0
                clearsysmsg 
            endif
        endif 
        wait 2000
        continue
    endif
    if not findbuff "food satisfaction" and findtype "tray" backpack as food
        dclick food
        wait 500
    endif
    if mana > 40
        wait 1000
        overhead "Casting"
        wait 500
        cast "Flamestrike"
        waitfortarget 5000
        target last
    endif
endwhile

overhead 'Training Done!'