# This is an automated backup - check out https://outlands.uorazorscripts.com/script/df2ce424-1c14-45c1-8214-98db024290a2 for latest
# Automation by Jaseowns
## Script: Train resist from 80 -> 90 with storage shelf
## Created by: ragebunnyz#0
#############################################

# Train resist from 80 -> 90 with a storage shelf by flamestriking yourself and greater healing
# (Based on Jaseowns magery training script)
@setvar! jaseowns_SkillTimerCD 10500
if not timerexists jaseowns_SkillTimer
    settimer jaseowns_SkillTimer jaseowns_SkillTimerCD
endif

@setvar! max_resist_skill 90
if skill 'Resisting Spells' < max_resist_skill
    # Check if out of regs
    if counttype 3962 self < 1 or counttype 3974 self < 1 or counttype 3963 self < 1 or counttype 3973 self < 1 or counttype 3976 self < 1 or counttype 3981 self < 1 or counttype 3972 self < 1 or counttype 3980 self < 1    
        if findtype "storage shelf" ground -1 -1 2 as jaseowns_StorageShelf
            overhead "Resupply" 88
    menu jaseowns_StorageShelf 1
            wait 200
        endif
    endif
    while mana < 40 and not findbuff "actively meditating"
        if timer jaseowns_SkillTimer >= jaseowns_SkillTimerCD
                hotkey 'Meditation'
                settimer jaseowns_SkillTimer 0
        endif
    endwhile

    if timer jaseowns_SkillTimer >= jaseowns_SkillTimerCD and mana >= 40 and hp > 50
        overhead "Flamestrike" 88
        while not targetexists 
            hotkey 'Flamestrike'
            wft 3000
        endwhile
        if targetexists 
            hotkey 'Target Self'
        endif
        wait 1000
    endif 

    if timer jaseowns_SkillTimer >= jaseowns_SkillTimerCD and mana >= 40 and hp <= 50
    overhead "Healing" 88
        while not targetexists
            hotkey 'Greater Heal'
            wft 3000
        endwhile
        if targetexists
            hotkey 'Target Self'
        endif
        wait 1000
    endif

endif
loop